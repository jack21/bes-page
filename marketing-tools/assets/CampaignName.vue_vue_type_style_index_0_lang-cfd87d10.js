import{o as P,c as j,a as R,m as St,n as xt,d as Ce,u as Se,r as q,k as ye,h as Ge,b as l,w as m,l as he,g as pe,t as G,q as kt,s as Tt,p as ae,v as Lt,y as ht,x as Ze,z as et,i as It,e as E,F as ze,A as Ye,f as ce,B as Et,C as $t,I as Ot,D as Mt,Q as Dt,E as Ft,G as tt,H as nt,O as at,J as rt,K as st,L as ot,Y as Nt,M as Pt,N as Ut,T as pt,P as vt,R as Rt,S as Gt,j as _t,V as Bt}from"./index-507929e1.js";import{_ as it,i as Wt,b as At}from"./index-b5aa446b.js";const zt={class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Yt=R("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"},null,-1),qt=[Yt];function Vt(o,e){return P(),j("svg",zt,[...qt])}const lt={name:"mdi-close",render:Vt};function He(o){"@babel/helpers - typeof";return He=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(o)}function Pe(o){if(o===null||o===!0||o===!1)return NaN;var e=Number(o);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function fe(o,e){if(e.length<o)throw new TypeError(o+" argument"+(o>1?"s":"")+" required, but only "+e.length+" present")}function ke(o){fe(1,arguments);var e=Object.prototype.toString.call(o);return o instanceof Date||He(o)==="object"&&e==="[object Date]"?new Date(o.getTime()):typeof o=="number"||e==="[object Number]"?new Date(o):((typeof o=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ht(o,e){fe(2,arguments);var t=ke(o).getTime(),n=Pe(e);return new Date(t+n)}var jt={};function Xe(){return jt}function Qt(o){var e=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return e.setUTCFullYear(o.getFullYear()),o.getTime()-e.getTime()}function Xt(o){return fe(1,arguments),o instanceof Date||He(o)==="object"&&Object.prototype.toString.call(o)==="[object Date]"}function Kt(o){if(fe(1,arguments),!Xt(o)&&typeof o!="number")return!1;var e=ke(o);return!isNaN(Number(e))}function Jt(o,e){fe(2,arguments);var t=Pe(e);return Ht(o,-t)}var Zt=864e5;function en(o){fe(1,arguments);var e=ke(o),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),s=t-n;return Math.floor(s/Zt)+1}function je(o){fe(1,arguments);var e=1,t=ke(o),n=t.getUTCDay(),s=(n<e?7:0)+n-e;return t.setUTCDate(t.getUTCDate()-s),t.setUTCHours(0,0,0,0),t}function gt(o){fe(1,arguments);var e=ke(o),t=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(t+1,0,4),n.setUTCHours(0,0,0,0);var s=je(n),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var c=je(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=c.getTime()?t:t-1}function tn(o){fe(1,arguments);var e=gt(o),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var n=je(t);return n}var nn=6048e5;function an(o){fe(1,arguments);var e=ke(o),t=je(e).getTime()-tn(e).getTime();return Math.round(t/nn)+1}function Qe(o,e){var t,n,s,i,c,x,v,b;fe(1,arguments);var _=Xe(),g=Pe((t=(n=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(c=e.locale)===null||c===void 0||(x=c.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&s!==void 0?s:_.weekStartsOn)!==null&&n!==void 0?n:(v=_.locale)===null||v===void 0||(b=v.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&t!==void 0?t:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=ke(o),S=y.getUTCDay(),L=(S<g?7:0)+S-g;return y.setUTCDate(y.getUTCDate()-L),y.setUTCHours(0,0,0,0),y}function wt(o,e){var t,n,s,i,c,x,v,b;fe(1,arguments);var _=ke(o),g=_.getUTCFullYear(),y=Xe(),S=Pe((t=(n=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(c=e.locale)===null||c===void 0||(x=c.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&s!==void 0?s:y.firstWeekContainsDate)!==null&&n!==void 0?n:(v=y.locale)===null||v===void 0||(b=v.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=new Date(0);L.setUTCFullYear(g+1,0,S),L.setUTCHours(0,0,0,0);var N=Qe(L,e),B=new Date(0);B.setUTCFullYear(g,0,S),B.setUTCHours(0,0,0,0);var W=Qe(B,e);return _.getTime()>=N.getTime()?g+1:_.getTime()>=W.getTime()?g:g-1}function rn(o,e){var t,n,s,i,c,x,v,b;fe(1,arguments);var _=Xe(),g=Pe((t=(n=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(c=e.locale)===null||c===void 0||(x=c.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&s!==void 0?s:_.firstWeekContainsDate)!==null&&n!==void 0?n:(v=_.locale)===null||v===void 0||(b=v.options)===null||b===void 0?void 0:b.firstWeekContainsDate)!==null&&t!==void 0?t:1),y=wt(o,e),S=new Date(0);S.setUTCFullYear(y,0,g),S.setUTCHours(0,0,0,0);var L=Qe(S,e);return L}var sn=6048e5;function on(o,e){fe(1,arguments);var t=ke(o),n=Qe(t,e).getTime()-rn(t,e).getTime();return Math.round(n/sn)+1}function z(o,e){for(var t=o<0?"-":"",n=Math.abs(o).toString();n.length<e;)n="0"+n;return t+n}var ln={y:function(e,t){var n=e.getUTCFullYear(),s=n>0?n:1-n;return z(t==="yy"?s%100:s,t.length)},M:function(e,t){var n=e.getUTCMonth();return t==="M"?String(n+1):z(n+1,2)},d:function(e,t){return z(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,t){return z(e.getUTCHours()%12||12,t.length)},H:function(e,t){return z(e.getUTCHours(),t.length)},m:function(e,t){return z(e.getUTCMinutes(),t.length)},s:function(e,t){return z(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,n-3));return z(i,t.length)}};const Oe=ln;var Re={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},un={G:function(e,t,n){var s=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return Oe.y(e,t)},Y:function(e,t,n,s){var i=wt(e,s),c=i>0?i:1-i;if(t==="YY"){var x=c%100;return z(x,2)}return t==="Yo"?n.ordinalNumber(c,{unit:"year"}):z(c,t.length)},R:function(e,t){var n=gt(e);return z(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return z(n,t.length)},Q:function(e,t,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return z(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return z(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){var s=e.getUTCMonth();switch(t){case"M":case"MM":return Oe.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){var s=e.getUTCMonth();switch(t){case"L":return String(s+1);case"LL":return z(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){var i=on(e,s);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):z(i,t.length)},I:function(e,t,n){var s=an(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):z(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Oe.d(e,t)},D:function(e,t,n){var s=en(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):z(s,t.length)},E:function(e,t,n){var s=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){var i=e.getUTCDay(),c=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(c);case"ee":return z(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){var i=e.getUTCDay(),c=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(c);case"cc":return z(c,t.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var s=e.getUTCDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return z(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var s=e.getUTCHours(),i;switch(s===12?i=Re.noon:s===0?i=Re.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){var s=e.getUTCHours(),i;switch(s>=17?i=Re.evening:s>=12?i=Re.afternoon:s>=4?i=Re.morning:i=Re.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Oe.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Oe.H(e,t)},K:function(e,t,n){var s=e.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):z(s,t.length)},k:function(e,t,n){var s=e.getUTCHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):z(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Oe.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Oe.s(e,t)},S:function(e,t){return Oe.S(e,t)},X:function(e,t,n,s){var i=s._originalDate||e,c=i.getTimezoneOffset();if(c===0)return"Z";switch(t){case"X":return ct(c);case"XXXX":case"XX":return Ne(c);case"XXXXX":case"XXX":default:return Ne(c,":")}},x:function(e,t,n,s){var i=s._originalDate||e,c=i.getTimezoneOffset();switch(t){case"x":return ct(c);case"xxxx":case"xx":return Ne(c);case"xxxxx":case"xxx":default:return Ne(c,":")}},O:function(e,t,n,s){var i=s._originalDate||e,c=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+dt(c,":");case"OOOO":default:return"GMT"+Ne(c,":")}},z:function(e,t,n,s){var i=s._originalDate||e,c=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+dt(c,":");case"zzzz":default:return"GMT"+Ne(c,":")}},t:function(e,t,n,s){var i=s._originalDate||e,c=Math.floor(i.getTime()/1e3);return z(c,t.length)},T:function(e,t,n,s){var i=s._originalDate||e,c=i.getTime();return z(c,t.length)}};function dt(o,e){var t=o>0?"-":"+",n=Math.abs(o),s=Math.floor(n/60),i=n%60;if(i===0)return t+String(s);var c=e||"";return t+String(s)+c+z(i,2)}function ct(o,e){if(o%60===0){var t=o>0?"-":"+";return t+z(Math.abs(o)/60,2)}return Ne(o,e)}function Ne(o,e){var t=e||"",n=o>0?"-":"+",s=Math.abs(o),i=z(Math.floor(s/60),2),c=z(s%60,2);return n+i+t+c}const dn=un;var mt=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},yt=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},cn=function(e,t){var n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return mt(e,t);var c;switch(s){case"P":c=t.dateTime({width:"short"});break;case"PP":c=t.dateTime({width:"medium"});break;case"PPP":c=t.dateTime({width:"long"});break;case"PPPP":default:c=t.dateTime({width:"full"});break}return c.replace("{{date}}",mt(s,t)).replace("{{time}}",yt(i,t))},mn={p:yt,P:cn};const fn=mn;var hn=["D","DD"],pn=["YY","YYYY"];function vn(o){return hn.indexOf(o)!==-1}function _n(o){return pn.indexOf(o)!==-1}function ft(o,e,t){if(o==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var gn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wn=function(e,t,n){var s,i=gn[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};const yn=wn;function Je(o){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):o.defaultWidth,n=o.formats[t]||o.formats[o.defaultWidth];return n}}var bn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Cn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Sn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xn={date:Je({formats:bn,defaultWidth:"full"}),time:Je({formats:Cn,defaultWidth:"full"}),dateTime:Je({formats:Sn,defaultWidth:"full"})};const kn=xn;var Tn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ln=function(e,t,n,s){return Tn[e]};const In=Ln;function Be(o){return function(e,t){var n=t!=null&&t.context?String(t.context):"standalone",s;if(n==="formatting"&&o.formattingValues){var i=o.defaultFormattingWidth||o.defaultWidth,c=t!=null&&t.width?String(t.width):i;s=o.formattingValues[c]||o.formattingValues[i]}else{var x=o.defaultWidth,v=t!=null&&t.width?String(t.width):o.defaultWidth;s=o.values[v]||o.values[x]}var b=o.argumentCallback?o.argumentCallback(e):e;return s[b]}}var En={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$n={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},On={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Fn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Nn=function(e,t){var n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Pn={ordinalNumber:Nn,era:Be({values:En,defaultWidth:"wide"}),quarter:Be({values:$n,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Be({values:On,defaultWidth:"wide"}),day:Be({values:Mn,defaultWidth:"wide"}),dayPeriod:Be({values:Dn,defaultWidth:"wide",formattingValues:Fn,defaultFormattingWidth:"wide"})};const Un=Pn;function We(o){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,s=n&&o.matchPatterns[n]||o.matchPatterns[o.defaultMatchWidth],i=e.match(s);if(!i)return null;var c=i[0],x=n&&o.parsePatterns[n]||o.parsePatterns[o.defaultParseWidth],v=Array.isArray(x)?Gn(x,function(g){return g.test(c)}):Rn(x,function(g){return g.test(c)}),b;b=o.valueCallback?o.valueCallback(v):v,b=t.valueCallback?t.valueCallback(b):b;var _=e.slice(c.length);return{value:b,rest:_}}}function Rn(o,e){for(var t in o)if(o.hasOwnProperty(t)&&e(o[t]))return t}function Gn(o,e){for(var t=0;t<o.length;t++)if(e(o[t]))return t}function Bn(o){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(o.matchPattern);if(!n)return null;var s=n[0],i=e.match(o.parsePattern);if(!i)return null;var c=o.valueCallback?o.valueCallback(i[0]):i[0];c=t.valueCallback?t.valueCallback(c):c;var x=e.slice(s.length);return{value:c,rest:x}}}var Wn=/^(\d+)(th|st|nd|rd)?/i,An=/\d+/i,zn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Yn={any:[/^b/i,/^(a|c)/i]},qn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Vn={any:[/1/i,/2/i,/3/i,/4/i]},Hn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Xn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Jn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zn={ordinalNumber:Bn({matchPattern:Wn,parsePattern:An,valueCallback:function(e){return parseInt(e,10)}}),era:We({matchPatterns:zn,defaultMatchWidth:"wide",parsePatterns:Yn,defaultParseWidth:"any"}),quarter:We({matchPatterns:qn,defaultMatchWidth:"wide",parsePatterns:Vn,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:We({matchPatterns:Hn,defaultMatchWidth:"wide",parsePatterns:jn,defaultParseWidth:"any"}),day:We({matchPatterns:Qn,defaultMatchWidth:"wide",parsePatterns:Xn,defaultParseWidth:"any"}),dayPeriod:We({matchPatterns:Kn,defaultMatchWidth:"any",parsePatterns:Jn,defaultParseWidth:"any"})};const ea=Zn;var ta={code:"en-US",formatDistance:yn,formatLong:kn,formatRelative:In,localize:Un,match:ea,options:{weekStartsOn:0,firstWeekContainsDate:1}};const na=ta;var aa=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ra=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,sa=/^'([^]*?)'?$/,oa=/''/g,ia=/[a-zA-Z]/;function Ae(o,e,t){var n,s,i,c,x,v,b,_,g,y,S,L,N,B,W,J,oe,U;fe(2,arguments);var D=String(e),f=Xe(),p=(n=(s=t==null?void 0:t.locale)!==null&&s!==void 0?s:f.locale)!==null&&n!==void 0?n:na,a=Pe((i=(c=(x=(v=t==null?void 0:t.firstWeekContainsDate)!==null&&v!==void 0?v:t==null||(b=t.locale)===null||b===void 0||(_=b.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&x!==void 0?x:f.firstWeekContainsDate)!==null&&c!==void 0?c:(g=f.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(a>=1&&a<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var r=Pe((S=(L=(N=(B=t==null?void 0:t.weekStartsOn)!==null&&B!==void 0?B:t==null||(W=t.locale)===null||W===void 0||(J=W.options)===null||J===void 0?void 0:J.weekStartsOn)!==null&&N!==void 0?N:f.weekStartsOn)!==null&&L!==void 0?L:(oe=f.locale)===null||oe===void 0||(U=oe.options)===null||U===void 0?void 0:U.weekStartsOn)!==null&&S!==void 0?S:0);if(!(r>=0&&r<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!p.localize)throw new RangeError("locale must contain localize property");if(!p.formatLong)throw new RangeError("locale must contain formatLong property");var u=ke(o);if(!Kt(u))throw new RangeError("Invalid time value");var h=Qt(u),d=Jt(u,h),w={firstWeekContainsDate:a,weekStartsOn:r,locale:p,_originalDate:u},T=D.match(ra).map(function($){var F=$[0];if(F==="p"||F==="P"){var C=fn[F];return C($,p.formatLong)}return $}).join("").match(aa).map(function($){if($==="''")return"'";var F=$[0];if(F==="'")return la($);var C=dn[F];if(C)return!(t!=null&&t.useAdditionalWeekYearTokens)&&_n($)&&ft($,e,String(o)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&vn($)&&ft($,e,String(o)),C(d,$,p.localize,w);if(F.match(ia))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return $}).join("");return T}function la(o){var e=o.match(sa);return e?e[1].replace(oa,"'"):o}var bt={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(o,e){(function(t,n){o.exports=n()})(St,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,c={},x=0,v={parse:function(a,r){var u=(r=r||{}).dynamicTyping||!1;if(p(u)&&(r.dynamicTypingFunction=u,u={}),r.dynamicTyping=u,r.transform=!!p(r.transform)&&r.transform,r.worker&&v.WORKERS_SUPPORTED){var h=function(){if(!v.WORKERS_SUPPORTED)return!1;var w=($=n.URL||n.webkitURL||null,F=t.toString(),v.BLOB_URL||(v.BLOB_URL=$.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))),T=new n.Worker(w),$,F;return T.onmessage=J,T.id=x++,c[T.id]=T}();return h.userStep=r.step,h.userChunk=r.chunk,h.userComplete=r.complete,h.userError=r.error,r.step=p(r.step),r.chunk=p(r.chunk),r.complete=p(r.complete),r.error=p(r.error),delete r.worker,void h.postMessage({input:a,config:r,workerId:h.id})}var d=null;return v.NODE_STREAM_INPUT,typeof a=="string"?(a=function(w){return w.charCodeAt(0)===65279?w.slice(1):w}(a),d=r.download?new g(r):new S(r)):a.readable===!0&&p(a.read)&&p(a.on)?d=new L(r):(n.File&&a instanceof File||a instanceof Object)&&(d=new y(r)),d.stream(a)},unparse:function(a,r){var u=!1,h=!0,d=",",w=`\r
`,T='"',$=T+T,F=!1,C=null,V=!1;(function(){if(typeof r=="object"){if(typeof r.delimiter!="string"||v.BAD_DELIMITERS.filter(function(k){return r.delimiter.indexOf(k)!==-1}).length||(d=r.delimiter),(typeof r.quotes=="boolean"||typeof r.quotes=="function"||Array.isArray(r.quotes))&&(u=r.quotes),typeof r.skipEmptyLines!="boolean"&&typeof r.skipEmptyLines!="string"||(F=r.skipEmptyLines),typeof r.newline=="string"&&(w=r.newline),typeof r.quoteChar=="string"&&(T=r.quoteChar),typeof r.header=="boolean"&&(h=r.header),Array.isArray(r.columns)){if(r.columns.length===0)throw new Error("Option columns is empty");C=r.columns}r.escapeChar!==void 0&&($=r.escapeChar+T),(typeof r.escapeFormulae=="boolean"||r.escapeFormulae instanceof RegExp)&&(V=r.escapeFormulae instanceof RegExp?r.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var I=new RegExp(B(T),"g");if(typeof a=="string"&&(a=JSON.parse(a)),Array.isArray(a)){if(!a.length||Array.isArray(a[0]))return de(null,a,F);if(typeof a[0]=="object")return de(C||Object.keys(a[0]),a,F)}else if(typeof a=="object")return typeof a.data=="string"&&(a.data=JSON.parse(a.data)),Array.isArray(a.data)&&(a.fields||(a.fields=a.meta&&a.meta.fields||C),a.fields||(a.fields=Array.isArray(a.data[0])?a.fields:typeof a.data[0]=="object"?Object.keys(a.data[0]):[]),Array.isArray(a.data[0])||typeof a.data[0]=="object"||(a.data=[a.data])),de(a.fields||[],a.data||[],F);throw new Error("Unable to serialize unrecognized input");function de(k,M,X){var K="";typeof k=="string"&&(k=JSON.parse(k)),typeof M=="string"&&(M=JSON.parse(M));var re=Array.isArray(k)&&0<k.length,le=!Array.isArray(M[0]);if(re&&h){for(var ue=0;ue<k.length;ue++)0<ue&&(K+=d),K+=Z(k[ue],ue);0<M.length&&(K+=w)}for(var O=0;O<M.length;O++){var A=re?k.length:M[O].length,ee=!1,ie=re?Object.keys(M[O]).length===0:M[O].length===0;if(X&&!re&&(ee=X==="greedy"?M[O].join("").trim()==="":M[O].length===1&&M[O][0].length===0),X==="greedy"&&re){for(var H=[],me=0;me<A;me++){var ne=le?k[me]:me;H.push(M[O][ne])}ee=H.join("").trim()===""}if(!ee){for(var Q=0;Q<A;Q++){0<Q&&!ie&&(K+=d);var be=re&&le?k[Q]:Q;K+=Z(M[O][be],Q)}O<M.length-1&&(!X||0<A&&!ie)&&(K+=w)}}return K}function Z(k,M){if(k==null)return"";if(k.constructor===Date)return JSON.stringify(k).slice(1,25);var X=!1;V&&typeof k=="string"&&V.test(k)&&(k="'"+k,X=!0);var K=k.toString().replace(I,$);return(X=X||u===!0||typeof u=="function"&&u(k,M)||Array.isArray(u)&&u[M]||function(re,le){for(var ue=0;ue<le.length;ue++)if(-1<re.indexOf(le[ue]))return!0;return!1}(K,v.BAD_DELIMITERS)||-1<K.indexOf(d)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?T+K+T:K}}};if(v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK="\uFEFF",v.BAD_DELIMITERS=["\r",`
`,'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!s&&!!n.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=W,v.ParserHandle=N,v.NetworkStreamer=g,v.FileStreamer=y,v.StringStreamer=S,v.ReadableStreamStreamer=L,n.jQuery){var b=n.jQuery;b.fn.parse=function(a){var r=a.config||{},u=[];return this.each(function(w){if(!(b(this).prop("tagName").toUpperCase()==="INPUT"&&b(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var T=0;T<this.files.length;T++)u.push({file:this.files[T],inputElem:this,instanceConfig:b.extend({},r)})}),h(),this;function h(){if(u.length!==0){var w,T,$,F,C=u[0];if(p(a.before)){var V=a.before(C.file,C.inputElem);if(typeof V=="object"){if(V.action==="abort")return w="AbortError",T=C.file,$=C.inputElem,F=V.reason,void(p(a.error)&&a.error({name:w},T,$,F));if(V.action==="skip")return void d();typeof V.config=="object"&&(C.instanceConfig=b.extend(C.instanceConfig,V.config))}else if(V==="skip")return void d()}var I=C.instanceConfig.complete;C.instanceConfig.complete=function(de){p(I)&&I(de,C.file,C.inputElem),d()},v.parse(C.file,C.instanceConfig)}else p(a.complete)&&a.complete()}function d(){u.splice(0,1),h()}}}function _(a){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(r){var u=D(r);u.chunkSize=parseInt(u.chunkSize),r.step||r.chunk||(u.chunkSize=null),this._handle=new N(u),(this._handle.streamer=this)._config=u}).call(this,a),this.parseChunk=function(r,u){if(this.isFirstChunk&&p(this._config.beforeFirstChunk)){var h=this._config.beforeFirstChunk(r);h!==void 0&&(r=h)}this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+r;this._partialLine="";var w=this._handle.parse(d,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var T=w.meta.cursor;this._finished||(this._partialLine=d.substring(T-this._baseIndex),this._baseIndex=T),w&&w.data&&(this._rowCount+=w.data.length);var $=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)n.postMessage({results:w,workerId:v.WORKER_ID,finished:$});else if(p(this._config.chunk)&&!u){if(this._config.chunk(w,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);w=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(w.data),this._completeResults.errors=this._completeResults.errors.concat(w.errors),this._completeResults.meta=w.meta),this._completed||!$||!p(this._config.complete)||w&&w.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),$||w&&w.meta.paused||this._nextChunk(),w}this._halted=!0},this._sendError=function(r){p(this._config.error)?this._config.error(r):i&&this._config.error&&n.postMessage({workerId:v.WORKER_ID,error:r,finished:!1})}}function g(a){var r;(a=a||{}).chunkSize||(a.chunkSize=v.RemoteChunkSize),_.call(this,a),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),s||(r.onload=f(this._chunkLoaded,this),r.onerror=f(this._chunkError,this)),r.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var u=this._config.downloadRequestHeaders;for(var h in u)r.setRequestHeader(h,u[h])}if(this._config.chunkSize){var d=this._start+this._config.chunkSize-1;r.setRequestHeader("Range","bytes="+this._start+"-"+d)}try{r.send(this._config.downloadRequestBody)}catch(w){this._chunkError(w.message)}s&&r.status===0&&this._chunkError()}},this._chunkLoaded=function(){r.readyState===4&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:r.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(u){var h=u.getResponseHeader("Content-Range");return h===null?-1:parseInt(h.substring(h.lastIndexOf("/")+1))}(r),this.parseChunk(r.responseText)))},this._chunkError=function(u){var h=r.statusText||u;this._sendError(new Error(h))}}function y(a){var r,u;(a=a||{}).chunkSize||(a.chunkSize=v.LocalChunkSize),_.call(this,a);var h=typeof FileReader<"u";this.stream=function(d){this._input=d,u=d.slice||d.webkitSlice||d.mozSlice,h?((r=new FileReader).onload=f(this._chunkLoaded,this),r.onerror=f(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var d=this._input;if(this._config.chunkSize){var w=Math.min(this._start+this._config.chunkSize,this._input.size);d=u.call(d,this._start,w)}var T=r.readAsText(d,this._config.encoding);h||this._chunkLoaded({target:{result:T}})},this._chunkLoaded=function(d){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(d.target.result)},this._chunkError=function(){this._sendError(r.error)}}function S(a){var r;_.call(this,a=a||{}),this.stream=function(u){return r=u,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var u,h=this._config.chunkSize;return h?(u=r.substring(0,h),r=r.substring(h)):(u=r,r=""),this._finished=!r,this.parseChunk(u)}}}function L(a){_.call(this,a=a||{});var r=[],u=!0,h=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(d){this._input=d,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){h&&r.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),r.length?this.parseChunk(r.shift()):u=!0},this._streamData=f(function(d){try{r.push(typeof d=="string"?d:d.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(r.shift()))}catch(w){this._streamError(w)}},this),this._streamError=f(function(d){this._streamCleanUp(),this._sendError(d)},this),this._streamEnd=f(function(){this._streamCleanUp(),h=!0,this._streamData("")},this),this._streamCleanUp=f(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function N(a){var r,u,h,d=Math.pow(2,53),w=-d,T=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,C=0,V=0,I=!1,de=!1,Z=[],k={data:[],errors:[],meta:{}};if(p(a.step)){var M=a.step;a.step=function(O){if(k=O,re())K();else{if(K(),k.data.length===0)return;C+=O.data.length,a.preview&&C>a.preview?u.abort():(k.data=k.data[0],M(k,F))}}}function X(O){return a.skipEmptyLines==="greedy"?O.join("").trim()==="":O.length===1&&O[0].length===0}function K(){return k&&h&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),h=!1),a.skipEmptyLines&&(k.data=k.data.filter(function(O){return!X(O)})),re()&&function(){if(!k)return;function O(ee,ie){p(a.transformHeader)&&(ee=a.transformHeader(ee,ie)),Z.push(ee)}if(Array.isArray(k.data[0])){for(var A=0;re()&&A<k.data.length;A++)k.data[A].forEach(O);k.data.splice(0,1)}else k.data.forEach(O)}(),function(){if(!k||!a.header&&!a.dynamicTyping&&!a.transform)return k;function O(ee,ie){var H,me=a.header?{}:[];for(H=0;H<ee.length;H++){var ne=H,Q=ee[H];a.header&&(ne=H>=Z.length?"__parsed_extra":Z[H]),a.transform&&(Q=a.transform(Q,ne)),Q=le(ne,Q),ne==="__parsed_extra"?(me[ne]=me[ne]||[],me[ne].push(Q)):me[ne]=Q}return a.header&&(H>Z.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+Z.length+" fields but parsed "+H,V+ie):H<Z.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+Z.length+" fields but parsed "+H,V+ie)),me}var A=1;return!k.data.length||Array.isArray(k.data[0])?(k.data=k.data.map(O),A=k.data.length):k.data=O(k.data,0),a.header&&k.meta&&(k.meta.fields=Z),V+=A,k}()}function re(){return a.header&&Z.length===0}function le(O,A){return ee=O,a.dynamicTypingFunction&&a.dynamicTyping[ee]===void 0&&(a.dynamicTyping[ee]=a.dynamicTypingFunction(ee)),(a.dynamicTyping[ee]||a.dynamicTyping)===!0?A==="true"||A==="TRUE"||A!=="false"&&A!=="FALSE"&&(function(ie){if(T.test(ie)){var H=parseFloat(ie);if(w<H&&H<d)return!0}return!1}(A)?parseFloat(A):$.test(A)?new Date(A):A===""?null:A):A;var ee}function ue(O,A,ee,ie){var H={type:O,code:A,message:ee};ie!==void 0&&(H.row=ie),k.errors.push(H)}this.parse=function(O,A,ee){var ie=a.quoteChar||'"';if(a.newline||(a.newline=function(ne,Q){ne=ne.substring(0,1048576);var be=new RegExp(B(Q)+"([^]*?)"+B(Q),"gm"),ve=(ne=ne.replace(be,"")).split("\r"),xe=ne.split(`
`),Te=1<xe.length&&xe[0].length<ve[0].length;if(ve.length===1||Te)return`
`;for(var _e=0,te=0;te<ve.length;te++)ve[te][0]===`
`&&_e++;return _e>=ve.length/2?`\r
`:"\r"}(O,ie)),h=!1,a.delimiter)p(a.delimiter)&&(a.delimiter=a.delimiter(O),k.meta.delimiter=a.delimiter);else{var H=function(ne,Q,be,ve,xe){var Te,_e,te,se;xe=xe||[",","	","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var De=0;De<xe.length;De++){var Y=xe[De],Ue=0,Le=0,Fe=0;te=void 0;for(var Ie=new W({comments:ve,delimiter:Y,newline:Q,preview:10}).parse(ne),Ee=0;Ee<Ie.data.length;Ee++)if(be&&X(Ie.data[Ee]))Fe++;else{var $e=Ie.data[Ee].length;Le+=$e,te!==void 0?0<$e&&(Ue+=Math.abs($e-te),te=$e):te=$e}0<Ie.data.length&&(Le/=Ie.data.length-Fe),(_e===void 0||Ue<=_e)&&(se===void 0||se<Le)&&1.99<Le&&(_e=Ue,Te=Y,se=Le)}return{successful:!!(a.delimiter=Te),bestDelimiter:Te}}(O,a.newline,a.skipEmptyLines,a.comments,a.delimitersToGuess);H.successful?a.delimiter=H.bestDelimiter:(h=!0,a.delimiter=v.DefaultDelimiter),k.meta.delimiter=a.delimiter}var me=D(a);return a.preview&&a.header&&me.preview++,r=O,u=new W(me),k=u.parse(r,A,ee),K(),I?{meta:{paused:!0}}:k||{meta:{paused:!1}}},this.paused=function(){return I},this.pause=function(){I=!0,u.abort(),r=p(a.chunk)?"":r.substring(u.getCharIndex())},this.resume=function(){F.streamer._halted?(I=!1,F.streamer.parseChunk(r,!0)):setTimeout(F.resume,3)},this.aborted=function(){return de},this.abort=function(){de=!0,u.abort(),k.meta.aborted=!0,p(a.complete)&&a.complete(k),r=""}}function B(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function W(a){var r,u=(a=a||{}).delimiter,h=a.newline,d=a.comments,w=a.step,T=a.preview,$=a.fastMode,F=r=a.quoteChar===void 0||a.quoteChar===null?'"':a.quoteChar;if(a.escapeChar!==void 0&&(F=a.escapeChar),(typeof u!="string"||-1<v.BAD_DELIMITERS.indexOf(u))&&(u=","),d===u)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<v.BAD_DELIMITERS.indexOf(d))&&(d=!1),h!==`
`&&h!=="\r"&&h!==`\r
`&&(h=`
`);var C=0,V=!1;this.parse=function(I,de,Z){if(typeof I!="string")throw new Error("Input must be a string");var k=I.length,M=u.length,X=h.length,K=d.length,re=p(w),le=[],ue=[],O=[],A=C=0;if(!I)return ge();if(a.header&&!de){var ee=I.split(h)[0].split(u),ie=[],H={},me=!1;for(var ne in ee){var Q=ee[ne];p(a.transformHeader)&&(Q=a.transformHeader(Q,ne));var be=Q,ve=H[Q]||0;for(0<ve&&(me=!0,be=Q+"_"+ve),H[Q]=ve+1;ie.includes(be);)be=be+"_"+ve;ie.push(be)}if(me){var xe=I.split(h);xe[0]=ie.join(u),I=xe.join(h)}}if($||$!==!1&&I.indexOf(r)===-1){for(var Te=I.split(h),_e=0;_e<Te.length;_e++){if(O=Te[_e],C+=O.length,_e!==Te.length-1)C+=h.length;else if(Z)return ge();if(!d||O.substring(0,K)!==d){if(re){if(le=[],Fe(O.split(u)),qe(),V)return ge()}else Fe(O.split(u));if(T&&T<=_e)return le=le.slice(0,T),ge(!0)}}return ge()}for(var te=I.indexOf(u,C),se=I.indexOf(h,C),De=new RegExp(B(F)+B(r),"g"),Y=I.indexOf(r,C);;)if(I[C]!==r)if(d&&O.length===0&&I.substring(C,C+K)===d){if(se===-1)return ge();C=se+X,se=I.indexOf(h,C),te=I.indexOf(u,C)}else if(te!==-1&&(te<se||se===-1))O.push(I.substring(C,te)),C=te+M,te=I.indexOf(u,C);else{if(se===-1)break;if(O.push(I.substring(C,se)),$e(se+X),re&&(qe(),V))return ge();if(T&&le.length>=T)return ge(!0)}else for(Y=C,C++;;){if((Y=I.indexOf(r,Y+1))===-1)return Z||ue.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:le.length,index:C}),Ee();if(Y===k-1)return Ee(I.substring(C,Y).replace(De,r));if(r!==F||I[Y+1]!==F){if(r===F||Y===0||I[Y-1]!==F){te!==-1&&te<Y+1&&(te=I.indexOf(u,Y+1)),se!==-1&&se<Y+1&&(se=I.indexOf(h,Y+1));var Ue=Ie(se===-1?te:Math.min(te,se));if(I.substr(Y+1+Ue,M)===u){O.push(I.substring(C,Y).replace(De,r)),I[C=Y+1+Ue+M]!==r&&(Y=I.indexOf(r,C)),te=I.indexOf(u,C),se=I.indexOf(h,C);break}var Le=Ie(se);if(I.substring(Y+1+Le,Y+1+Le+X)===h){if(O.push(I.substring(C,Y).replace(De,r)),$e(Y+1+Le+X),te=I.indexOf(u,C),Y=I.indexOf(r,C),re&&(qe(),V))return ge();if(T&&le.length>=T)return ge(!0);break}ue.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:le.length,index:C}),Y++}}else Y++}return Ee();function Fe(we){le.push(we),A=C}function Ie(we){var ut=0;if(we!==-1){var Ke=I.substring(Y+1,we);Ke&&Ke.trim()===""&&(ut=Ke.length)}return ut}function Ee(we){return Z||(we===void 0&&(we=I.substring(C)),O.push(we),C=k,Fe(O),re&&qe()),ge()}function $e(we){C=we,Fe(O),O=[],se=I.indexOf(h,C)}function ge(we){return{data:le,errors:ue,meta:{delimiter:u,linebreak:h,aborted:V,truncated:!!we,cursor:A+(de||0)}}}function qe(){w(ge()),le=[],ue=[]}},this.abort=function(){V=!0},this.getCharIndex=function(){return C}}function J(a){var r=a.data,u=c[r.workerId],h=!1;if(r.error)u.userError(r.error,r.file);else if(r.results&&r.results.data){var d={abort:function(){h=!0,oe(r.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(p(u.userStep)){for(var w=0;w<r.results.data.length&&(u.userStep({data:r.results.data[w],errors:r.results.errors,meta:r.results.meta},d),!h);w++);delete r.results}else p(u.userChunk)&&(u.userChunk(r.results,d,r.file),delete r.results)}r.finished&&!h&&oe(r.workerId,r.results)}function oe(a,r){var u=c[a];p(u.userComplete)&&u.userComplete(r),u.terminate(),delete c[a]}function U(){throw new Error("Not implemented.")}function D(a){if(typeof a!="object"||a===null)return a;var r=Array.isArray(a)?[]:{};for(var u in a)r[u]=D(a[u]);return r}function f(a,r){return function(){a.apply(r,arguments)}}function p(a){return typeof a=="function"}return i&&(n.onmessage=function(a){var r=a.data;if(v.WORKER_ID===void 0&&r&&(v.WORKER_ID=r.workerId),typeof r.input=="string")n.postMessage({workerId:v.WORKER_ID,results:v.parse(r.input,r.config),finished:!0});else if(n.File&&r.input instanceof File||r.input instanceof Object){var u=v.parse(r.input,r.config);u&&n.postMessage({workerId:v.WORKER_ID,results:u,finished:!0})}}),(g.prototype=Object.create(_.prototype)).constructor=g,(y.prototype=Object.create(_.prototype)).constructor=y,(S.prototype=Object.create(S.prototype)).constructor=S,(L.prototype=Object.create(_.prototype)).constructor=L,v})})(bt);var ua=bt.exports;const Me=xt(ua),da={class:"export-sms-file"},ca=R("span",null,"門號 (商務簡訊)",-1),ma={key:0,class:"ms-4 mt-2"},fa={class:"d-flex mt-2 align-items-center w-100"},ha={key:0,class:"hint"},pa={key:1,class:"error"},va=Ce({__name:"ExportSmsFile",props:{disabled:{type:Boolean}},setup(o){const e=o,t=Se(),n=q(!1),s=q([]),i=q([]),c=q(0),x=q(0),v=q(new Set),b=q([]),_=q(),g={text:"匯入 91 優惠券",value:"upload-file"},y=ye(()=>{const U=Array.from(t.userArgSet).map(D=>({text:D,value:D}));return U.push(g),U}),S=ye(()=>s.value.findIndex(U=>U===g.value)>=0);Ge(i,()=>{c.value=i.value.length,i.value.forEach(U=>L(U))});const L=U=>{Me.parse(U,{header:!0,skipEmptyLines:!0,encoding:"big5",transformHeader:(D,f)=>(console.log(`Header: ${f}`,D),D==="領取券號"?"couponCode":D==="是否領取"?"isRedeem":D),complete:D=>{if(D.errors.length>0){alert("Parse Error");return}const f=b.value.length;D.data.forEach(a=>{if(a.isRedeem.indexOf("否")===-1){console.log(`[ExportSmsFile] Coupon Code redeem: ${a.couponCode} -> ${a.isRedeem}`);return}if(v.value.has(a.couponCode)){console.log(`[ExportSmsFile] Coupon Code duplicated: ${a.couponCode}`);return}v.value.add(a.couponCode),b.value.push(a.couponCode)});const p=b.value.length;console.log(`[ExportSmsFile] read ${D.data.length} -> ${p-f} coupon Code`),c.value--,x.value++}})},N=ye(()=>c.value>0),B=()=>{n.value=!0},W=()=>{_.value=void 0;const U=[],D=Ae(new Date,"yyyyMMdd");let f=0,p=0;const a=t.smsGroupList,r=[],u=[];for(let $=0;$<a.length;$++){const F=a[$];console.log(`[ExportSmsFile] smsGroup: ${F.name}: ${F.smsSendInfoList.length}`),f+=F.smsSendInfoList.length;for(let C=0;C<F.smsSendInfoList.length;C++){const V=F.smsSendInfoList[C],I=J(V);p+=I.length,console.log(`[ExportSmsFile] smsGroup: ${F.name}: [${C+1}] ${I.length}`),u.push(I.length);const de=t.partition(I,5e3);for(let Z=0;Z<de.length;Z++){const k=de[Z],M=Me.unparse(k,{delimiter:"	"}),X=F.smsSendInfoList.length===1?"":`_${C+1}`,K=de.length===1?"":`_${Z+1}`,re=`${t.campaignName}_商務簡訊_${D}_${$+1}${X}${K}_${F.name}_${k.length}.txt`;U.push({fileName:re,data:M}),r.push({smsText:V.text,phoneNumberFileName:re,smsCount:k.length})}}}const h={};h.sendHour=kt.Hour18,h.sendMinute=Tt.Minute00,h.smsList=r;const d=`${t.campaignName}_商務簡訊_${D}_${a.length}受眾_${f}群_${p}.cfg`,w=JSON.stringify(h);U.push({fileName:d,data:w});const T=`${t.campaignName}_商務簡訊_${D}_${a.length}受眾_${f}群_${p}.zip`;t.downloadZip(T,U),console.log(`受眾表用
${u.join(`
`)}`)},J=U=>{const D=[],f=U.phoneNumberList;for(let p=0;p<f.length;p++){const a=f[p];if(a==="0979940180")continue;const r=t.phoneNumberUserMap.get(a);if(!r)continue;const u=[a];for(let h=0;h<y.value.length;h++){const d=y.value[h];if(s.value.findIndex(T=>T===d.value)>=0)if(d.value===g.value){const T=b.value[D.length];r.couponCode=T,u.push(T)}else r.params&&u.push(r.params[d.value])}D.push(u)}return D},oe=()=>{i.value=[],x.value=0,b.value.length=0,v.value.clear()};return(U,D)=>{const f=it,p=ae,a=Lt,r=ht,u=lt,h=Ze,d=et;return P(),j("div",da,[l(p,{variant:"outline-primary",size:"sm",onClick:B,disabled:e.disabled},{default:m(()=>[l(f),ca]),_:1},8,["disabled"]),l(d,{modelValue:n.value,"onUpdate:modelValue":D[2]||(D[2]=w=>n.value=w),"ok-title":"匯出","cancel-title":"取消","cancel-variant":"outline-secondary",onOk:W,title:"參數",class:"args-modal"},{default:m(()=>[l(a,{modelValue:s.value,"onUpdate:modelValue":D[0]||(D[0]=w=>s.value=w),options:y.value,stacked:""},null,8,["modelValue","options"]),S.value?(P(),j("div",ma,[R("div",fa,[l(r,{modelValue:i.value,"onUpdate:modelValue":D[1]||(D[1]=w=>i.value=w),id:"dsc-file",accept:"text/csv",multiple:""},null,8,["modelValue"]),v.value.size>0&&!N.value?(P(),he(p,{key:0,variant:"outline-primary",size:"sm",class:"remove ms-1",onClick:oe},{default:m(()=>[l(u)]),_:1})):pe("",!0),N.value?(P(),he(h,{key:1,variant:"primary",class:"ms-1"})):pe("",!0)]),x.value?(P(),j("small",ha,"已讀取 "+G(x.value)+" 檔案, "+G(v.value.size)+" 筆記錄",1)):pe("",!0)])):pe("",!0),_.value?(P(),j("p",pa,G(_.value),1)):pe("",!0)]),_:1},8,["modelValue"])])}}});const _a={class:"export-sms-file"},ga=R("span",null,"門號 (客服)",-1),wa=Ce({__name:"ExportCustomServiceFile",props:{disabled:{type:Boolean}},setup(o){const e=o,t=Se(),n=()=>{const s=Ae(new Date,"yyyyMMdd"),i=t.smsGroupList.filter(_=>_.smsPhoneNumberFilted.length>0),c=[];let x=0,v=0;for(let _=0;_<i.length;_++){const g=i[_];for(let y=0;y<g.smsSendInfoList.length;y++){v++;const S=g.smsSendInfoList[y],L=`用戶分群: ${g.name}\r
簡訊內容: ${S.text}\r
發送數量: ${S.phoneNumberList.length}\r
`,N=`${t.campaignName}_客服_${s}_${v}_發送資訊.txt`;c.push({fileName:N,data:L});const B=[];S.phoneNumberList.forEach(J=>B.push([J])),x+=S.phoneNumberList.length;const W=t.partition(B,5e4);for(let J=0;J<W.length;J++){const oe=W[J],U=Me.unparse(oe),D=W.length===1?"":`_${J+1}`,f=`${t.campaignName}_客服_${s}_${v}_門號${D}_${oe.length}.txt`;c.push({fileName:f,data:U})}}}const b=`${t.campaignName}_客服_${s}_${v}群_${x}人.zip`;t.downloadZip(b,c)};return(s,i)=>{const c=it,x=ae;return P(),j("div",_a,[l(x,{variant:"outline-primary",size:"sm",class:"mt-1",onClick:n,disabled:e.disabled},{default:m(()=>[l(c),ga]),_:1},8,["disabled"])])}}}),ya={key:0,class:"sms-send"},ba=R("h6",{class:"title"},"分群測試",-1),Ca={class:"section"},Sa=R("h6",{class:"title"},"簡訊內容",-1),xa={class:"sms-item section"},ka={class:"sms-header"},Ta=["for"],La={class:"count"},Ia={class:"sms-footer"},Ea=Ce({__name:"SmsSendModal",props:{smsGroup:{}},setup(o){const e=It(),t=Se(),n=o,s=q(!1),i=q(1),c=q(["","",""]),x=S=>{const L=n.smsGroup.smsPhoneNumberFilted;if(L.length===0)return[];const N=Math.ceil(L.length/i.value);return t.partition(L,N)[S]},v=()=>{i.value=Math.max(n.smsGroup.smsSendInfoList.length,1),c.value.length=0,n.smsGroup.smsSendInfoList.forEach(S=>{c.value.push(S.text)}),s.value=!0},b=()=>{if(!n.smsGroup)return;const S=c.value.splice(0,i.value);t.fillSmsSendInfo(n.smsGroup,S),e.setSmsText(n.smsGroup.name,S)},_=S=>S?S.length:0,g=S=>{const L=_(c.value[S]);return L===0?null:L<=70},y=(S,L)=>{if(L.phoneNumber){const N=t.sms(c.value[S],L.phoneNumber);console.log(`[SmsSend] URL: ${N}`),window.open(N,"_blank")}};return(S,L)=>{const N=ae,B=$t,W=Ot,J=Mt,oe=Dt,U=Ft,D=et;return n.smsGroup?(P(),j("div",ya,[l(N,{variant:"outline-primary",size:"sm",onClick:v,disabled:n.smsGroup.smsPhoneNumberFilted.length===0},{default:m(()=>[R("span",null,"編輯 ("+G(n.smsGroup.smsSendInfoList.length)+")",1)]),_:1},8,["disabled"]),l(D,{modelValue:s.value,"onUpdate:modelValue":L[1]||(L[1]=f=>s.value=f),"ok-title":"確定","cancel-title":"取消","cancel-variant":"outline-secondary",onOk:b,class:"sms-send-modal"},{default:m(()=>[R("section",null,[ba,R("div",Ca,[l(W,{modelValue:i.value,"onUpdate:modelValue":L[0]||(L[0]=f=>i.value=f),name:"sms-test-group"},{default:m(()=>[l(B,{value:1},{default:m(()=>[E("不測試")]),_:1}),l(B,{value:2},{default:m(()=>[E("分兩群測試")]),_:1}),l(B,{value:3},{default:m(()=>[E("分三群測試")]),_:1})]),_:1},8,["modelValue"])])]),R("section",null,[Sa,(P(!0),j(ze,null,Ye(i.value,f=>(P(),j("div",xa,[R("div",ka,[R("label",{for:`sms-text-${f}`},"簡訊 "+G(f),9,Ta),R("span",La,G(x(f-1).length)+" 人",1)]),l(J,{type:"text",size:"sm",id:`sms-text-${f}`,rows:"3",state:g(f-1),placeholder:"簡訊文案",modelValue:c.value[f-1],"onUpdate:modelValue":p=>c.value[f-1]=p},null,8,["id","state","modelValue","onUpdate:modelValue"]),R("div",Ia,[l(U,{right:"",variant:"outline-primary",size:"sm",text:"測試"},{default:m(()=>[(P(!0),j(ze,null,Ye(ce(t).userInfoListTest,p=>(P(),he(oe,{onClick:a=>y(f-1,p),key:p.twmId},{default:m(()=>[E(G(p.params.name),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024),R("span",{class:Et(["sms-text",{warn:_(c.value[f-1])>70}])},G(_(c.value[f-1]))+" 個字 ",3)])]))),256))])]),_:1},8,["modelValue"])])):pe("",!0)}}});const $a={key:0,class:"ta-group-list-modal"},Oa={class:"summary"},Ve=100,Ct=Ce({__name:"TaGroupListModal",props:{twmIdList:{}},setup(o){const e=Se(),t=o,n=q(!1),s=q(1),i=()=>{n.value=!0},c=ye(()=>{const g=(s.value-1)*Ve,y=t.twmIdList.slice(g,g+Ve),S=[];return y.forEach(L=>{const N=e.twmIdUserMap.get(L);N&&S.push(N)}),S}),x=g=>Ve*(s.value-1)+g+1,v=ye(()=>{const g=[];return t.twmIdList.forEach(y=>{const S=e.twmIdUserMap.get(y);S&&g.push(S)}),g}),b=ye(()=>v.value.filter(g=>!!g.phoneNumber).length),_=ye(()=>v.value.filter(g=>!!g.couponCode).length);return(g,y)=>{const S=ae,L=tt,N=nt,B=at,W=rt,J=st,oe=ot,U=Nt,D=et;return t.twmIdList?(P(),j("div",$a,[l(S,{variant:"link",onClick:i},{default:m(()=>[E(G(t.twmIdList.length),1)]),_:1}),l(D,{modelValue:n.value,"onUpdate:modelValue":y[1]||(y[1]=f=>n.value=f),scrollable:"",size:"lg",title:`${t.twmIdList.length}`,class:"ta-list-modal"},{default:m(()=>[R("div",Oa,[E(" 總數："),R("span",null,G(t.twmIdList.length)+"，有門號："+G(b.value)+"("+G(b.value-t.twmIdList.length)+")，有優惠券："+G(_.value)+"("+G(_.value-t.twmIdList.length)+")",1)]),l(oe,{hover:"",small:"",bordered:""},{default:m(()=>[l(B,null,{default:m(()=>[l(N,null,{default:m(()=>[l(L,{class:"text-center align-middle"},{default:m(()=>[E("No")]),_:1}),l(L,{class:"text-center align-middle"},{default:m(()=>[E("台灣大會員編號")]),_:1}),l(L,{class:"text-center align-middle"},{default:m(()=>[E("SubId")]),_:1}),l(L,{class:"text-center align-middle"},{default:m(()=>[E("門號")]),_:1}),l(L,{class:"text-center align-middle"},{default:m(()=>[E("資費")]),_:1}),l(L,{class:"text-center align-middle"},{default:m(()=>[E("優惠券序號")]),_:1})]),_:1})]),_:1}),l(J,null,{default:m(()=>[(P(!0),j(ze,null,Ye(c.value,(f,p)=>(P(),he(N,{key:f.twmId},{default:m(()=>[l(W,{class:"text-center align-middle"},{default:m(()=>[E(G(x(p)),1)]),_:2},1024),l(W,{class:"text-center align-middle"},{default:m(()=>[E(G(f.twmId),1)]),_:2},1024),l(W,{class:"text-center align-middle"},{default:m(()=>[E(G(f.subId),1)]),_:2},1024),l(W,{class:"text-center align-middle"},{default:m(()=>[E(G(f.phoneNumber),1)]),_:2},1024),l(W,{class:"text-center align-middle"},{default:m(()=>[E(G(f.params["目前方案專案V+D+V資費"]),1)]),_:2},1024),l(W,{class:"text-center align-middle"},{default:m(()=>[E(G(f.couponCode),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(U,{modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=f=>s.value=f),size:"sm","total-rows":t.twmIdList.length,"per-page":Ve},null,8,["modelValue","total-rows"])]),_:1},8,["modelValue","title"])])):pe("",!0)}}});const Ma={class:"calc-button"},Da=Ce({__name:"CalcButton",setup(o){const e=Se(),t=()=>{e.refresh()};return(n,s)=>{const i=ae;return P(),j("div",Ma,[ce(e).needReCalc?(P(),he(i,{key:0,variant:"outline-success",size:"sm",onClick:t},{default:m(()=>[E("重新計算")]),_:1})):Pt(n.$slots,"default",{key:1})])}}}),Fa={class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Na=R("path",{fill:"currentColor",d:"m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2Z"},null,-1),Pa=[Na];function Ua(o,e){return P(),j("svg",Fa,[...Pa])}const Ra={name:"mdi-import",render:Ua},Ga={class:"import-sms-file"},Ba=R("span",null,"TwmId (MFO)",-1),Wa=Ce({__name:"ImportTwmIdFile",setup(o){const e=Se(),t=q([]),n=q(0),s=q(new Set);Ge(t,()=>{!t||t.value.length===0||(n.value=0,s.value.clear(),e.smsGroupList.forEach(x=>{x.smsTwmIdList.length=0}),t.value.forEach(x=>i(x)))}),Ge(n,()=>{n.value===t.value.length&&(e.smsGroupList.forEach(x=>{let v=0,b=0;x.twmIdList.forEach(_=>{s.value.has(_)?(x.smsTwmIdList.push(_),v++):b++}),console.log(`[ImportSmsFile] Group: ${x.name}, Exist: ${v}, NotExist: ${b}`)}),e.refreshFilted())});const i=x=>{const v=new FileReader;v.onload=function(b){var y;const _=(y=b.target)==null?void 0:y.result;(_==null?void 0:_.split(`\r
`)).forEach(S=>{s.value.add(S)}),console.log(`[ImportSmsFile] import ${s.value.size} TwmId`),n.value++},v.readAsText(x)},c=()=>{var x;(x=document.getElementById("import-twmid"))==null||x.click()};return(x,v)=>{const b=Ra,_=ae,g=ht;return P(),j("div",Ga,[l(_,{variant:"outline-primary",size:"sm",onClick:c},{default:m(()=>[l(b),Ba]),_:1}),l(g,{ref:"configFileRef",id:"import-twmid",modelValue:t.value,"onUpdate:modelValue":v[0]||(v[0]=y=>t.value=y),accept:"text/csv",multiple:""},null,8,["modelValue"])])}}});const Aa={class:"d-flex flex-column justify-content-end"},za=R("br",null,null,-1),Ya=R("br",null,null,-1),qa=R("span",{class:"hint"},"(商務簡訊)",-1),Va={class:"text-nowrap"},Ha={key:1},ja={class:"text-nowrap"},Qa={class:"d-flex flex-column"},Xa=R("span",null,"SubId (DSC)",-1),Ka=R("span",null,"TwmId (MFO)",-1),Ja={class:"d-flex flex-column"},Za=R("span",null,"SubId (DSC)",-1),er=R("span",null,"TwmId (MFO)",-1),tr=R("span",null,"TwmId (MFO)",-1),nr=R("span",null,"名單總表",-1),vr=Ce({__name:"SmsGroupList",setup(o){const e=Se(),t=q(!0),n=q(0),s=()=>{if(!e.smsGroupList)return t.value=!1,0;console.time("[SmsGroupList] TotalSubIdCount");const f=new Set;for(let p=0;p<e.smsGroupList.length;p++){const r=e.smsGroupList[p].twmIdList;for(let u=0;u<r.length;u++){const h=r[u];f.add(h)}}console.timeEnd("[SmsGroupList] TotalSubIdCount"),t.value=!1,n.value=f.size},i=ye(()=>{let f=0;return e.smsGroupList.forEach(p=>f+=p.smsTwmIdListFilted.length),f}),c=ye(()=>{let f=0;return e.smsGroupList.forEach(p=>f+=p.smsPhoneNumberFilted.length),f}),x=(f,p)=>{const a=f.smsReadyTwmIdList;if(p>=100)f.smsTwmIdList=a.slice(0);else{const r=new Set;f.smsTwmIdList.forEach(d=>r.add(d));const u=a.length*p/100,h=b(a).slice(0,u);h.forEach(d=>r.add(d)),f.smsTwmIdList=Array.from(r),console.log(`[GroupList] addSmsList: ${u}: ${h.length}`)}e.refreshFilted()},v=f=>{for(let p=0;p<e.smsGroupList.length;p++){const a=e.smsGroupList[p];x(a,f)}},b=f=>{const p=f.slice(0);for(let a=p.length-1;a>0;a--){let r=Math.floor(Math.random()*(a+1));[p[a],p[r]]=[p[r],p[a]]}return p},_=f=>{const p=e.smsGroupList.findIndex(r=>r.name===f.name);p>=0&&e.smsGroupList.splice(p,1);const a=new pt(f.name,f.twmIdList);e.groupList.push(a),e.refreshFilted(),t.value=!0},g=()=>{L(f=>f.twmIdList)},y=()=>{L(f=>f.smsTwmIdListFilted)},S=()=>{if(!e.smsGroupList)return;const f=[],p=new Set;for(let a=0;a<e.smsGroupList.length;a++){const u=e.smsGroupList[a].smsPhoneNumberFilted;for(let h=0;h<u.length;h++){const d=u[h],w=e.phoneNumberUserMap.get(d);if(!w)continue;const T=w.twmId;p.has(T)||(p.add(T),f.push([T]))}e.userInfoListTest.forEach(h=>{const d=h.twmId;p.has(d)||(p.add(d),f.push([d]))})}N(f)},L=f=>{if(!e.smsGroupList)return;const p=[],a=new Set;for(let r=0;r<e.smsGroupList.length;r++){const u=e.smsGroupList[r],h=f(u).slice(0);e.userInfoListTest.forEach(d=>h.push(d.twmId));for(let d=0;d<h.length;d++){const w=h[d];a.has(w)||(a.add(w),p.push([w]))}}N(p)},N=f=>{const p=Ae(new Date,"yyyyMMdd"),a=[],r=e.partition(f,2e4);for(let h=0;h<r.length;h++){const d=r[h],w=`${e.campaignName}_MFO_白名單_${p}_${r.length}-${h+1}_${d.length}.csv`,T=Me.unparse(d);a.push({fileName:w,data:T})}const u=`${e.campaignName}_MFO_白名單_${p}_${r.length}_${f.length}.zip`;e.downloadZip(u,a)},B=()=>{J(f=>f.twmIdList)},W=()=>{J(f=>f.smsTwmIdListFilted)},J=f=>{if(!e.smsGroupList)return;const p=[],a=new Set;for(let u=0;u<e.smsGroupList.length;u++){const h=e.smsGroupList[u],d=f(h);for(let w=0;w<d.length;w++){const T=d[w],$=e.twmIdUserMap.get(T);!$||!$.subId||$.phoneNumber&&$.phoneNumber.length>0||a.has($.subId)||(a.add($.subId),p.push({SUBSCR_ID:$.subId}))}}console.log(`[SmsGroupList] export ${p.length} subId`);const r=e.partition(p,2e5);for(let u=0;u<r.length;u++){const h=r[u],d=Ae(new Date,"yyyyMMdd"),w=`${e.campaignName}_DSC_SubId_${d}_${r.length}-${u+1}_${h.length}.csv`,T=Me.unparse(h);e.downloadFile(T,w)}},oe=()=>{if(!e.smsGroupList)return;const f=[];for(let u=0;u<e.smsGroupList.length;u++){const h=e.smsGroupList[u],d=h.smsPhoneNumberFilted;for(let w=0;w<d.length;w++){const T=d[w],$=e.phoneNumberUserMap.get(T);$&&f.push({Sms:h.name,TwmId:$.twmId,SubId:$.subId,門號:$.phoneNumber,優惠券:$.couponCode})}}console.log(`[SmsGroupList] export ${f.length} All Sms CSV`);const p=Ae(new Date,"yyyyMMdd"),a=`${e.campaignName}_發送名單資訊_${p}_${f.length}.csv`,r=Me.unparse(f);e.downloadFile(r,a)},U=f=>f.smsReadyTwmIdList.length<=f.smsTwmIdList.length,D=()=>{for(let f=0;f<e.smsGroupList.length;f++){const p=e.smsGroupList[f];if(!U(p))return!1}return!0};return(f,p)=>{const a=tt,r=Wa,u=nt,h=at,d=rt,w=Da,T=Ct,$=Ea,F=st,C=it,V=wa,I=va,de=vt,Z=ot,k=Rt;return P(),j("div",Aa,[l(Z,{hover:"",small:"",bordered:""},{default:m(()=>[l(h,{"head-variant":"dark"},{default:m(()=>[l(u,null,{default:m(()=>[l(a,{class:"text-center align-middle"},{default:m(()=>[E("刪除")]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("分群")]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("原數量")]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("已發送數")]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("可發送數")]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("發送")]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("欲發送數")]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E(" 發送數"),za,l(r)]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("門號數"),Ya,qa]),_:1}),l(a,{class:"text-center align-middle"},{default:m(()=>[E("簡訊內容")]),_:1})]),_:1})]),_:1}),l(F,null,{default:m(()=>[(P(!0),j(ze,null,Ye(ce(e).smsGroupList,M=>(P(),he(u,{key:M.name},{default:m(()=>[l(d,{class:"text-center align-middle"},{default:m(()=>[l(ce(ae),{variant:"outline-danger",size:"sm",onClick:X=>_(M)},{default:m(()=>[E(" 刪除 ")]),_:2},1032,["onClick"])]),_:2},1024),l(a,{class:"align-middle"},{default:m(()=>[E(G(M.name),1)]),_:2},1024),l(d,{class:"text-end align-middle"},{default:m(()=>{var X;return[E(G((X=M.twmIdList)==null?void 0:X.length),1)]}),_:2},1024),l(d,{class:"text-end align-middle"},{default:m(()=>[l(w,null,{default:m(()=>[E(G(M.sentCount),1)]),_:2},1024)]),_:2},1024),l(d,{class:"text-end align-middle"},{default:m(()=>[l(w,null,{default:m(()=>[l(T,{"twm-id-list":M.smsReadyTwmIdList},null,8,["twm-id-list"])]),_:2},1024)]),_:2},1024),l(d,{class:"text-center align-middle"},{default:m(()=>[R("div",Va,[l(ce(ae),{variant:"outline-primary",size:"sm",onClick:X=>x(M,10),disabled:U(M)},{default:m(()=>[E("+10%")]),_:2},1032,["onClick","disabled"]),l(ce(ae),{variant:"outline-primary",size:"sm",onClick:X=>x(M,100),class:"ms-1",disabled:U(M)},{default:m(()=>[E("All")]),_:2},1032,["onClick","disabled"])])]),_:2},1024),l(d,{class:"text-end align-middle"},{default:m(()=>[l(T,{"twm-id-list":M.smsTwmIdList},null,8,["twm-id-list"])]),_:2},1024),l(d,{class:"text-end align-middle"},{default:m(()=>[l(w,null,{default:m(()=>[l(T,{"twm-id-list":M.smsTwmIdListFilted},null,8,["twm-id-list"])]),_:2},1024)]),_:2},1024),l(d,{class:"text-end align-middle"},{default:m(()=>[l(w,null,{default:m(()=>[E(G(M.smsPhoneNumberFilted.length),1)]),_:2},1024)]),_:2},1024),l(d,{class:"text-center align-middle"},{default:m(()=>[l($,{"sms-group":M},null,8,["sms-group"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(de,null,{default:m(()=>[l(u,null,{default:m(()=>[l(d),l(d,null,{default:m(()=>[E("共 "+G(ce(e).smsGroupList.length)+" 群",1)]),_:1}),l(d,{class:"text-end"},{default:m(()=>[t.value?(P(),he(ce(ae),{key:0,variant:"outline-success",size:"sm",onClick:s},{default:m(()=>[E("重新計算")]),_:1})):(P(),j("span",Ha,G(n.value),1))]),_:1}),l(d),l(d),l(d,null,{default:m(()=>[R("div",ja,[l(ce(ae),{variant:"outline-primary",size:"sm",onClick:p[0]||(p[0]=M=>v(10)),disabled:D()},{default:m(()=>[E("+10%")]),_:1},8,["disabled"]),l(ce(ae),{variant:"outline-primary",size:"sm",onClick:p[1]||(p[1]=M=>v(100)),class:"ms-1",disabled:D()},{default:m(()=>[E("All")]),_:1},8,["disabled"])])]),_:1}),l(d),l(d,{class:"text-end"},{default:m(()=>[E(G(i.value),1)]),_:1}),l(d,{class:"text-end"},{default:m(()=>[E(G(c.value),1)]),_:1}),l(d)]),_:1}),l(u,null,{default:m(()=>[l(d),l(d),l(d,{class:"text-center"},{default:m(()=>[R("div",Qa,[l(ce(ae),{variant:"outline-primary",size:"sm",onClick:B},{default:m(()=>[l(C),Xa]),_:1}),l(ce(ae),{variant:"outline-primary",size:"sm",onClick:g,class:"mt-1"},{default:m(()=>[l(C),Ka]),_:1})])]),_:1}),l(d),l(d),l(d),l(d),l(d,{class:"text-center"},{default:m(()=>[R("div",Ja,[Ut((P(),he(ce(ae),{variant:"outline-primary",size:"sm",onClick:W,disabled:i.value<=0},{default:m(()=>[l(C),Za]),_:1},8,["disabled"])),[[k,`匯出 ${i.value-c.value} 筆沒有電話號碼的 SubID (DSC 用)`,void 0,{hover:!0,top:!0}]]),l(ce(ae),{variant:"outline-primary",size:"sm",class:"mt-1",onClick:y,disabled:i.value<=0},{default:m(()=>[l(C),er]),_:1},8,["disabled"])])]),_:1}),l(d,{class:"text-center align-middle"},{default:m(()=>[l(ce(ae),{variant:"outline-primary",size:"sm",onClick:S,disabled:i.value<=0},{default:m(()=>[l(C),tr]),_:1},8,["disabled"])]),_:1}),l(d,{class:"text-center align-middle"},{default:m(()=>[l(V,{disabled:c.value<=0},null,8,["disabled"]),l(I,{class:"mt-1",disabled:c.value<=0},null,8,["disabled"])]),_:1})]),_:1}),l(u,null,{default:m(()=>[l(d),l(d),l(d),l(d),l(d),l(d),l(d),l(d,{colspan:"2",class:"text-center align-middle"},{default:m(()=>[l(ce(ae),{variant:"outline-primary",size:"sm",class:"mt-1",onClick:oe,disabled:i.value<=0},{default:m(()=>[l(C),nr]),_:1},8,["disabled"])]),_:1}),l(d)]),_:1})]),_:1})]),_:1})])}}});const ar={key:1},_r=Ce({__name:"TaGroupList",setup(o){const e=Se(),t=q(!0),n=q(0),s=ye(()=>e.groupList?e.groupList.sort((b,_)=>b.name.localeCompare(_.name)):[]),i=()=>{if(!e.groupList)return t.value=!1,0;console.time("[TaGroupList] TotalSubIdCount");const b=new Set;for(let _=0;_<e.groupList.length;_++){const y=e.groupList[_].twmIdList;for(let S=0;S<y.length;S++){const L=y[S];b.add(L)}}console.timeEnd("[TaGroupList] TotalSubIdCount"),n.value=b.size,t.value=!1},c=b=>{const _=e.groupList.findIndex(y=>y.name===b.name);_>=0&&e.groupList.splice(_,1);const g=new Gt(b.name,b.twmIdList);e.smsGroupList.push(g),e.refreshFilted()},x=()=>{[...e.groupList].forEach(_=>c(_))},v=async()=>{const[b]=await window.showOpenFilePicker({multiple:!1,types:[{accept:{"text/csv":[".csv"]}}]}),_=await b.getFile(),g=await _.text();Me.parse(g,{header:!1,skipEmptyLines:!0,complete:y=>{if(y.errors.length>0){alert("Parse Error");return}console.log(`[TaGroupList] add ${y.data.length} Users begin`);const S=[];for(let N=0;N<y.data.length;N++){const B=y.data[N],W=e.phoneNumberUserMap.get(B[2]);W&&S.push(W.twmId)}console.log(`[TaGroupList] add ${y.data.length} Users Complete`);const L=new pt(_.name,S);e.groupList.push(L),console.log(`[TaGroupList] complete ${e.groupList.length} TaGroup`)}})};return(b,_)=>{const g=tt,y=nt,S=at,L=Ct,N=rt,B=ae,W=st,J=vt,oe=ot;return P(),j("div",null,[l(oe,{hover:"",small:"",bordered:""},{default:m(()=>[l(S,{"head-variant":"dark"},{default:m(()=>[l(y,null,{default:m(()=>[l(g,{class:"text-center align-middle"},{default:m(()=>[E("分群")]),_:1}),l(g,{class:"text-center align-middle"},{default:m(()=>[E("數量")]),_:1}),l(g,{class:"text-center align-middle"},{default:m(()=>[E("加入發送")]),_:1})]),_:1})]),_:1}),l(W,null,{default:m(()=>[(P(!0),j(ze,null,Ye(s.value,U=>(P(),he(y,{key:U.name},{default:m(()=>[l(g,{class:"align-middle"},{default:m(()=>[E(G(U.name),1)]),_:2},1024),l(N,{class:"text-center align-middle"},{default:m(()=>[l(L,{"twm-id-list":U.twmIdList},null,8,["twm-id-list"])]),_:2},1024),l(g,{class:"text-center"},{default:m(()=>[l(B,{variant:"outline-primary",size:"sm",onClick:D=>c(U)},{default:m(()=>[E("加入")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(J,null,{default:m(()=>[l(y,null,{default:m(()=>[l(N,null,{default:m(()=>[E("共 "+G(s.value.length)+" 群",1)]),_:1}),l(N,{class:"text-center"},{default:m(()=>[t.value?(P(),he(B,{key:0,variant:"outline-success",size:"sm",onClick:i},{default:m(()=>[E("重新計算")]),_:1})):(P(),j("span",ar,G(n.value),1))]),_:1}),l(N,{class:"text-center"},{default:m(()=>[l(B,{variant:"outline-primary",size:"sm",onClick:_[0]||(_[0]=U=>x())},{default:m(()=>[E("加入")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(B,{variant:"outline-primary",size:"sm",onClick:v},{default:m(()=>[E("匯入 91App 受眾")]),_:1})])}}}),rr={class:"sms-file-wrapper"},sr=R("label",{for:"sms-file"},"已發送簡訊 (多選)",-1),or={class:"d-flex mt-2 align-items-center w-100"},ir={key:0,class:"hint"},gr=Ce({__name:"ImportSmsSent",setup(o){const e=Se(),t=q(0),n=q(0),s=q(0);Ge(t,(b,_)=>{b===0&&_>0&&e.refreshFilted()});const i=ye(()=>t.value>0),c=async()=>{const b=await window.showOpenFilePicker({id:"marketing-import-sms-sent",multiple:!0,types:[{accept:{"text/plain":[".txt"]}}]});t.value=b.length,b.forEach(async _=>{const y=await(await _.getFile()).text();x(y)})},x=b=>{const _=b==null?void 0:b.split(`
`),g=e.phoneNumberSentSet.size;s.value+=_.length,_.forEach(S=>{const N=S.split("	")[0];e.phoneNumberSentSet.add(N)});const y=e.phoneNumberSentSet.size;console.log(`[SmsFile] load ${y-g} Sent Phone Numbers, Total: ${e.phoneNumberSentSet.size}`),t.value--,n.value++},v=()=>{n.value=0,s.value=0,e.phoneNumberSentSet.clear(),e.refreshFilted()};return(b,_)=>{const g=ae,y=lt,S=Ze;return P(),j("div",rr,[sr,R("div",or,[l(g,{variant:"outline-primary",size:"sm",onClick:c},{default:m(()=>[E("匯入")]),_:1}),s.value>0&&!i.value?(P(),he(g,{key:0,variant:"outline-primary",size:"sm",class:"remove ms-1",onClick:v},{default:m(()=>[l(y)]),_:1})):pe("",!0),i.value?(P(),he(S,{key:1,variant:"primary",class:"ms-1"})):pe("",!0)]),n.value>0?(P(),j("small",ir," 已讀取 "+G(n.value)+" 檔案, "+G(s.value)+" 筆記錄, 重複 "+G(s.value-ce(e).phoneNumberSentSet.size)+" 門號 ",1)):pe("",!0)])}}});const lr={class:"import-dsc-wrapper"},ur=R("label",{for:"dsc-file"},"門號 (DSC 轉出 csv)",-1),dr={class:"d-flex mt-2 align-items-center w-100"},cr={key:0,class:"hint"},wr=Ce({__name:"ImportDSC",setup(o){const e=Se(),t=q(0),n=q(0),s=q(0);_t(async()=>{}),Ge(t,(_,g)=>{_===0&&g>0&&e.refreshFilted()});const i=ye(()=>t.value>0),c=async()=>{const _=await window.showOpenFilePicker({id:"marketing-import-dsc",multiple:!0,types:[{accept:{"text/csv":[".csv"]}}]});t.value=_.length,_.forEach(async g=>{const S=await(await g.getFile()).arrayBuffer(),L=Wt.decode(At.Buffer.from(S),"big5");x(L)})},x=_=>{Me.parse(_,{header:!0,skipEmptyLines:!0,transformHeader:(g,y)=>(console.log(`Header: ${y}`,g),g==="門號"?"phoneNumber":g==="SUBSCR_ID"?"subId":g),complete:g=>{if(g.errors.length>0){alert("Parse Error"),t.value--,n.value++;return}const y=g.data;v(y),t.value--,n.value++}})},v=_=>{s.value+=_.length,_.forEach(g=>{const y=e.subIdUserMap.get(g.subId);y&&(y.phoneNumber=g.phoneNumber,e.phoneNumberUserMap.set(g.phoneNumber,y))}),console.log(`[PhoneNumberFile] read ${_.length} subid <> phone number`)},b=()=>{n.value=0,s.value=0,e.phoneNumberUserMap.clear(),e.refreshFilted()};return(_,g)=>{const y=ae,S=lt,L=Ze;return P(),j("div",lr,[ur,R("div",dr,[l(y,{variant:"outline-primary",size:"sm",onClick:c},{default:m(()=>[E("匯入")]),_:1}),s.value>0&&!i.value?(P(),he(y,{key:0,variant:"outline-primary",size:"sm",class:"remove ms-1",onClick:b},{default:m(()=>[l(S)]),_:1})):pe("",!0),i.value?(P(),he(L,{key:1,variant:"primary",class:"ms-1"})):pe("",!0)]),n.value?(P(),j("small",cr,"已讀取 "+G(n.value)+" 檔案, "+G(s.value)+" 筆記錄",1)):pe("",!0)])}}});const mr={class:"title-wrapper"},fr=R("label",{for:"compaign-name"},"活動名稱",-1),yr=Ce({__name:"CampaignName",setup(o){const e=Se(),t=q("");return _t(()=>{const n=localStorage.getItem("campaign-name");n&&(t.value=n)}),Ge(t,n=>{localStorage.setItem("campaign-name",n),e.campaignName=n}),(n,s)=>{const i=Bt;return P(),j("div",mr,[fr,l(i,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=c=>t.value=c),type:"text",id:"compaign-name",class:"ms-2"},null,8,["modelValue"])])}}});export{Me as P,Ra as _,yr as a,wr as b,gr as c,_r as d,vr as e};
