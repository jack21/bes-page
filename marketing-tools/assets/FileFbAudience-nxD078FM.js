import{d as r,o as p,a as f,e as v,f as m,g as w,b as _,C as u,p as F}from"./index-46WIoOFT.js";const x={class:"file-fb-device-id"},C=_("span",null,"TAMI Device ID 轉 FB 自訂受眾檔案",-1),D=r({__name:"FileFbAudience",setup(h){const n=async()=>{const t=await window.showOpenFilePicker({id:"file-fb-device-id-import",multiple:!1,types:[{accept:{"text/csv":[".csv"]}}]});if(!t||t.length===0)return;const o=(await(await t[0].getFile()).text()).split(`
`).map(e=>e.split(",")[2]),i=new Set;o.forEach(e=>{e&&e!=="00000000-0000-0000-0000-000000000000"&&i.add(e)});const l=`madid
`+Array.from(i).join(`
`),d=new File([l],"fb-device-id.csv",{type:"text/csv"});await window.showSaveFilePicker({id:"file-fb-device-id-export",suggestedName:`FB 自訂受眾_${u().format("YYYYMMDD")}_${i.size}筆.csv`,types:[{accept:{"text/csv":[".csv"]}}]}).then(async e=>{const s=await e.createWritable();await s.write(d),await s.close()})};return(t,c)=>{const a=F;return p(),f("div",x,[C,v(a,{variant:"primary",size:"sm",onClick:n},{default:m(()=>[w("上傳 TAMI DeviceID")]),_:1})])}}});export{D as default};
