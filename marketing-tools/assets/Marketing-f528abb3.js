var Ne=Object.defineProperty;var Be=(C,o,t)=>o in C?Ne(C,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):C[o]=t;var vt=(C,o,t)=>(Be(C,typeof o!="symbol"?o+"":o,t),t);import{d as Pe,a as zt,r as xt,w as Mt,o as _t,c as Ct,b as q,t as wt,u as St,e as Pt,T as Vt,f as Ut,g as Yt,h as tt,i as dt,F as ne,j as ge,R as _e,D as ve,M as we,L as be,k as It,E as ye,N as ke,l as xe,$ as Ue,O as Me,m as At,p as ie,n as ae,_ as se,q as Se,s as We}from"./index-1108c3db.js";var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ce(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var Ee={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(C,o){(function(t,u){C.exports=u()})(Lt,function t(){var u=typeof self<"u"?self:typeof window<"u"?window:u!==void 0?u:{},i=!u.document&&!!u.postMessage,a=u.IS_PAPA_WORKER||!1,l={},n=0,s={parse:function(v,f){var L=(f=f||{}).dynamicTyping||!1;if(T(L)&&(f.dynamicTypingFunction=L,L={}),f.dynamicTyping=L,f.transform=!!T(f.transform)&&f.transform,f.worker&&s.WORKERS_SUPPORTED){var M=function(){if(!s.WORKERS_SUPPORTED)return!1;var F=(U=u.URL||u.webkitURL||null,K=t.toString(),s.BLOB_URL||(s.BLOB_URL=U.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",K,")();"],{type:"text/javascript"})))),r=new u.Worker(F),U,K;return r.onmessage=p,r.id=n++,l[r.id]=r}();return M.userStep=f.step,M.userChunk=f.chunk,M.userComplete=f.complete,M.userError=f.error,f.step=T(f.step),f.chunk=T(f.chunk),f.complete=T(f.complete),f.error=T(f.error),delete f.worker,void M.postMessage({input:v,config:f,workerId:M.id})}var b=null;return s.NODE_STREAM_INPUT,typeof v=="string"?(v=function(F){return F.charCodeAt(0)===65279?F.slice(1):F}(v),b=f.download?new y(f):new d(f)):v.readable===!0&&T(v.read)&&T(v.on)?b=new x(f):(u.File&&v instanceof File||v instanceof Object)&&(b=new k(f)),b.stream(v)},unparse:function(v,f){var L=!1,M=!0,b=",",F=`\r
`,r='"',U=r+r,K=!1,N=null,et=!1;(function(){if(typeof f=="object"){if(typeof f.delimiter!="string"||s.BAD_DELIMITERS.filter(function(I){return f.delimiter.indexOf(I)!==-1}).length||(b=f.delimiter),(typeof f.quotes=="boolean"||typeof f.quotes=="function"||Array.isArray(f.quotes))&&(L=f.quotes),typeof f.skipEmptyLines!="boolean"&&typeof f.skipEmptyLines!="string"||(K=f.skipEmptyLines),typeof f.newline=="string"&&(F=f.newline),typeof f.quoteChar=="string"&&(r=f.quoteChar),typeof f.header=="boolean"&&(M=f.header),Array.isArray(f.columns)){if(f.columns.length===0)throw new Error("Option columns is empty");N=f.columns}f.escapeChar!==void 0&&(U=f.escapeChar+r),(typeof f.escapeFormulae=="boolean"||f.escapeFormulae instanceof RegExp)&&(et=f.escapeFormulae instanceof RegExp?f.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var W=new RegExp(g(r),"g");if(typeof v=="string"&&(v=JSON.parse(v)),Array.isArray(v)){if(!v.length||Array.isArray(v[0]))return nt(null,v,K);if(typeof v[0]=="object")return nt(N||Object.keys(v[0]),v,K)}else if(typeof v=="object")return typeof v.data=="string"&&(v.data=JSON.parse(v.data)),Array.isArray(v.data)&&(v.fields||(v.fields=v.meta&&v.meta.fields||N),v.fields||(v.fields=Array.isArray(v.data[0])?v.fields:typeof v.data[0]=="object"?Object.keys(v.data[0]):[]),Array.isArray(v.data[0])||typeof v.data[0]=="object"||(v.data=[v.data])),nt(v.fields||[],v.data||[],K);throw new Error("Unable to serialize unrecognized input");function nt(I,Q,V){var H="";typeof I=="string"&&(I=JSON.parse(I)),typeof Q=="string"&&(Q=JSON.parse(Q));var ut=Array.isArray(I)&&0<I.length,ht=!Array.isArray(Q[0]);if(ut&&M){for(var it=0;it<I.length;it++)0<it&&(H+=b),H+=B(I[it],it);0<Q.length&&(H+=F)}for(var X=0;X<Q.length;X++){var at=ut?I.length:Q[X].length,st=!1,ft=ut?Object.keys(Q[X]).length===0:Q[X].length===0;if(V&&!ut&&(st=V==="greedy"?Q[X].join("").trim()==="":Q[X].length===1&&Q[X][0].length===0),V==="greedy"&&ut){for(var lt=[],e=0;e<at;e++){var j=ht?I[e]:e;lt.push(Q[X][j])}st=lt.join("").trim()===""}if(!st){for(var R=0;R<at;R++){0<R&&!ft&&(H+=b);var S=ut&&ht?I[R]:R;H+=B(Q[X][S],R)}X<Q.length-1&&(!V||0<at&&!ft)&&(H+=F)}}return H}function B(I,Q){if(I==null)return"";if(I.constructor===Date)return JSON.stringify(I).slice(1,25);var V=!1;et&&typeof I=="string"&&et.test(I)&&(I="'"+I,V=!0);var H=I.toString().replace(W,U);return(V=V||L===!0||typeof L=="function"&&L(I,Q)||Array.isArray(L)&&L[Q]||function(ut,ht){for(var it=0;it<ht.length;it++)if(-1<ut.indexOf(ht[it]))return!0;return!1}(H,s.BAD_DELIMITERS)||-1<H.indexOf(b)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?r+H+r:H}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!i&&!!u.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=m,s.ParserHandle=c,s.NetworkStreamer=y,s.FileStreamer=k,s.StringStreamer=d,s.ReadableStreamStreamer=x,u.jQuery){var h=u.jQuery;h.fn.parse=function(v){var f=v.config||{},L=[];return this.each(function(F){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&u.FileReader)||!this.files||this.files.length===0)return!0;for(var r=0;r<this.files.length;r++)L.push({file:this.files[r],inputElem:this,instanceConfig:h.extend({},f)})}),M(),this;function M(){if(L.length!==0){var F,r,U,K,N=L[0];if(T(v.before)){var et=v.before(N.file,N.inputElem);if(typeof et=="object"){if(et.action==="abort")return F="AbortError",r=N.file,U=N.inputElem,K=et.reason,void(T(v.error)&&v.error({name:F},r,U,K));if(et.action==="skip")return void b();typeof et.config=="object"&&(N.instanceConfig=h.extend(N.instanceConfig,et.config))}else if(et==="skip")return void b()}var W=N.instanceConfig.complete;N.instanceConfig.complete=function(nt){T(W)&&W(nt,N.file,N.inputElem),b()},s.parse(N.file,N.instanceConfig)}else T(v.complete)&&v.complete()}function b(){L.splice(0,1),M()}}}function w(v){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(f){var L=A(f);L.chunkSize=parseInt(L.chunkSize),f.step||f.chunk||(L.chunkSize=null),this._handle=new c(L),(this._handle.streamer=this)._config=L}).call(this,v),this.parseChunk=function(f,L){if(this.isFirstChunk&&T(this._config.beforeFirstChunk)){var M=this._config.beforeFirstChunk(f);M!==void 0&&(f=M)}this.isFirstChunk=!1,this._halted=!1;var b=this._partialLine+f;this._partialLine="";var F=this._handle.parse(b,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var r=F.meta.cursor;this._finished||(this._partialLine=b.substring(r-this._baseIndex),this._baseIndex=r),F&&F.data&&(this._rowCount+=F.data.length);var U=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)u.postMessage({results:F,workerId:s.WORKER_ID,finished:U});else if(T(this._config.chunk)&&!L){if(this._config.chunk(F,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);F=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(F.data),this._completeResults.errors=this._completeResults.errors.concat(F.errors),this._completeResults.meta=F.meta),this._completed||!U||!T(this._config.complete)||F&&F.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),U||F&&F.meta.paused||this._nextChunk(),F}this._halted=!0},this._sendError=function(f){T(this._config.error)?this._config.error(f):a&&this._config.error&&u.postMessage({workerId:s.WORKER_ID,error:f,finished:!1})}}function y(v){var f;(v=v||{}).chunkSize||(v.chunkSize=s.RemoteChunkSize),w.call(this,v),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(f=new XMLHttpRequest,this._config.withCredentials&&(f.withCredentials=this._config.withCredentials),i||(f.onload=P(this._chunkLoaded,this),f.onerror=P(this._chunkError,this)),f.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var L=this._config.downloadRequestHeaders;for(var M in L)f.setRequestHeader(M,L[M])}if(this._config.chunkSize){var b=this._start+this._config.chunkSize-1;f.setRequestHeader("Range","bytes="+this._start+"-"+b)}try{f.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}i&&f.status===0&&this._chunkError()}},this._chunkLoaded=function(){f.readyState===4&&(f.status<200||400<=f.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:f.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(L){var M=L.getResponseHeader("Content-Range");return M===null?-1:parseInt(M.substring(M.lastIndexOf("/")+1))}(f),this.parseChunk(f.responseText)))},this._chunkError=function(L){var M=f.statusText||L;this._sendError(new Error(M))}}function k(v){var f,L;(v=v||{}).chunkSize||(v.chunkSize=s.LocalChunkSize),w.call(this,v);var M=typeof FileReader<"u";this.stream=function(b){this._input=b,L=b.slice||b.webkitSlice||b.mozSlice,M?((f=new FileReader).onload=P(this._chunkLoaded,this),f.onerror=P(this._chunkError,this)):f=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var b=this._input;if(this._config.chunkSize){var F=Math.min(this._start+this._config.chunkSize,this._input.size);b=L.call(b,this._start,F)}var r=f.readAsText(b,this._config.encoding);M||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(b){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(b.target.result)},this._chunkError=function(){this._sendError(f.error)}}function d(v){var f;w.call(this,v=v||{}),this.stream=function(L){return f=L,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var L,M=this._config.chunkSize;return M?(L=f.substring(0,M),f=f.substring(M)):(L=f,f=""),this._finished=!f,this.parseChunk(L)}}}function x(v){w.call(this,v=v||{});var f=[],L=!0,M=!1;this.pause=function(){w.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){w.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(b){this._input=b,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){M&&f.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),f.length?this.parseChunk(f.shift()):L=!0},this._streamData=P(function(b){try{f.push(typeof b=="string"?b:b.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(f.shift()))}catch(F){this._streamError(F)}},this),this._streamError=P(function(b){this._streamCleanUp(),this._sendError(b)},this),this._streamEnd=P(function(){this._streamCleanUp(),M=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function c(v){var f,L,M,b=Math.pow(2,53),F=-b,r=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,K=this,N=0,et=0,W=!1,nt=!1,B=[],I={data:[],errors:[],meta:{}};if(T(v.step)){var Q=v.step;v.step=function(X){if(I=X,ut())H();else{if(H(),I.data.length===0)return;N+=X.data.length,v.preview&&N>v.preview?L.abort():(I.data=I.data[0],Q(I,K))}}}function V(X){return v.skipEmptyLines==="greedy"?X.join("").trim()==="":X.length===1&&X[0].length===0}function H(){return I&&M&&(it("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),M=!1),v.skipEmptyLines&&(I.data=I.data.filter(function(X){return!V(X)})),ut()&&function(){if(!I)return;function X(st,ft){T(v.transformHeader)&&(st=v.transformHeader(st,ft)),B.push(st)}if(Array.isArray(I.data[0])){for(var at=0;ut()&&at<I.data.length;at++)I.data[at].forEach(X);I.data.splice(0,1)}else I.data.forEach(X)}(),function(){if(!I||!v.header&&!v.dynamicTyping&&!v.transform)return I;function X(st,ft){var lt,e=v.header?{}:[];for(lt=0;lt<st.length;lt++){var j=lt,R=st[lt];v.header&&(j=lt>=B.length?"__parsed_extra":B[lt]),v.transform&&(R=v.transform(R,j)),R=ht(j,R),j==="__parsed_extra"?(e[j]=e[j]||[],e[j].push(R)):e[j]=R}return v.header&&(lt>B.length?it("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+lt,et+ft):lt<B.length&&it("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+lt,et+ft)),e}var at=1;return!I.data.length||Array.isArray(I.data[0])?(I.data=I.data.map(X),at=I.data.length):I.data=X(I.data,0),v.header&&I.meta&&(I.meta.fields=B),et+=at,I}()}function ut(){return v.header&&B.length===0}function ht(X,at){return st=X,v.dynamicTypingFunction&&v.dynamicTyping[st]===void 0&&(v.dynamicTyping[st]=v.dynamicTypingFunction(st)),(v.dynamicTyping[st]||v.dynamicTyping)===!0?at==="true"||at==="TRUE"||at!=="false"&&at!=="FALSE"&&(function(ft){if(r.test(ft)){var lt=parseFloat(ft);if(F<lt&&lt<b)return!0}return!1}(at)?parseFloat(at):U.test(at)?new Date(at):at===""?null:at):at;var st}function it(X,at,st,ft){var lt={type:X,code:at,message:st};ft!==void 0&&(lt.row=ft),I.errors.push(lt)}this.parse=function(X,at,st){var ft=v.quoteChar||'"';if(v.newline||(v.newline=function(j,R){j=j.substring(0,1048576);var S=new RegExp(g(R)+"([^]*?)"+g(R),"gm"),_=(j=j.replace(S,"")).split("\r"),z=j.split(`
`),$=1<z.length&&z[0].length<_[0].length;if(_.length===1||$)return`
`;for(var G=0,D=0;D<_.length;D++)_[D][0]===`
`&&G++;return G>=_.length/2?`\r
`:"\r"}(X,ft)),M=!1,v.delimiter)T(v.delimiter)&&(v.delimiter=v.delimiter(X),I.meta.delimiter=v.delimiter);else{var lt=function(j,R,S,_,z){var $,G,D,Z;z=z||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var J=0;J<z.length;J++){var Y=z[J],rt=0,ct=0,ot=0;D=void 0;for(var gt=new m({comments:_,delimiter:Y,newline:R,preview:10}).parse(j),Tt=0;Tt<gt.data.length;Tt++)if(S&&V(gt.data[Tt]))ot++;else{var bt=gt.data[Tt].length;ct+=bt,D!==void 0?0<bt&&(rt+=Math.abs(bt-D),D=bt):D=bt}0<gt.data.length&&(ct/=gt.data.length-ot),(G===void 0||rt<=G)&&(Z===void 0||Z<ct)&&1.99<ct&&(G=rt,$=Y,Z=ct)}return{successful:!!(v.delimiter=$),bestDelimiter:$}}(X,v.newline,v.skipEmptyLines,v.comments,v.delimitersToGuess);lt.successful?v.delimiter=lt.bestDelimiter:(M=!0,v.delimiter=s.DefaultDelimiter),I.meta.delimiter=v.delimiter}var e=A(v);return v.preview&&v.header&&e.preview++,f=X,L=new m(e),I=L.parse(f,at,st),H(),W?{meta:{paused:!0}}:I||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,L.abort(),f=T(v.chunk)?"":f.substring(L.getCharIndex())},this.resume=function(){K.streamer._halted?(W=!1,K.streamer.parseChunk(f,!0)):setTimeout(K.resume,3)},this.aborted=function(){return nt},this.abort=function(){nt=!0,L.abort(),I.meta.aborted=!0,T(v.complete)&&v.complete(I),f=""}}function g(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(v){var f,L=(v=v||{}).delimiter,M=v.newline,b=v.comments,F=v.step,r=v.preview,U=v.fastMode,K=f=v.quoteChar===void 0||v.quoteChar===null?'"':v.quoteChar;if(v.escapeChar!==void 0&&(K=v.escapeChar),(typeof L!="string"||-1<s.BAD_DELIMITERS.indexOf(L))&&(L=","),b===L)throw new Error("Comment character same as delimiter");b===!0?b="#":(typeof b!="string"||-1<s.BAD_DELIMITERS.indexOf(b))&&(b=!1),M!==`
`&&M!=="\r"&&M!==`\r
`&&(M=`
`);var N=0,et=!1;this.parse=function(W,nt,B){if(typeof W!="string")throw new Error("Input must be a string");var I=W.length,Q=L.length,V=M.length,H=b.length,ut=T(F),ht=[],it=[],X=[],at=N=0;if(!W)return yt();if(v.header&&!nt){var st=W.split(M)[0].split(L),ft=[],lt={},e=!1;for(var j in st){var R=st[j];T(v.transformHeader)&&(R=v.transformHeader(R,j));var S=R,_=lt[R]||0;for(0<_&&(e=!0,S=R+"_"+_),lt[R]=_+1;ft.includes(S);)S=S+"_"+_;ft.push(S)}if(e){var z=W.split(M);z[0]=ft.join(L),W=z.join(M)}}if(U||U!==!1&&W.indexOf(f)===-1){for(var $=W.split(M),G=0;G<$.length;G++){if(X=$[G],N+=X.length,G!==$.length-1)N+=M.length;else if(B)return yt();if(!b||X.substring(0,H)!==b){if(ut){if(ht=[],ot(X.split(L)),pt(),et)return yt()}else ot(X.split(L));if(r&&r<=G)return ht=ht.slice(0,r),yt(!0)}}return yt()}for(var D=W.indexOf(L,N),Z=W.indexOf(M,N),J=new RegExp(g(K)+g(f),"g"),Y=W.indexOf(f,N);;)if(W[N]!==f)if(b&&X.length===0&&W.substring(N,N+H)===b){if(Z===-1)return yt();N=Z+V,Z=W.indexOf(M,N),D=W.indexOf(L,N)}else if(D!==-1&&(D<Z||Z===-1))X.push(W.substring(N,D)),N=D+Q,D=W.indexOf(L,N);else{if(Z===-1)break;if(X.push(W.substring(N,Z)),bt(Z+V),ut&&(pt(),et))return yt();if(r&&ht.length>=r)return yt(!0)}else for(Y=N,N++;;){if((Y=W.indexOf(f,Y+1))===-1)return B||it.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ht.length,index:N}),Tt();if(Y===I-1)return Tt(W.substring(N,Y).replace(J,f));if(f!==K||W[Y+1]!==K){if(f===K||Y===0||W[Y-1]!==K){D!==-1&&D<Y+1&&(D=W.indexOf(L,Y+1)),Z!==-1&&Z<Y+1&&(Z=W.indexOf(M,Y+1));var rt=gt(Z===-1?D:Math.min(D,Z));if(W.substr(Y+1+rt,Q)===L){X.push(W.substring(N,Y).replace(J,f)),W[N=Y+1+rt+Q]!==f&&(Y=W.indexOf(f,N)),D=W.indexOf(L,N),Z=W.indexOf(M,N);break}var ct=gt(Z);if(W.substring(Y+1+ct,Y+1+ct+V)===M){if(X.push(W.substring(N,Y).replace(J,f)),bt(Y+1+ct+V),D=W.indexOf(L,N),Y=W.indexOf(f,N),ut&&(pt(),et))return yt();if(r&&ht.length>=r)return yt(!0);break}it.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ht.length,index:N}),Y++}}else Y++}return Tt();function ot(kt){ht.push(kt),at=N}function gt(kt){var jt=0;if(kt!==-1){var Ot=W.substring(Y+1,kt);Ot&&Ot.trim()===""&&(jt=Ot.length)}return jt}function Tt(kt){return B||(kt===void 0&&(kt=W.substring(N)),X.push(kt),N=I,ot(X),ut&&pt()),yt()}function bt(kt){N=kt,ot(X),X=[],Z=W.indexOf(M,N)}function yt(kt){return{data:ht,errors:it,meta:{delimiter:L,linebreak:M,aborted:et,truncated:!!kt,cursor:at+(nt||0)}}}function pt(){F(yt()),ht=[],it=[]}},this.abort=function(){et=!0},this.getCharIndex=function(){return N}}function p(v){var f=v.data,L=l[f.workerId],M=!1;if(f.error)L.userError(f.error,f.file);else if(f.results&&f.results.data){var b={abort:function(){M=!0,E(f.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:O,resume:O};if(T(L.userStep)){for(var F=0;F<f.results.data.length&&(L.userStep({data:f.results.data[F],errors:f.results.errors,meta:f.results.meta},b),!M);F++);delete f.results}else T(L.userChunk)&&(L.userChunk(f.results,b,f.file),delete f.results)}f.finished&&!M&&E(f.workerId,f.results)}function E(v,f){var L=l[v];T(L.userComplete)&&L.userComplete(f),L.terminate(),delete l[v]}function O(){throw new Error("Not implemented.")}function A(v){if(typeof v!="object"||v===null)return v;var f=Array.isArray(v)?[]:{};for(var L in v)f[L]=A(v[L]);return f}function P(v,f){return function(){v.apply(f,arguments)}}function T(v){return typeof v=="function"}return a&&(u.onmessage=function(v){var f=v.data;if(s.WORKER_ID===void 0&&f&&(s.WORKER_ID=f.workerId),typeof f.input=="string")u.postMessage({workerId:s.WORKER_ID,results:s.parse(f.input,f.config),finished:!0});else if(u.File&&f.input instanceof File||f.input instanceof Object){var L=s.parse(f.input,f.config);L&&u.postMessage({workerId:s.WORKER_ID,results:L,finished:!0})}}),(y.prototype=Object.create(w.prototype)).constructor=y,(k.prototype=Object.create(w.prototype)).constructor=k,(d.prototype=Object.create(d.prototype)).constructor=d,(x.prototype=Object.create(w.prototype)).constructor=x,s})})(Ee);var je=Ee.exports;const Bt=Ce(je);class oe{constructor(o,t){vt(this,"name","");vt(this,"twmIdSet",new Set);this.name=o,t&&t.forEach(u=>this.twmIdSet.add(u))}addTwmId(o){this.twmIdSet.add(o)}get twmIdList(){return Array.from(this.twmIdSet)}}class Te{constructor(o,t){vt(this,"name","");vt(this,"twmIdList",[]);vt(this,"smsTwmIdList",[]);vt(this,"smsTwmIdListFilted",[]);vt(this,"smsPhoneNumberFilted",[]);this.name=o,this.twmIdList=t.slice(0)}}class $e{constructor(o,t,u,i){vt(this,"twmId");vt(this,"subId");vt(this,"phoneNumber");vt(this,"params");this.twmId=o,this.subId=t,this.phoneNumber=u,this.params=i}}class Ge{constructor(){vt(this,"name","");vt(this,"userInfoList",[]);vt(this,"groupList",[]);vt(this,"taGroupNameList",[]);vt(this,"smsGroupNameList",[])}fromGroup(o,t){o.forEach(u=>{const i=new ce().fromTaGroup(u);this.groupList.push(i),this.taGroupNameList.push(i.name)}),t.forEach(u=>{const i=new ce().fromSmsGroup(u);this.groupList.push(i),this.smsGroupNameList.push(i.name)})}}class ce{constructor(){vt(this,"name","");vt(this,"twmIdList",[]);vt(this,"smsTwmIdList",[])}fromTaGroup(o){return this.name=o.name,this.twmIdList=o.twmIdList.slice(0),this.smsTwmIdList=[],this}fromSmsGroup(o){return this.name=o.name,this.twmIdList=o.twmIdList.slice(0),this.smsTwmIdList=o.smsTwmIdList.slice(0),this}}var Ie={exports:{}};(function(C,o){(function(t,u){u()})(Lt,function(){function t(h,w){return typeof w>"u"?w={autoBom:!1}:typeof w!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),w={autoBom:!w}),w.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function u(h,w,y){var k=new XMLHttpRequest;k.open("GET",h),k.responseType="blob",k.onload=function(){s(k.response,w,y)},k.onerror=function(){console.error("could not download file")},k.send()}function i(h){var w=new XMLHttpRequest;w.open("HEAD",h,!1);try{w.send()}catch{}return 200<=w.status&&299>=w.status}function a(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var w=document.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(w)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Lt=="object"&&Lt.global===Lt?Lt:void 0,n=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(h,w,y){var k=l.URL||l.webkitURL,d=document.createElement("a");w=w||h.name||"download",d.download=w,d.rel="noopener",typeof h=="string"?(d.href=h,d.origin===location.origin?a(d):i(d.href)?u(h,w,y):a(d,d.target="_blank")):(d.href=k.createObjectURL(h),setTimeout(function(){k.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(h,w,y){if(w=w||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,y),w);else if(i(h))u(h,w,y);else{var k=document.createElement("a");k.href=h,k.target="_blank",setTimeout(function(){a(k)})}}:function(h,w,y,k){if(k=k||open("","_blank"),k&&(k.document.title=k.document.body.innerText="downloading..."),typeof h=="string")return u(h,w,y);var d=h.type==="application/octet-stream",x=/constructor/i.test(l.HTMLElement)||l.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||d&&x||n)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var E=g.result;E=c?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),k?k.location.href=E:location=E,k=null},g.readAsDataURL(h)}else{var m=l.URL||l.webkitURL,p=m.createObjectURL(h);k?k.location=p:location.href=p,k=null,setTimeout(function(){m.revokeObjectURL(p)},4e4)}});l.saveAs=s.saveAs=s,C.exports=s})})(Ie);var Ye=Ie.exports;function Kt(C){throw new Error('Could not dynamically require "'+C+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Oe={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(C,o){(function(t){C.exports=t()})(function(){return function t(u,i,a){function l(h,w){if(!i[h]){if(!u[h]){var y=typeof Kt=="function"&&Kt;if(!w&&y)return y(h,!0);if(n)return n(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var d=i[h]={exports:{}};u[h][0].call(d.exports,function(x){var c=u[h][1][x];return l(c||x)},d,d.exports,t,u,i,a)}return i[h].exports}for(var n=typeof Kt=="function"&&Kt,s=0;s<a.length;s++)l(a[s]);return l}({1:[function(t,u,i){var a=t("./utils"),l=t("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(s){for(var h,w,y,k,d,x,c,g=[],m=0,p=s.length,E=p,O=a.getTypeOf(s)!=="string";m<s.length;)E=p-m,y=O?(h=s[m++],w=m<p?s[m++]:0,m<p?s[m++]:0):(h=s.charCodeAt(m++),w=m<p?s.charCodeAt(m++):0,m<p?s.charCodeAt(m++):0),k=h>>2,d=(3&h)<<4|w>>4,x=1<E?(15&w)<<2|y>>6:64,c=2<E?63&y:64,g.push(n.charAt(k)+n.charAt(d)+n.charAt(x)+n.charAt(c));return g.join("")},i.decode=function(s){var h,w,y,k,d,x,c=0,g=0,m="data:";if(s.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var p,E=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===n.charAt(64)&&E--,s.charAt(s.length-2)===n.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=l.uint8array?new Uint8Array(0|E):new Array(0|E);c<s.length;)h=n.indexOf(s.charAt(c++))<<2|(k=n.indexOf(s.charAt(c++)))>>4,w=(15&k)<<4|(d=n.indexOf(s.charAt(c++)))>>2,y=(3&d)<<6|(x=n.indexOf(s.charAt(c++))),p[g++]=h,d!==64&&(p[g++]=w),x!==64&&(p[g++]=y);return p}},{"./support":30,"./utils":32}],2:[function(t,u,i){var a=t("./external"),l=t("./stream/DataWorker"),n=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function h(w,y,k,d,x){this.compressedSize=w,this.uncompressedSize=y,this.crc32=k,this.compression=d,this.compressedContent=x}h.prototype={getContentWorker:function(){var w=new l(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),y=this;return w.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new l(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(w,y,k){return w.pipe(new n).pipe(new s("uncompressedSize")).pipe(y.compressWorker(k)).pipe(new s("compressedSize")).withStreamInfo("compression",y)},u.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,u,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,u,i){var a=t("./utils"),l=function(){for(var n,s=[],h=0;h<256;h++){n=h;for(var w=0;w<8;w++)n=1&n?3988292384^n>>>1:n>>>1;s[h]=n}return s}();u.exports=function(n,s){return n!==void 0&&n.length?a.getTypeOf(n)!=="string"?function(h,w,y,k){var d=l,x=k+y;h^=-1;for(var c=k;c<x;c++)h=h>>>8^d[255&(h^w[c])];return-1^h}(0|s,n,n.length,0):function(h,w,y,k){var d=l,x=k+y;h^=-1;for(var c=k;c<x;c++)h=h>>>8^d[255&(h^w.charCodeAt(c))];return-1^h}(0|s,n,n.length,0):0}},{"./utils":32}],5:[function(t,u,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,u,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),u.exports={Promise:a}},{lie:37}],7:[function(t,u,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=t("pako"),n=t("./utils"),s=t("./stream/GenericWorker"),h=a?"uint8array":"array";function w(y,k){s.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=k,this.meta={}}i.magic="\b\0",n.inherits(w,s),w.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(h,y.data),!1)},w.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(k){y.push({data:k,meta:y.meta})}},i.compressWorker=function(y){return new w("Deflate",y)},i.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,u,i){function a(d,x){var c,g="";for(c=0;c<x;c++)g+=String.fromCharCode(255&d),d>>>=8;return g}function l(d,x,c,g,m,p){var E,O,A=d.file,P=d.compression,T=p!==h.utf8encode,v=n.transformTo("string",p(A.name)),f=n.transformTo("string",h.utf8encode(A.name)),L=A.comment,M=n.transformTo("string",p(L)),b=n.transformTo("string",h.utf8encode(L)),F=f.length!==A.name.length,r=b.length!==L.length,U="",K="",N="",et=A.dir,W=A.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};x&&!c||(nt.crc32=d.crc32,nt.compressedSize=d.compressedSize,nt.uncompressedSize=d.uncompressedSize);var B=0;x&&(B|=8),T||!F&&!r||(B|=2048);var I=0,Q=0;et&&(I|=16),m==="UNIX"?(Q=798,I|=function(H,ut){var ht=H;return H||(ht=ut?16893:33204),(65535&ht)<<16}(A.unixPermissions,et)):(Q=20,I|=function(H){return 63&(H||0)}(A.dosPermissions)),E=W.getUTCHours(),E<<=6,E|=W.getUTCMinutes(),E<<=5,E|=W.getUTCSeconds()/2,O=W.getUTCFullYear()-1980,O<<=4,O|=W.getUTCMonth()+1,O<<=5,O|=W.getUTCDate(),F&&(K=a(1,1)+a(w(v),4)+f,U+="up"+a(K.length,2)+K),r&&(N=a(1,1)+a(w(M),4)+b,U+="uc"+a(N.length,2)+N);var V="";return V+=`
\0`,V+=a(B,2),V+=P.magic,V+=a(E,2),V+=a(O,2),V+=a(nt.crc32,4),V+=a(nt.compressedSize,4),V+=a(nt.uncompressedSize,4),V+=a(v.length,2),V+=a(U.length,2),{fileRecord:y.LOCAL_FILE_HEADER+V+v+U,dirRecord:y.CENTRAL_FILE_HEADER+a(Q,2)+V+a(M.length,2)+"\0\0\0\0"+a(I,4)+a(g,4)+v+U+M}}var n=t("../utils"),s=t("../stream/GenericWorker"),h=t("../utf8"),w=t("../crc32"),y=t("../signature");function k(d,x,c,g){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=c,this.encodeFileName=g,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(k,s),k.prototype.push=function(d){var x=d.meta.percent||0,c=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:c?(x+100*(c-g-1))/c:100}}))},k.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var x=this.streamFiles&&!d.file.dir;if(x){var c=l(d,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},k.prototype.closedSource=function(d){this.accumulate=!1;var x=this.streamFiles&&!d.file.dir,c=l(d,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),x)this.push({data:function(g){return y.DATA_DESCRIPTOR+a(g.crc32,4)+a(g.compressedSize,4)+a(g.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},k.prototype.flush=function(){for(var d=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var c=this.bytesWritten-d,g=function(m,p,E,O,A){var P=n.transformTo("string",A(O));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(m,2)+a(m,2)+a(p,4)+a(E,4)+a(P.length,2)+P}(this.dirRecords.length,c,d,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},k.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},k.prototype.registerPrevious=function(d){this._sources.push(d);var x=this;return d.on("data",function(c){x.processChunk(c)}),d.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),d.on("error",function(c){x.error(c)}),this},k.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},k.prototype.error=function(d){var x=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var c=0;c<x.length;c++)try{x[c].error(d)}catch{}return!0},k.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,x=0;x<d.length;x++)d[x].lock()},u.exports=k},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,u,i){var a=t("../compressions"),l=t("./ZipFileWorker");i.generateWorker=function(n,s,h){var w=new l(s.streamFiles,h,s.platform,s.encodeFileName),y=0;try{n.forEach(function(k,d){y++;var x=function(p,E){var O=p||E,A=a[O];if(!A)throw new Error(O+" is not a valid compression method !");return A}(d.options.compression,s.compression),c=d.options.compressionOptions||s.compressionOptions||{},g=d.dir,m=d.date;d._compressWorker(x,c).withStreamInfo("file",{name:k,dir:g,date:m,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(w)}),w.entriesCount=y}catch(k){w.error(k)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,u,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new a;for(var n in this)typeof this[n]!="function"&&(l[n]=this[n]);return l}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(l,n){return new a().loadAsync(l,n)},a.external=t("./external"),u.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,u,i){var a=t("./utils"),l=t("./external"),n=t("./utf8"),s=t("./zipEntries"),h=t("./stream/Crc32Probe"),w=t("./nodejsUtils");function y(k){return new l.Promise(function(d,x){var c=k.decompressed.getContentWorker().pipe(new h);c.on("error",function(g){x(g)}).on("end",function(){c.streamInfo.crc32!==k.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}u.exports=function(k,d){var x=this;return d=a.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),w.isNode&&w.isStream(k)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",k,!0,d.optimizedBinaryString,d.base64).then(function(c){var g=new s(d);return g.load(c),g}).then(function(c){var g=[l.Promise.resolve(c)],m=c.files;if(d.checkCRC32)for(var p=0;p<m.length;p++)g.push(y(m[p]));return l.Promise.all(g)}).then(function(c){for(var g=c.shift(),m=g.files,p=0;p<m.length;p++){var E=m[p],O=E.fileNameStr,A=a.resolve(E.fileNameStr);x.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:d.createFolders}),E.dir||(x.file(A).unsafeOriginalName=O)}return g.zipComment.length&&(x.comment=g.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,u,i){var a=t("../utils"),l=t("../stream/GenericWorker");function n(s,h){l.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(h)}a.inherits(n,l),n.prototype._bindStream=function(s){var h=this;(this._stream=s).pause(),s.on("data",function(w){h.push({data:w,meta:{percent:0}})}).on("error",function(w){h.isPaused?this.generatedError=w:h.error(w)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},n.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,u,i){var a=t("readable-stream").Readable;function l(n,s,h){a.call(this,s),this._helper=n;var w=this;n.on("data",function(y,k){w.push(y)||w._helper.pause(),h&&h(k)}).on("error",function(y){w.emit("error",y)}).on("end",function(){w.push(null)})}t("../utils").inherits(l,a),l.prototype._read=function(){this._helper.resume()},u.exports=l},{"../utils":32,"readable-stream":16}],14:[function(t,u,i){u.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,u,i){function a(A,P,T){var v,f=n.getTypeOf(P),L=n.extend(T||{},w);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(A=m(A)),L.createFolders&&(v=g(A))&&p.call(this,v,!0);var M=f==="string"&&L.binary===!1&&L.base64===!1;T&&T.binary!==void 0||(L.binary=!M),(P instanceof y&&P.uncompressedSize===0||L.dir||!P||P.length===0)&&(L.base64=!1,L.binary=!0,P="",L.compression="STORE",f="string");var b=null;b=P instanceof y||P instanceof s?P:x.isNode&&x.isStream(P)?new c(A,P):n.prepareContent(A,P,L.binary,L.optimizedBinaryString,L.base64);var F=new k(A,b,L);this.files[A]=F}var l=t("./utf8"),n=t("./utils"),s=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),w=t("./defaults"),y=t("./compressedObject"),k=t("./zipObject"),d=t("./generate"),x=t("./nodejsUtils"),c=t("./nodejs/NodejsStreamInputAdapter"),g=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var P=A.lastIndexOf("/");return 0<P?A.substring(0,P):""},m=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},p=function(A,P){return P=P!==void 0?P:w.createFolders,A=m(A),this.files[A]||a.call(this,A,null,{dir:!0,createFolders:P}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var P,T,v;for(P in this.files)v=this.files[P],(T=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&A(T,v)},filter:function(A){var P=[];return this.forEach(function(T,v){A(T,v)&&P.push(v)}),P},file:function(A,P,T){if(arguments.length!==1)return A=this.root+A,a.call(this,A,P,T),this;if(E(A)){var v=A;return this.filter(function(L,M){return!M.dir&&v.test(L)})}var f=this.files[this.root+A];return f&&!f.dir?f:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(f,L){return L.dir&&A.test(f)});var P=this.root+A,T=p.call(this,P),v=this.clone();return v.root=T.name,v},remove:function(A){A=this.root+A;var P=this.files[A];if(P||(A.slice(-1)!=="/"&&(A+="/"),P=this.files[A]),P&&!P.dir)delete this.files[A];else for(var T=this.filter(function(f,L){return L.name.slice(0,A.length)===A}),v=0;v<T.length;v++)delete this.files[T[v].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var P,T={};try{if((T=n.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");n.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var v=T.comment||this.comment||"";P=d.generateWorker(this,T,v)}catch(f){(P=new s("error")).error(f)}return new h(P,T.type||"string",T.mimeType)},generateAsync:function(A,P){return this.generateInternalStream(A).accumulate(P)},generateNodeStream:function(A,P){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(P)}};u.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,u,i){u.exports=t("stream")},{stream:void 0}],17:[function(t,u,i){var a=t("./DataReader");function l(n){a.call(this,n);for(var s=0;s<this.data.length;s++)n[s]=255&n[s]}t("../utils").inherits(l,a),l.prototype.byteAt=function(n){return this.data[this.zero+n]},l.prototype.lastIndexOfSignature=function(n){for(var s=n.charCodeAt(0),h=n.charCodeAt(1),w=n.charCodeAt(2),y=n.charCodeAt(3),k=this.length-4;0<=k;--k)if(this.data[k]===s&&this.data[k+1]===h&&this.data[k+2]===w&&this.data[k+3]===y)return k-this.zero;return-1},l.prototype.readAndCheckSignature=function(n){var s=n.charCodeAt(0),h=n.charCodeAt(1),w=n.charCodeAt(2),y=n.charCodeAt(3),k=this.readData(4);return s===k[0]&&h===k[1]&&w===k[2]&&y===k[3]},l.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},u.exports=l},{"../utils":32,"./DataReader":18}],18:[function(t,u,i){var a=t("../utils");function l(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var s,h=0;for(this.checkOffset(n),s=this.index+n-1;s>=this.index;s--)h=(h<<8)+this.byteAt(s);return this.index+=n,h},readString:function(n){return a.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},u.exports=l},{"../utils":32}],19:[function(t,u,i){var a=t("./Uint8ArrayReader");function l(n){a.call(this,n)}t("../utils").inherits(l,a),l.prototype.readData=function(n){this.checkOffset(n);var s=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},u.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,u,i){var a=t("./DataReader");function l(n){a.call(this,n)}t("../utils").inherits(l,a),l.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},l.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},l.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},l.prototype.readData=function(n){this.checkOffset(n);var s=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},u.exports=l},{"../utils":32,"./DataReader":18}],21:[function(t,u,i){var a=t("./ArrayReader");function l(n){a.call(this,n)}t("../utils").inherits(l,a),l.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,s},u.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(t,u,i){var a=t("../utils"),l=t("../support"),n=t("./ArrayReader"),s=t("./StringReader"),h=t("./NodeBufferReader"),w=t("./Uint8ArrayReader");u.exports=function(y){var k=a.getTypeOf(y);return a.checkSupport(k),k!=="string"||l.uint8array?k==="nodebuffer"?new h(y):l.uint8array?new w(a.transformTo("uint8array",y)):new n(a.transformTo("array",y)):new s(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,u,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,u,i){var a=t("./GenericWorker"),l=t("../utils");function n(s){a.call(this,"ConvertWorker to "+s),this.destType=s}l.inherits(n,a),n.prototype.processChunk=function(s){this.push({data:l.transformTo(this.destType,s.data),meta:s.meta})},u.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(t,u,i){var a=t("./GenericWorker"),l=t("../crc32");function n(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(n,a),n.prototype.processChunk=function(s){this.streamInfo.crc32=l(s.data,this.streamInfo.crc32||0),this.push(s)},u.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,u,i){var a=t("../utils"),l=t("./GenericWorker");function n(s){l.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}a.inherits(n,l),n.prototype.processChunk=function(s){if(s){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+s.data.length}l.prototype.processChunk.call(this,s)},u.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(t,u,i){var a=t("../utils"),l=t("./GenericWorker");function n(s){l.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(w){h.dataIsReady=!0,h.data=w,h.max=w&&w.length||0,h.type=a.getTypeOf(w),h.isPaused||h._tickAndRepeat()},function(w){h.error(w)})}a.inherits(n,l),n.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,h);break;case"uint8array":s=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":s=this.data.slice(this.index,h)}return this.index=h,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(t,u,i){function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,n){return this._listeners[l].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,n){if(this._listeners[l])for(var s=0;s<this._listeners[l].length;s++)this._listeners[l][s].call(this,n)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var n=this;return l.on("data",function(s){n.processChunk(s)}),l.on("end",function(){n.end()}),l.on("error",function(s){n.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,n){return this.extraStreamInfo[l]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},u.exports=a},{}],29:[function(t,u,i){var a=t("../utils"),l=t("./ConvertWorker"),n=t("./GenericWorker"),s=t("../base64"),h=t("../support"),w=t("../external"),y=null;if(h.nodestream)try{y=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function k(x,c){return new w.Promise(function(g,m){var p=[],E=x._internalType,O=x._outputType,A=x._mimeType;x.on("data",function(P,T){p.push(P),c&&c(T)}).on("error",function(P){p=[],m(P)}).on("end",function(){try{var P=function(T,v,f){switch(T){case"blob":return a.newBlob(a.transformTo("arraybuffer",v),f);case"base64":return s.encode(v);default:return a.transformTo(T,v)}}(O,function(T,v){var f,L=0,M=null,b=0;for(f=0;f<v.length;f++)b+=v[f].length;switch(T){case"string":return v.join("");case"array":return Array.prototype.concat.apply([],v);case"uint8array":for(M=new Uint8Array(b),f=0;f<v.length;f++)M.set(v[f],L),L+=v[f].length;return M;case"nodebuffer":return Buffer.concat(v);default:throw new Error("concat : unsupported type '"+T+"'")}}(E,p),A);g(P)}catch(T){m(T)}p=[]}).resume()})}function d(x,c,g){var m=c;switch(c){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=c,this._mimeType=g,a.checkSupport(m),this._worker=x.pipe(new l(m)),x.lock()}catch(p){this._worker=new n("error"),this._worker.error(p)}}d.prototype={accumulate:function(x){return k(this,x)},on:function(x,c){var g=this;return x==="data"?this._worker.on(x,function(m){c.call(g,m.data,m.meta)}):this._worker.on(x,function(){a.delay(c,arguments,g)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},x)}},u.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,u,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(a),i.blob=l.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,u,i){for(var a=t("./utils"),l=t("./support"),n=t("./nodejsUtils"),s=t("./stream/GenericWorker"),h=new Array(256),w=0;w<256;w++)h[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;h[254]=h[254]=1;function y(){s.call(this,"utf-8 decode"),this.leftOver=null}function k(){s.call(this,"utf-8 encode")}i.utf8encode=function(d){return l.nodebuffer?n.newBufferFrom(d,"utf-8"):function(x){var c,g,m,p,E,O=x.length,A=0;for(p=0;p<O;p++)(64512&(g=x.charCodeAt(p)))==55296&&p+1<O&&(64512&(m=x.charCodeAt(p+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),p++),A+=g<128?1:g<2048?2:g<65536?3:4;for(c=l.uint8array?new Uint8Array(A):new Array(A),p=E=0;E<A;p++)(64512&(g=x.charCodeAt(p)))==55296&&p+1<O&&(64512&(m=x.charCodeAt(p+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),p++),g<128?c[E++]=g:(g<2048?c[E++]=192|g>>>6:(g<65536?c[E++]=224|g>>>12:(c[E++]=240|g>>>18,c[E++]=128|g>>>12&63),c[E++]=128|g>>>6&63),c[E++]=128|63&g);return c}(d)},i.utf8decode=function(d){return l.nodebuffer?a.transformTo("nodebuffer",d).toString("utf-8"):function(x){var c,g,m,p,E=x.length,O=new Array(2*E);for(c=g=0;c<E;)if((m=x[c++])<128)O[g++]=m;else if(4<(p=h[m]))O[g++]=65533,c+=p-1;else{for(m&=p===2?31:p===3?15:7;1<p&&c<E;)m=m<<6|63&x[c++],p--;1<p?O[g++]=65533:m<65536?O[g++]=m:(m-=65536,O[g++]=55296|m>>10&1023,O[g++]=56320|1023&m)}return O.length!==g&&(O.subarray?O=O.subarray(0,g):O.length=g),a.applyFromCharCode(O)}(d=a.transformTo(l.uint8array?"uint8array":"array",d))},a.inherits(y,s),y.prototype.processChunk=function(d){var x=a.transformTo(l.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var c=x;(x=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),x.set(c,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var g=function(p,E){var O;for((E=E||p.length)>p.length&&(E=p.length),O=E-1;0<=O&&(192&p[O])==128;)O--;return O<0||O===0?E:O+h[p[O]]>E?O:E}(x),m=x;g!==x.length&&(l.uint8array?(m=x.subarray(0,g),this.leftOver=x.subarray(g,x.length)):(m=x.slice(0,g),this.leftOver=x.slice(g,x.length))),this.push({data:i.utf8decode(m),meta:d.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=y,a.inherits(k,s),k.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=k},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,u,i){var a=t("./support"),l=t("./base64"),n=t("./nodejsUtils"),s=t("./external");function h(c){return c}function w(c,g){for(var m=0;m<c.length;++m)g[m]=255&c.charCodeAt(m);return g}t("setimmediate"),i.newBlob=function(c,g){i.checkSupport("blob");try{return new Blob([c],{type:g})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(c),m.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(c,g,m){var p=[],E=0,O=c.length;if(O<=m)return String.fromCharCode.apply(null,c);for(;E<O;)g==="array"||g==="nodebuffer"?p.push(String.fromCharCode.apply(null,c.slice(E,Math.min(E+m,O)))):p.push(String.fromCharCode.apply(null,c.subarray(E,Math.min(E+m,O)))),E+=m;return p.join("")},stringifyByChar:function(c){for(var g="",m=0;m<c.length;m++)g+=String.fromCharCode(c[m]);return g},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function k(c){var g=65536,m=i.getTypeOf(c),p=!0;if(m==="uint8array"?p=y.applyCanBeUsed.uint8array:m==="nodebuffer"&&(p=y.applyCanBeUsed.nodebuffer),p)for(;1<g;)try{return y.stringifyByChunk(c,m,g)}catch{g=Math.floor(g/2)}return y.stringifyByChar(c)}function d(c,g){for(var m=0;m<c.length;m++)g[m]=c[m];return g}i.applyFromCharCode=k;var x={};x.string={string:h,array:function(c){return w(c,new Array(c.length))},arraybuffer:function(c){return x.string.uint8array(c).buffer},uint8array:function(c){return w(c,new Uint8Array(c.length))},nodebuffer:function(c){return w(c,n.allocBuffer(c.length))}},x.array={string:k,array:h,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return n.newBufferFrom(c)}},x.arraybuffer={string:function(c){return k(new Uint8Array(c))},array:function(c){return d(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:h,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return n.newBufferFrom(new Uint8Array(c))}},x.uint8array={string:k,array:function(c){return d(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:h,nodebuffer:function(c){return n.newBufferFrom(c)}},x.nodebuffer={string:k,array:function(c){return d(c,new Array(c.length))},arraybuffer:function(c){return x.nodebuffer.uint8array(c).buffer},uint8array:function(c){return d(c,new Uint8Array(c.length))},nodebuffer:h},i.transformTo=function(c,g){if(g=g||"",!c)return g;i.checkSupport(c);var m=i.getTypeOf(g);return x[m][c](g)},i.resolve=function(c){for(var g=c.split("/"),m=[],p=0;p<g.length;p++){var E=g[p];E==="."||E===""&&p!==0&&p!==g.length-1||(E===".."?m.pop():m.push(E))}return m.join("/")},i.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":a.nodebuffer&&n.isBuffer(c)?"nodebuffer":a.uint8array&&c instanceof Uint8Array?"uint8array":a.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(c){if(!a[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(c){var g,m,p="";for(m=0;m<(c||"").length;m++)p+="\\x"+((g=c.charCodeAt(m))<16?"0":"")+g.toString(16).toUpperCase();return p},i.delay=function(c,g,m){setImmediate(function(){c.apply(m||null,g||[])})},i.inherits=function(c,g){function m(){}m.prototype=g.prototype,c.prototype=new m},i.extend=function(){var c,g,m={};for(c=0;c<arguments.length;c++)for(g in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],g)&&m[g]===void 0&&(m[g]=arguments[c][g]);return m},i.prepareContent=function(c,g,m,p,E){return s.Promise.resolve(g).then(function(O){return a.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new s.Promise(function(A,P){var T=new FileReader;T.onload=function(v){A(v.target.result)},T.onerror=function(v){P(v.target.error)},T.readAsArrayBuffer(O)}):O}).then(function(O){var A=i.getTypeOf(O);return A?(A==="arraybuffer"?O=i.transformTo("uint8array",O):A==="string"&&(E?O=l.decode(O):m&&p!==!0&&(O=function(P){return w(P,a.uint8array?new Uint8Array(P.length):new Array(P.length))}(O))),O):s.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,u,i){var a=t("./reader/readerFor"),l=t("./utils"),n=t("./signature"),s=t("./zipEntry"),h=t("./support");function w(y){this.files=[],this.loadOptions=y}w.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var k=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(k)+", expected "+l.pretty(y)+")")}},isSignature:function(y,k){var d=this.reader.index;this.reader.setIndex(y);var x=this.reader.readString(4)===k;return this.reader.setIndex(d),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),k=h.uint8array?"uint8array":"array",d=l.transformTo(k,y);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,k,d,x=this.zip64EndOfCentralSize-44;0<x;)y=this.reader.readInt(2),k=this.reader.readInt(4),d=this.reader.readData(k),this.zip64ExtensibleData[y]={id:y,length:k,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,k;for(y=0;y<this.files.length;y++)k=this.files[y],this.reader.setIndex(k.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),k.readLocalPart(this.reader),k.handleUTF8(),k.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(y=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var k=y;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var x=k-d;if(0<x)this.isSignature(k,n.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(y){this.reader=a(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,u,i){var a=t("./reader/readerFor"),l=t("./utils"),n=t("./compressedObject"),s=t("./crc32"),h=t("./utf8"),w=t("./compressions"),y=t("./support");function k(d,x){this.options=d,this.loadOptions=x}k.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var x,c;if(d.skip(22),this.fileNameLength=d.readInt(2),c=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(g){for(var m in w)if(Object.prototype.hasOwnProperty.call(w,m)&&w[m].magic===g)return w[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,x,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var x=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(x),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=a(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var x,c,g,m=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<m;)x=d.readInt(2),c=d.readInt(2),g=d.readData(c),this.extraFields[x]={id:x,length:c,value:g};d.setIndex(m)},handleUTF8:function(){var d=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var c=l.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var m=l.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var x=a(d.value);return x.readInt(1)!==1||s(this.fileName)!==x.readInt(4)?null:h.utf8decode(x.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var x=a(d.value);return x.readInt(1)!==1||s(this.fileComment)!==x.readInt(4)?null:h.utf8decode(x.readData(d.length-5))}return null}},u.exports=k},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,u,i){function a(x,c,g){this.name=x,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=c,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var l=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),s=t("./utf8"),h=t("./compressedObject"),w=t("./stream/GenericWorker");a.prototype={internalStream:function(x){var c=null,g="string";try{if(!x)throw new Error("No output type specified.");var m=(g=x.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),c=this._decompressWorker();var p=!this._dataBinary;p&&!m&&(c=c.pipe(new s.Utf8EncodeWorker)),!p&&m&&(c=c.pipe(new s.Utf8DecodeWorker))}catch(E){(c=new w("error")).error(E)}return new l(c,g,"")},async:function(x,c){return this.internalStream(x).accumulate(c)},nodeStream:function(x,c){return this.internalStream(x||"nodebuffer").toNodejsStream(c)},_compressWorker:function(x,c){if(this._data instanceof h&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new s.Utf8EncodeWorker)),h.createWorkerFrom(g,x,c)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof w?this._data:new n(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<y.length;d++)a.prototype[y[d]]=k;u.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,u,i){(function(a){var l,n,s=a.MutationObserver||a.WebKitMutationObserver;if(s){var h=0,w=new s(x),y=a.document.createTextNode("");w.observe(y,{characterData:!0}),l=function(){y.data=h=++h%2}}else if(a.setImmediate||a.MessageChannel===void 0)l="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var c=a.document.createElement("script");c.onreadystatechange=function(){x(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},a.document.documentElement.appendChild(c)}:function(){setTimeout(x,0)};else{var k=new a.MessageChannel;k.port1.onmessage=x,l=function(){k.port2.postMessage(0)}}var d=[];function x(){var c,g;n=!0;for(var m=d.length;m;){for(g=d,d=[],c=-1;++c<m;)g[c]();m=d.length}n=!1}u.exports=function(c){d.push(c)!==1||n||l()}}).call(this,typeof Lt<"u"?Lt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,u,i){var a=t("immediate");function l(){}var n={},s=["REJECTED"],h=["FULFILLED"],w=["PENDING"];function y(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,m!==l&&c(this,m)}function k(m,p,E){this.promise=m,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function d(m,p,E){a(function(){var O;try{O=p(E)}catch(A){return n.reject(m,A)}O===m?n.reject(m,new TypeError("Cannot resolve promise with itself")):n.resolve(m,O)})}function x(m){var p=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof p=="function")return function(){p.apply(m,arguments)}}function c(m,p){var E=!1;function O(T){E||(E=!0,n.reject(m,T))}function A(T){E||(E=!0,n.resolve(m,T))}var P=g(function(){p(A,O)});P.status==="error"&&O(P.value)}function g(m,p){var E={};try{E.value=m(p),E.status="success"}catch(O){E.status="error",E.value=O}return E}(u.exports=y).prototype.finally=function(m){if(typeof m!="function")return this;var p=this.constructor;return this.then(function(E){return p.resolve(m()).then(function(){return E})},function(E){return p.resolve(m()).then(function(){throw E})})},y.prototype.catch=function(m){return this.then(null,m)},y.prototype.then=function(m,p){if(typeof m!="function"&&this.state===h||typeof p!="function"&&this.state===s)return this;var E=new this.constructor(l);return this.state!==w?d(E,this.state===h?m:p,this.outcome):this.queue.push(new k(E,m,p)),E},k.prototype.callFulfilled=function(m){n.resolve(this.promise,m)},k.prototype.otherCallFulfilled=function(m){d(this.promise,this.onFulfilled,m)},k.prototype.callRejected=function(m){n.reject(this.promise,m)},k.prototype.otherCallRejected=function(m){d(this.promise,this.onRejected,m)},n.resolve=function(m,p){var E=g(x,p);if(E.status==="error")return n.reject(m,E.value);var O=E.value;if(O)c(m,O);else{m.state=h,m.outcome=p;for(var A=-1,P=m.queue.length;++A<P;)m.queue[A].callFulfilled(p)}return m},n.reject=function(m,p){m.state=s,m.outcome=p;for(var E=-1,O=m.queue.length;++E<O;)m.queue[E].callRejected(p);return m},y.resolve=function(m){return m instanceof this?m:n.resolve(new this(l),m)},y.reject=function(m){var p=new this(l);return n.reject(p,m)},y.all=function(m){var p=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=m.length,O=!1;if(!E)return this.resolve([]);for(var A=new Array(E),P=0,T=-1,v=new this(l);++T<E;)f(m[T],T);return v;function f(L,M){p.resolve(L).then(function(b){A[M]=b,++P!==E||O||(O=!0,n.resolve(v,A))},function(b){O||(O=!0,n.reject(v,b))})}},y.race=function(m){var p=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=m.length,O=!1;if(!E)return this.resolve([]);for(var A=-1,P=new this(l);++A<E;)T=m[A],p.resolve(T).then(function(v){O||(O=!0,n.resolve(P,v))},function(v){O||(O=!0,n.reject(P,v))});var T;return P}},{immediate:36}],38:[function(t,u,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),u.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,u,i){var a=t("./zlib/deflate"),l=t("./utils/common"),n=t("./utils/strings"),s=t("./zlib/messages"),h=t("./zlib/zstream"),w=Object.prototype.toString,y=0,k=-1,d=0,x=8;function c(m){if(!(this instanceof c))return new c(m);this.options=l.assign({level:k,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},m||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var E=a.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(E!==y)throw new Error(s[E]);if(p.header&&a.deflateSetHeader(this.strm,p.header),p.dictionary){var O;if(O=typeof p.dictionary=="string"?n.string2buf(p.dictionary):w.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(E=a.deflateSetDictionary(this.strm,O))!==y)throw new Error(s[E]);this._dict_set=!0}}function g(m,p){var E=new c(p);if(E.push(m,!0),E.err)throw E.msg||s[E.err];return E.result}c.prototype.push=function(m,p){var E,O,A=this.strm,P=this.options.chunkSize;if(this.ended)return!1;O=p===~~p?p:p===!0?4:0,typeof m=="string"?A.input=n.string2buf(m):w.call(m)==="[object ArrayBuffer]"?A.input=new Uint8Array(m):A.input=m,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new l.Buf8(P),A.next_out=0,A.avail_out=P),(E=a.deflate(A,O))!==1&&E!==y)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(l.shrinkBuf(A.output,A.next_out))):this.onData(l.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return O===4?(E=a.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===y):O!==2||(this.onEnd(y),!(A.avail_out=0))},c.prototype.onData=function(m){this.chunks.push(m)},c.prototype.onEnd=function(m){m===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Deflate=c,i.deflate=g,i.deflateRaw=function(m,p){return(p=p||{}).raw=!0,g(m,p)},i.gzip=function(m,p){return(p=p||{}).gzip=!0,g(m,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,u,i){var a=t("./zlib/inflate"),l=t("./utils/common"),n=t("./utils/strings"),s=t("./zlib/constants"),h=t("./zlib/messages"),w=t("./zlib/zstream"),y=t("./zlib/gzheader"),k=Object.prototype.toString;function d(c){if(!(this instanceof d))return new d(c);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},c||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||c&&c.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var m=a.inflateInit2(this.strm,g.windowBits);if(m!==s.Z_OK)throw new Error(h[m]);this.header=new y,a.inflateGetHeader(this.strm,this.header)}function x(c,g){var m=new d(g);if(m.push(c,!0),m.err)throw m.msg||h[m.err];return m.result}d.prototype.push=function(c,g){var m,p,E,O,A,P,T=this.strm,v=this.options.chunkSize,f=this.options.dictionary,L=!1;if(this.ended)return!1;p=g===~~g?g:g===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof c=="string"?T.input=n.binstring2buf(c):k.call(c)==="[object ArrayBuffer]"?T.input=new Uint8Array(c):T.input=c,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(v),T.next_out=0,T.avail_out=v),(m=a.inflate(T,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(P=typeof f=="string"?n.string2buf(f):k.call(f)==="[object ArrayBuffer]"?new Uint8Array(f):f,m=a.inflateSetDictionary(this.strm,P)),m===s.Z_BUF_ERROR&&L===!0&&(m=s.Z_OK,L=!1),m!==s.Z_STREAM_END&&m!==s.Z_OK)return this.onEnd(m),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&m!==s.Z_STREAM_END&&(T.avail_in!==0||p!==s.Z_FINISH&&p!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=n.utf8border(T.output,T.next_out),O=T.next_out-E,A=n.buf2string(T.output,E),T.next_out=O,T.avail_out=v-O,O&&l.arraySet(T.output,T.output,E,O,0),this.onData(A)):this.onData(l.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(L=!0)}while((0<T.avail_in||T.avail_out===0)&&m!==s.Z_STREAM_END);return m===s.Z_STREAM_END&&(p=s.Z_FINISH),p===s.Z_FINISH?(m=a.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===s.Z_OK):p!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(T.avail_out=0))},d.prototype.onData=function(c){this.chunks.push(c)},d.prototype.onEnd=function(c){c===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},i.Inflate=d,i.inflate=x,i.inflateRaw=function(c,g){return(g=g||{}).raw=!0,x(c,g)},i.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,u,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(s){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var w=h.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var y in w)w.hasOwnProperty(y)&&(s[y]=w[y])}}return s},i.shrinkBuf=function(s,h){return s.length===h?s:s.subarray?s.subarray(0,h):(s.length=h,s)};var l={arraySet:function(s,h,w,y,k){if(h.subarray&&s.subarray)s.set(h.subarray(w,w+y),k);else for(var d=0;d<y;d++)s[k+d]=h[w+d]},flattenChunks:function(s){var h,w,y,k,d,x;for(h=y=0,w=s.length;h<w;h++)y+=s[h].length;for(x=new Uint8Array(y),h=k=0,w=s.length;h<w;h++)d=s[h],x.set(d,k),k+=d.length;return x}},n={arraySet:function(s,h,w,y,k){for(var d=0;d<y;d++)s[k+d]=h[w+d]},flattenChunks:function(s){return[].concat.apply([],s)}};i.setTyped=function(s){s?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,l)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,n))},i.setTyped(a)},{}],42:[function(t,u,i){var a=t("./common"),l=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var s=new a.Buf8(256),h=0;h<256;h++)s[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function w(y,k){if(k<65537&&(y.subarray&&n||!y.subarray&&l))return String.fromCharCode.apply(null,a.shrinkBuf(y,k));for(var d="",x=0;x<k;x++)d+=String.fromCharCode(y[x]);return d}s[254]=s[254]=1,i.string2buf=function(y){var k,d,x,c,g,m=y.length,p=0;for(c=0;c<m;c++)(64512&(d=y.charCodeAt(c)))==55296&&c+1<m&&(64512&(x=y.charCodeAt(c+1)))==56320&&(d=65536+(d-55296<<10)+(x-56320),c++),p+=d<128?1:d<2048?2:d<65536?3:4;for(k=new a.Buf8(p),c=g=0;g<p;c++)(64512&(d=y.charCodeAt(c)))==55296&&c+1<m&&(64512&(x=y.charCodeAt(c+1)))==56320&&(d=65536+(d-55296<<10)+(x-56320),c++),d<128?k[g++]=d:(d<2048?k[g++]=192|d>>>6:(d<65536?k[g++]=224|d>>>12:(k[g++]=240|d>>>18,k[g++]=128|d>>>12&63),k[g++]=128|d>>>6&63),k[g++]=128|63&d);return k},i.buf2binstring=function(y){return w(y,y.length)},i.binstring2buf=function(y){for(var k=new a.Buf8(y.length),d=0,x=k.length;d<x;d++)k[d]=y.charCodeAt(d);return k},i.buf2string=function(y,k){var d,x,c,g,m=k||y.length,p=new Array(2*m);for(d=x=0;d<m;)if((c=y[d++])<128)p[x++]=c;else if(4<(g=s[c]))p[x++]=65533,d+=g-1;else{for(c&=g===2?31:g===3?15:7;1<g&&d<m;)c=c<<6|63&y[d++],g--;1<g?p[x++]=65533:c<65536?p[x++]=c:(c-=65536,p[x++]=55296|c>>10&1023,p[x++]=56320|1023&c)}return w(p,x)},i.utf8border=function(y,k){var d;for((k=k||y.length)>y.length&&(k=y.length),d=k-1;0<=d&&(192&y[d])==128;)d--;return d<0||d===0?k:d+s[y[d]]>k?d:k}},{"./common":41}],43:[function(t,u,i){u.exports=function(a,l,n,s){for(var h=65535&a|0,w=a>>>16&65535|0,y=0;n!==0;){for(n-=y=2e3<n?2e3:n;w=w+(h=h+l[s++]|0)|0,--y;);h%=65521,w%=65521}return h|w<<16|0}},{}],44:[function(t,u,i){u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,u,i){var a=function(){for(var l,n=[],s=0;s<256;s++){l=s;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;n[s]=l}return n}();u.exports=function(l,n,s,h){var w=a,y=h+s;l^=-1;for(var k=h;k<y;k++)l=l>>>8^w[255&(l^n[k])];return-1^l}},{}],46:[function(t,u,i){var a,l=t("../utils/common"),n=t("./trees"),s=t("./adler32"),h=t("./crc32"),w=t("./messages"),y=0,k=4,d=0,x=-2,c=-1,g=4,m=2,p=8,E=9,O=286,A=30,P=19,T=2*O+1,v=15,f=3,L=258,M=L+f+1,b=42,F=113,r=1,U=2,K=3,N=4;function et(e,j){return e.msg=w[j],j}function W(e){return(e<<1)-(4<e?9:0)}function nt(e){for(var j=e.length;0<=--j;)e[j]=0}function B(e){var j=e.state,R=j.pending;R>e.avail_out&&(R=e.avail_out),R!==0&&(l.arraySet(e.output,j.pending_buf,j.pending_out,R,e.next_out),e.next_out+=R,j.pending_out+=R,e.total_out+=R,e.avail_out-=R,j.pending-=R,j.pending===0&&(j.pending_out=0))}function I(e,j){n._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,j),e.block_start=e.strstart,B(e.strm)}function Q(e,j){e.pending_buf[e.pending++]=j}function V(e,j){e.pending_buf[e.pending++]=j>>>8&255,e.pending_buf[e.pending++]=255&j}function H(e,j){var R,S,_=e.max_chain_length,z=e.strstart,$=e.prev_length,G=e.nice_match,D=e.strstart>e.w_size-M?e.strstart-(e.w_size-M):0,Z=e.window,J=e.w_mask,Y=e.prev,rt=e.strstart+L,ct=Z[z+$-1],ot=Z[z+$];e.prev_length>=e.good_match&&(_>>=2),G>e.lookahead&&(G=e.lookahead);do if(Z[(R=j)+$]===ot&&Z[R+$-1]===ct&&Z[R]===Z[z]&&Z[++R]===Z[z+1]){z+=2,R++;do;while(Z[++z]===Z[++R]&&Z[++z]===Z[++R]&&Z[++z]===Z[++R]&&Z[++z]===Z[++R]&&Z[++z]===Z[++R]&&Z[++z]===Z[++R]&&Z[++z]===Z[++R]&&Z[++z]===Z[++R]&&z<rt);if(S=L-(rt-z),z=rt-L,$<S){if(e.match_start=j,G<=($=S))break;ct=Z[z+$-1],ot=Z[z+$]}}while((j=Y[j&J])>D&&--_!=0);return $<=e.lookahead?$:e.lookahead}function ut(e){var j,R,S,_,z,$,G,D,Z,J,Y=e.w_size;do{if(_=e.window_size-e.lookahead-e.strstart,e.strstart>=Y+(Y-M)){for(l.arraySet(e.window,e.window,Y,Y,0),e.match_start-=Y,e.strstart-=Y,e.block_start-=Y,j=R=e.hash_size;S=e.head[--j],e.head[j]=Y<=S?S-Y:0,--R;);for(j=R=Y;S=e.prev[--j],e.prev[j]=Y<=S?S-Y:0,--R;);_+=Y}if(e.strm.avail_in===0)break;if($=e.strm,G=e.window,D=e.strstart+e.lookahead,Z=_,J=void 0,J=$.avail_in,Z<J&&(J=Z),R=J===0?0:($.avail_in-=J,l.arraySet(G,$.input,$.next_in,J,D),$.state.wrap===1?$.adler=s($.adler,G,J,D):$.state.wrap===2&&($.adler=h($.adler,G,J,D)),$.next_in+=J,$.total_in+=J,J),e.lookahead+=R,e.lookahead+e.insert>=f)for(z=e.strstart-e.insert,e.ins_h=e.window[z],e.ins_h=(e.ins_h<<e.hash_shift^e.window[z+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[z+f-1])&e.hash_mask,e.prev[z&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=z,z++,e.insert--,!(e.lookahead+e.insert<f)););}while(e.lookahead<M&&e.strm.avail_in!==0)}function ht(e,j){for(var R,S;;){if(e.lookahead<M){if(ut(e),e.lookahead<M&&j===y)return r;if(e.lookahead===0)break}if(R=0,e.lookahead>=f&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),R!==0&&e.strstart-R<=e.w_size-M&&(e.match_length=H(e,R)),e.match_length>=f)if(S=n._tr_tally(e,e.strstart-e.match_start,e.match_length-f),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=f){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,--e.match_length!=0;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else S=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(S&&(I(e,!1),e.strm.avail_out===0))return r}return e.insert=e.strstart<f-1?e.strstart:f-1,j===k?(I(e,!0),e.strm.avail_out===0?K:N):e.last_lit&&(I(e,!1),e.strm.avail_out===0)?r:U}function it(e,j){for(var R,S,_;;){if(e.lookahead<M){if(ut(e),e.lookahead<M&&j===y)return r;if(e.lookahead===0)break}if(R=0,e.lookahead>=f&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=f-1,R!==0&&e.prev_length<e.max_lazy_match&&e.strstart-R<=e.w_size-M&&(e.match_length=H(e,R),e.match_length<=5&&(e.strategy===1||e.match_length===f&&4096<e.strstart-e.match_start)&&(e.match_length=f-1)),e.prev_length>=f&&e.match_length<=e.prev_length){for(_=e.strstart+e.lookahead-f,S=n._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-f),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=_&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+f-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),--e.prev_length!=0;);if(e.match_available=0,e.match_length=f-1,e.strstart++,S&&(I(e,!1),e.strm.avail_out===0))return r}else if(e.match_available){if((S=n._tr_tally(e,0,e.window[e.strstart-1]))&&I(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return r}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(S=n._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<f-1?e.strstart:f-1,j===k?(I(e,!0),e.strm.avail_out===0?K:N):e.last_lit&&(I(e,!1),e.strm.avail_out===0)?r:U}function X(e,j,R,S,_){this.good_length=e,this.max_lazy=j,this.nice_length=R,this.max_chain=S,this.func=_}function at(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*A+1)),this.bl_tree=new l.Buf16(2*(2*P+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(v+1),this.heap=new l.Buf16(2*O+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*O+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(e){var j;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(j=e.state).pending=0,j.pending_out=0,j.wrap<0&&(j.wrap=-j.wrap),j.status=j.wrap?b:F,e.adler=j.wrap===2?0:1,j.last_flush=y,n._tr_init(j),d):et(e,x)}function ft(e){var j=st(e);return j===d&&function(R){R.window_size=2*R.w_size,nt(R.head),R.max_lazy_match=a[R.level].max_lazy,R.good_match=a[R.level].good_length,R.nice_match=a[R.level].nice_length,R.max_chain_length=a[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=f-1,R.match_available=0,R.ins_h=0}(e.state),j}function lt(e,j,R,S,_,z){if(!e)return x;var $=1;if(j===c&&(j=6),S<0?($=0,S=-S):15<S&&($=2,S-=16),_<1||E<_||R!==p||S<8||15<S||j<0||9<j||z<0||g<z)return et(e,x);S===8&&(S=9);var G=new at;return(e.state=G).strm=e,G.wrap=$,G.gzhead=null,G.w_bits=S,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=_+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+f-1)/f),G.window=new l.Buf8(2*G.w_size),G.head=new l.Buf16(G.hash_size),G.prev=new l.Buf16(G.w_size),G.lit_bufsize=1<<_+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new l.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=j,G.strategy=z,G.method=R,ft(e)}a=[new X(0,0,0,0,function(e,j){var R=65535;for(R>e.pending_buf_size-5&&(R=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ut(e),e.lookahead===0&&j===y)return r;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var S=e.block_start+R;if((e.strstart===0||e.strstart>=S)&&(e.lookahead=e.strstart-S,e.strstart=S,I(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-M&&(I(e,!1),e.strm.avail_out===0))return r}return e.insert=0,j===k?(I(e,!0),e.strm.avail_out===0?K:N):(e.strstart>e.block_start&&(I(e,!1),e.strm.avail_out),r)}),new X(4,4,8,4,ht),new X(4,5,16,8,ht),new X(4,6,32,32,ht),new X(4,4,16,16,it),new X(8,16,32,32,it),new X(8,16,128,128,it),new X(8,32,128,256,it),new X(32,128,258,1024,it),new X(32,258,258,4096,it)],i.deflateInit=function(e,j){return lt(e,j,p,15,8,0)},i.deflateInit2=lt,i.deflateReset=ft,i.deflateResetKeep=st,i.deflateSetHeader=function(e,j){return e&&e.state?e.state.wrap!==2?x:(e.state.gzhead=j,d):x},i.deflate=function(e,j){var R,S,_,z;if(!e||!e.state||5<j||j<0)return e?et(e,x):x;if(S=e.state,!e.output||!e.input&&e.avail_in!==0||S.status===666&&j!==k)return et(e,e.avail_out===0?-5:x);if(S.strm=e,R=S.last_flush,S.last_flush=j,S.status===b)if(S.wrap===2)e.adler=0,Q(S,31),Q(S,139),Q(S,8),S.gzhead?(Q(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),Q(S,255&S.gzhead.time),Q(S,S.gzhead.time>>8&255),Q(S,S.gzhead.time>>16&255),Q(S,S.gzhead.time>>24&255),Q(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),Q(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(Q(S,255&S.gzhead.extra.length),Q(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(e.adler=h(e.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(Q(S,0),Q(S,0),Q(S,0),Q(S,0),Q(S,0),Q(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),Q(S,3),S.status=F);else{var $=p+(S.w_bits-8<<4)<<8;$|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&($|=32),$+=31-$%31,S.status=F,V(S,$),S.strstart!==0&&(V(S,e.adler>>>16),V(S,65535&e.adler)),e.adler=1}if(S.status===69)if(S.gzhead.extra){for(_=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>_&&(e.adler=h(e.adler,S.pending_buf,S.pending-_,_)),B(e),_=S.pending,S.pending!==S.pending_buf_size));)Q(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>_&&(e.adler=h(e.adler,S.pending_buf,S.pending-_,_)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){_=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>_&&(e.adler=h(e.adler,S.pending_buf,S.pending-_,_)),B(e),_=S.pending,S.pending===S.pending_buf_size)){z=1;break}z=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,Q(S,z)}while(z!==0);S.gzhead.hcrc&&S.pending>_&&(e.adler=h(e.adler,S.pending_buf,S.pending-_,_)),z===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){_=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>_&&(e.adler=h(e.adler,S.pending_buf,S.pending-_,_)),B(e),_=S.pending,S.pending===S.pending_buf_size)){z=1;break}z=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,Q(S,z)}while(z!==0);S.gzhead.hcrc&&S.pending>_&&(e.adler=h(e.adler,S.pending_buf,S.pending-_,_)),z===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&B(e),S.pending+2<=S.pending_buf_size&&(Q(S,255&e.adler),Q(S,e.adler>>8&255),e.adler=0,S.status=F)):S.status=F),S.pending!==0){if(B(e),e.avail_out===0)return S.last_flush=-1,d}else if(e.avail_in===0&&W(j)<=W(R)&&j!==k)return et(e,-5);if(S.status===666&&e.avail_in!==0)return et(e,-5);if(e.avail_in!==0||S.lookahead!==0||j!==y&&S.status!==666){var G=S.strategy===2?function(D,Z){for(var J;;){if(D.lookahead===0&&(ut(D),D.lookahead===0)){if(Z===y)return r;break}if(D.match_length=0,J=n._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,J&&(I(D,!1),D.strm.avail_out===0))return r}return D.insert=0,Z===k?(I(D,!0),D.strm.avail_out===0?K:N):D.last_lit&&(I(D,!1),D.strm.avail_out===0)?r:U}(S,j):S.strategy===3?function(D,Z){for(var J,Y,rt,ct,ot=D.window;;){if(D.lookahead<=L){if(ut(D),D.lookahead<=L&&Z===y)return r;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=f&&0<D.strstart&&(Y=ot[rt=D.strstart-1])===ot[++rt]&&Y===ot[++rt]&&Y===ot[++rt]){ct=D.strstart+L;do;while(Y===ot[++rt]&&Y===ot[++rt]&&Y===ot[++rt]&&Y===ot[++rt]&&Y===ot[++rt]&&Y===ot[++rt]&&Y===ot[++rt]&&Y===ot[++rt]&&rt<ct);D.match_length=L-(ct-rt),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=f?(J=n._tr_tally(D,1,D.match_length-f),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(J=n._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),J&&(I(D,!1),D.strm.avail_out===0))return r}return D.insert=0,Z===k?(I(D,!0),D.strm.avail_out===0?K:N):D.last_lit&&(I(D,!1),D.strm.avail_out===0)?r:U}(S,j):a[S.level].func(S,j);if(G!==K&&G!==N||(S.status=666),G===r||G===K)return e.avail_out===0&&(S.last_flush=-1),d;if(G===U&&(j===1?n._tr_align(S):j!==5&&(n._tr_stored_block(S,0,0,!1),j===3&&(nt(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),B(e),e.avail_out===0))return S.last_flush=-1,d}return j!==k?d:S.wrap<=0?1:(S.wrap===2?(Q(S,255&e.adler),Q(S,e.adler>>8&255),Q(S,e.adler>>16&255),Q(S,e.adler>>24&255),Q(S,255&e.total_in),Q(S,e.total_in>>8&255),Q(S,e.total_in>>16&255),Q(S,e.total_in>>24&255)):(V(S,e.adler>>>16),V(S,65535&e.adler)),B(e),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?d:1)},i.deflateEnd=function(e){var j;return e&&e.state?(j=e.state.status)!==b&&j!==69&&j!==73&&j!==91&&j!==103&&j!==F&&j!==666?et(e,x):(e.state=null,j===F?et(e,-3):d):x},i.deflateSetDictionary=function(e,j){var R,S,_,z,$,G,D,Z,J=j.length;if(!e||!e.state||(z=(R=e.state).wrap)===2||z===1&&R.status!==b||R.lookahead)return x;for(z===1&&(e.adler=s(e.adler,j,J,0)),R.wrap=0,J>=R.w_size&&(z===0&&(nt(R.head),R.strstart=0,R.block_start=0,R.insert=0),Z=new l.Buf8(R.w_size),l.arraySet(Z,j,J-R.w_size,R.w_size,0),j=Z,J=R.w_size),$=e.avail_in,G=e.next_in,D=e.input,e.avail_in=J,e.next_in=0,e.input=j,ut(R);R.lookahead>=f;){for(S=R.strstart,_=R.lookahead-(f-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[S+f-1])&R.hash_mask,R.prev[S&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=S,S++,--_;);R.strstart=S,R.lookahead=f-1,ut(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=f-1,R.match_available=0,e.next_in=G,e.input=D,e.avail_in=$,R.wrap=z,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,u,i){u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,u,i){u.exports=function(a,l){var n,s,h,w,y,k,d,x,c,g,m,p,E,O,A,P,T,v,f,L,M,b,F,r,U;n=a.state,s=a.next_in,r=a.input,h=s+(a.avail_in-5),w=a.next_out,U=a.output,y=w-(l-a.avail_out),k=w+(a.avail_out-257),d=n.dmax,x=n.wsize,c=n.whave,g=n.wnext,m=n.window,p=n.hold,E=n.bits,O=n.lencode,A=n.distcode,P=(1<<n.lenbits)-1,T=(1<<n.distbits)-1;t:do{E<15&&(p+=r[s++]<<E,E+=8,p+=r[s++]<<E,E+=8),v=O[p&P];e:for(;;){if(p>>>=f=v>>>24,E-=f,(f=v>>>16&255)===0)U[w++]=65535&v;else{if(!(16&f)){if(!(64&f)){v=O[(65535&v)+(p&(1<<f)-1)];continue e}if(32&f){n.mode=12;break t}a.msg="invalid literal/length code",n.mode=30;break t}L=65535&v,(f&=15)&&(E<f&&(p+=r[s++]<<E,E+=8),L+=p&(1<<f)-1,p>>>=f,E-=f),E<15&&(p+=r[s++]<<E,E+=8,p+=r[s++]<<E,E+=8),v=A[p&T];r:for(;;){if(p>>>=f=v>>>24,E-=f,!(16&(f=v>>>16&255))){if(!(64&f)){v=A[(65535&v)+(p&(1<<f)-1)];continue r}a.msg="invalid distance code",n.mode=30;break t}if(M=65535&v,E<(f&=15)&&(p+=r[s++]<<E,(E+=8)<f&&(p+=r[s++]<<E,E+=8)),d<(M+=p&(1<<f)-1)){a.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=f,E-=f,(f=w-y)<M){if(c<(f=M-f)&&n.sane){a.msg="invalid distance too far back",n.mode=30;break t}if(F=m,(b=0)===g){if(b+=x-f,f<L){for(L-=f;U[w++]=m[b++],--f;);b=w-M,F=U}}else if(g<f){if(b+=x+g-f,(f-=g)<L){for(L-=f;U[w++]=m[b++],--f;);if(b=0,g<L){for(L-=f=g;U[w++]=m[b++],--f;);b=w-M,F=U}}}else if(b+=g-f,f<L){for(L-=f;U[w++]=m[b++],--f;);b=w-M,F=U}for(;2<L;)U[w++]=F[b++],U[w++]=F[b++],U[w++]=F[b++],L-=3;L&&(U[w++]=F[b++],1<L&&(U[w++]=F[b++]))}else{for(b=w-M;U[w++]=U[b++],U[w++]=U[b++],U[w++]=U[b++],2<(L-=3););L&&(U[w++]=U[b++],1<L&&(U[w++]=U[b++]))}break}}break}}while(s<h&&w<k);s-=L=E>>3,p&=(1<<(E-=L<<3))-1,a.next_in=s,a.next_out=w,a.avail_in=s<h?h-s+5:5-(s-h),a.avail_out=w<k?k-w+257:257-(w-k),n.hold=p,n.bits=E}},{}],49:[function(t,u,i){var a=t("../utils/common"),l=t("./adler32"),n=t("./crc32"),s=t("./inffast"),h=t("./inftrees"),w=1,y=2,k=0,d=-2,x=1,c=852,g=592;function m(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(b){var F;return b&&b.state?(F=b.state,b.total_in=b.total_out=F.total=0,b.msg="",F.wrap&&(b.adler=1&F.wrap),F.mode=x,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new a.Buf32(c),F.distcode=F.distdyn=new a.Buf32(g),F.sane=1,F.back=-1,k):d}function O(b){var F;return b&&b.state?((F=b.state).wsize=0,F.whave=0,F.wnext=0,E(b)):d}function A(b,F){var r,U;return b&&b.state?(U=b.state,F<0?(r=0,F=-F):(r=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?d:(U.window!==null&&U.wbits!==F&&(U.window=null),U.wrap=r,U.wbits=F,O(b))):d}function P(b,F){var r,U;return b?(U=new p,(b.state=U).window=null,(r=A(b,F))!==k&&(b.state=null),r):d}var T,v,f=!0;function L(b){if(f){var F;for(T=new a.Buf32(512),v=new a.Buf32(32),F=0;F<144;)b.lens[F++]=8;for(;F<256;)b.lens[F++]=9;for(;F<280;)b.lens[F++]=7;for(;F<288;)b.lens[F++]=8;for(h(w,b.lens,0,288,T,0,b.work,{bits:9}),F=0;F<32;)b.lens[F++]=5;h(y,b.lens,0,32,v,0,b.work,{bits:5}),f=!1}b.lencode=T,b.lenbits=9,b.distcode=v,b.distbits=5}function M(b,F,r,U){var K,N=b.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new a.Buf8(N.wsize)),U>=N.wsize?(a.arraySet(N.window,F,r-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(U<(K=N.wsize-N.wnext)&&(K=U),a.arraySet(N.window,F,r-U,K,N.wnext),(U-=K)?(a.arraySet(N.window,F,r-U,U,0),N.wnext=U,N.whave=N.wsize):(N.wnext+=K,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=K))),0}i.inflateReset=O,i.inflateReset2=A,i.inflateResetKeep=E,i.inflateInit=function(b){return P(b,15)},i.inflateInit2=P,i.inflate=function(b,F){var r,U,K,N,et,W,nt,B,I,Q,V,H,ut,ht,it,X,at,st,ft,lt,e,j,R,S,_=0,z=new a.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return d;(r=b.state).mode===12&&(r.mode=13),et=b.next_out,K=b.output,nt=b.avail_out,N=b.next_in,U=b.input,W=b.avail_in,B=r.hold,I=r.bits,Q=W,V=nt,j=k;t:for(;;)switch(r.mode){case x:if(r.wrap===0){r.mode=13;break}for(;I<16;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(2&r.wrap&&B===35615){z[r.check=0]=255&B,z[1]=B>>>8&255,r.check=n(r.check,z,2,0),I=B=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&B)<<8)+(B>>8))%31){b.msg="incorrect header check",r.mode=30;break}if((15&B)!=8){b.msg="unknown compression method",r.mode=30;break}if(I-=4,e=8+(15&(B>>>=4)),r.wbits===0)r.wbits=e;else if(e>r.wbits){b.msg="invalid window size",r.mode=30;break}r.dmax=1<<e,b.adler=r.check=1,r.mode=512&B?10:12,I=B=0;break;case 2:for(;I<16;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(r.flags=B,(255&r.flags)!=8){b.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){b.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=B>>8&1),512&r.flags&&(z[0]=255&B,z[1]=B>>>8&255,r.check=n(r.check,z,2,0)),I=B=0,r.mode=3;case 3:for(;I<32;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}r.head&&(r.head.time=B),512&r.flags&&(z[0]=255&B,z[1]=B>>>8&255,z[2]=B>>>16&255,z[3]=B>>>24&255,r.check=n(r.check,z,4,0)),I=B=0,r.mode=4;case 4:for(;I<16;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}r.head&&(r.head.xflags=255&B,r.head.os=B>>8),512&r.flags&&(z[0]=255&B,z[1]=B>>>8&255,r.check=n(r.check,z,2,0)),I=B=0,r.mode=5;case 5:if(1024&r.flags){for(;I<16;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}r.length=B,r.head&&(r.head.extra_len=B),512&r.flags&&(z[0]=255&B,z[1]=B>>>8&255,r.check=n(r.check,z,2,0)),I=B=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(W<(H=r.length)&&(H=W),H&&(r.head&&(e=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),a.arraySet(r.head.extra,U,N,H,e)),512&r.flags&&(r.check=n(r.check,U,H,N)),W-=H,N+=H,r.length-=H),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(W===0)break t;for(H=0;e=U[N+H++],r.head&&e&&r.length<65536&&(r.head.name+=String.fromCharCode(e)),e&&H<W;);if(512&r.flags&&(r.check=n(r.check,U,H,N)),W-=H,N+=H,e)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(W===0)break t;for(H=0;e=U[N+H++],r.head&&e&&r.length<65536&&(r.head.comment+=String.fromCharCode(e)),e&&H<W;);if(512&r.flags&&(r.check=n(r.check,U,H,N)),W-=H,N+=H,e)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;I<16;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(B!==(65535&r.check)){b.msg="header crc mismatch",r.mode=30;break}I=B=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),b.adler=r.check=0,r.mode=12;break;case 10:for(;I<32;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}b.adler=r.check=m(B),I=B=0,r.mode=11;case 11:if(r.havedict===0)return b.next_out=et,b.avail_out=nt,b.next_in=N,b.avail_in=W,r.hold=B,r.bits=I,2;b.adler=r.check=1,r.mode=12;case 12:if(F===5||F===6)break t;case 13:if(r.last){B>>>=7&I,I-=7&I,r.mode=27;break}for(;I<3;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}switch(r.last=1&B,I-=1,3&(B>>>=1)){case 0:r.mode=14;break;case 1:if(L(r),r.mode=20,F!==6)break;B>>>=2,I-=2;break t;case 2:r.mode=17;break;case 3:b.msg="invalid block type",r.mode=30}B>>>=2,I-=2;break;case 14:for(B>>>=7&I,I-=7&I;I<32;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if((65535&B)!=(B>>>16^65535)){b.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&B,I=B=0,r.mode=15,F===6)break t;case 15:r.mode=16;case 16:if(H=r.length){if(W<H&&(H=W),nt<H&&(H=nt),H===0)break t;a.arraySet(K,U,N,H,et),W-=H,N+=H,nt-=H,et+=H,r.length-=H;break}r.mode=12;break;case 17:for(;I<14;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(r.nlen=257+(31&B),B>>>=5,I-=5,r.ndist=1+(31&B),B>>>=5,I-=5,r.ncode=4+(15&B),B>>>=4,I-=4,286<r.nlen||30<r.ndist){b.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;I<3;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}r.lens[$[r.have++]]=7&B,B>>>=3,I-=3}for(;r.have<19;)r.lens[$[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},j=h(0,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,j){b.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;X=(_=r.lencode[B&(1<<r.lenbits)-1])>>>16&255,at=65535&_,!((it=_>>>24)<=I);){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(at<16)B>>>=it,I-=it,r.lens[r.have++]=at;else{if(at===16){for(S=it+2;I<S;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(B>>>=it,I-=it,r.have===0){b.msg="invalid bit length repeat",r.mode=30;break}e=r.lens[r.have-1],H=3+(3&B),B>>>=2,I-=2}else if(at===17){for(S=it+3;I<S;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}I-=it,e=0,H=3+(7&(B>>>=it)),B>>>=3,I-=3}else{for(S=it+7;I<S;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}I-=it,e=0,H=11+(127&(B>>>=it)),B>>>=7,I-=7}if(r.have+H>r.nlen+r.ndist){b.msg="invalid bit length repeat",r.mode=30;break}for(;H--;)r.lens[r.have++]=e}}if(r.mode===30)break;if(r.lens[256]===0){b.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,R={bits:r.lenbits},j=h(w,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,j){b.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},j=h(y,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,j){b.msg="invalid distances set",r.mode=30;break}if(r.mode=20,F===6)break t;case 20:r.mode=21;case 21:if(6<=W&&258<=nt){b.next_out=et,b.avail_out=nt,b.next_in=N,b.avail_in=W,r.hold=B,r.bits=I,s(b,V),et=b.next_out,K=b.output,nt=b.avail_out,N=b.next_in,U=b.input,W=b.avail_in,B=r.hold,I=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;X=(_=r.lencode[B&(1<<r.lenbits)-1])>>>16&255,at=65535&_,!((it=_>>>24)<=I);){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(X&&!(240&X)){for(st=it,ft=X,lt=at;X=(_=r.lencode[lt+((B&(1<<st+ft)-1)>>st)])>>>16&255,at=65535&_,!(st+(it=_>>>24)<=I);){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}B>>>=st,I-=st,r.back+=st}if(B>>>=it,I-=it,r.back+=it,r.length=at,X===0){r.mode=26;break}if(32&X){r.back=-1,r.mode=12;break}if(64&X){b.msg="invalid literal/length code",r.mode=30;break}r.extra=15&X,r.mode=22;case 22:if(r.extra){for(S=r.extra;I<S;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}r.length+=B&(1<<r.extra)-1,B>>>=r.extra,I-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;X=(_=r.distcode[B&(1<<r.distbits)-1])>>>16&255,at=65535&_,!((it=_>>>24)<=I);){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(!(240&X)){for(st=it,ft=X,lt=at;X=(_=r.distcode[lt+((B&(1<<st+ft)-1)>>st)])>>>16&255,at=65535&_,!(st+(it=_>>>24)<=I);){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}B>>>=st,I-=st,r.back+=st}if(B>>>=it,I-=it,r.back+=it,64&X){b.msg="invalid distance code",r.mode=30;break}r.offset=at,r.extra=15&X,r.mode=24;case 24:if(r.extra){for(S=r.extra;I<S;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}r.offset+=B&(1<<r.extra)-1,B>>>=r.extra,I-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){b.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(nt===0)break t;if(H=V-nt,r.offset>H){if((H=r.offset-H)>r.whave&&r.sane){b.msg="invalid distance too far back",r.mode=30;break}ut=H>r.wnext?(H-=r.wnext,r.wsize-H):r.wnext-H,H>r.length&&(H=r.length),ht=r.window}else ht=K,ut=et-r.offset,H=r.length;for(nt<H&&(H=nt),nt-=H,r.length-=H;K[et++]=ht[ut++],--H;);r.length===0&&(r.mode=21);break;case 26:if(nt===0)break t;K[et++]=r.length,nt--,r.mode=21;break;case 27:if(r.wrap){for(;I<32;){if(W===0)break t;W--,B|=U[N++]<<I,I+=8}if(V-=nt,b.total_out+=V,r.total+=V,V&&(b.adler=r.check=r.flags?n(r.check,K,V,et-V):l(r.check,K,V,et-V)),V=nt,(r.flags?B:m(B))!==r.check){b.msg="incorrect data check",r.mode=30;break}I=B=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;I<32;){if(W===0)break t;W--,B+=U[N++]<<I,I+=8}if(B!==(4294967295&r.total)){b.msg="incorrect length check",r.mode=30;break}I=B=0}r.mode=29;case 29:j=1;break t;case 30:j=-3;break t;case 31:return-4;case 32:default:return d}return b.next_out=et,b.avail_out=nt,b.next_in=N,b.avail_in=W,r.hold=B,r.bits=I,(r.wsize||V!==b.avail_out&&r.mode<30&&(r.mode<27||F!==4))&&M(b,b.output,b.next_out,V-b.avail_out)?(r.mode=31,-4):(Q-=b.avail_in,V-=b.avail_out,b.total_in+=Q,b.total_out+=V,r.total+=V,r.wrap&&V&&(b.adler=r.check=r.flags?n(r.check,K,V,b.next_out-V):l(r.check,K,V,b.next_out-V)),b.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(Q==0&&V===0||F===4)&&j===k&&(j=-5),j)},i.inflateEnd=function(b){if(!b||!b.state)return d;var F=b.state;return F.window&&(F.window=null),b.state=null,k},i.inflateGetHeader=function(b,F){var r;return b&&b.state&&2&(r=b.state).wrap?((r.head=F).done=!1,k):d},i.inflateSetDictionary=function(b,F){var r,U=F.length;return b&&b.state?(r=b.state).wrap!==0&&r.mode!==11?d:r.mode===11&&l(1,F,U,0)!==r.check?-3:M(b,F,U,U)?(r.mode=31,-4):(r.havedict=1,k):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,u,i){var a=t("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(w,y,k,d,x,c,g,m){var p,E,O,A,P,T,v,f,L,M=m.bits,b=0,F=0,r=0,U=0,K=0,N=0,et=0,W=0,nt=0,B=0,I=null,Q=0,V=new a.Buf16(16),H=new a.Buf16(16),ut=null,ht=0;for(b=0;b<=15;b++)V[b]=0;for(F=0;F<d;F++)V[y[k+F]]++;for(K=M,U=15;1<=U&&V[U]===0;U--);if(U<K&&(K=U),U===0)return x[c++]=20971520,x[c++]=20971520,m.bits=1,0;for(r=1;r<U&&V[r]===0;r++);for(K<r&&(K=r),b=W=1;b<=15;b++)if(W<<=1,(W-=V[b])<0)return-1;if(0<W&&(w===0||U!==1))return-1;for(H[1]=0,b=1;b<15;b++)H[b+1]=H[b]+V[b];for(F=0;F<d;F++)y[k+F]!==0&&(g[H[y[k+F]]++]=F);if(T=w===0?(I=ut=g,19):w===1?(I=l,Q-=257,ut=n,ht-=257,256):(I=s,ut=h,-1),b=r,P=c,et=F=B=0,O=-1,A=(nt=1<<(N=K))-1,w===1&&852<nt||w===2&&592<nt)return 1;for(;;){for(v=b-et,L=g[F]<T?(f=0,g[F]):g[F]>T?(f=ut[ht+g[F]],I[Q+g[F]]):(f=96,0),p=1<<b-et,r=E=1<<N;x[P+(B>>et)+(E-=p)]=v<<24|f<<16|L|0,E!==0;);for(p=1<<b-1;B&p;)p>>=1;if(p!==0?(B&=p-1,B+=p):B=0,F++,--V[b]==0){if(b===U)break;b=y[k+g[F]]}if(K<b&&(B&A)!==O){for(et===0&&(et=K),P+=r,W=1<<(N=b-et);N+et<U&&!((W-=V[N+et])<=0);)N++,W<<=1;if(nt+=1<<N,w===1&&852<nt||w===2&&592<nt)return 1;x[O=B&A]=K<<24|N<<16|P-c|0}}return B!==0&&(x[P+B]=b-et<<24|64<<16|0),m.bits=K,0}},{"../utils/common":41}],51:[function(t,u,i){u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,u,i){var a=t("../utils/common"),l=0,n=1;function s(_){for(var z=_.length;0<=--z;)_[z]=0}var h=0,w=29,y=256,k=y+1+w,d=30,x=19,c=2*k+1,g=15,m=16,p=7,E=256,O=16,A=17,P=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(k+2));s(M);var b=new Array(2*d);s(b);var F=new Array(512);s(F);var r=new Array(256);s(r);var U=new Array(w);s(U);var K,N,et,W=new Array(d);function nt(_,z,$,G,D){this.static_tree=_,this.extra_bits=z,this.extra_base=$,this.elems=G,this.max_length=D,this.has_stree=_&&_.length}function B(_,z){this.dyn_tree=_,this.max_code=0,this.stat_desc=z}function I(_){return _<256?F[_]:F[256+(_>>>7)]}function Q(_,z){_.pending_buf[_.pending++]=255&z,_.pending_buf[_.pending++]=z>>>8&255}function V(_,z,$){_.bi_valid>m-$?(_.bi_buf|=z<<_.bi_valid&65535,Q(_,_.bi_buf),_.bi_buf=z>>m-_.bi_valid,_.bi_valid+=$-m):(_.bi_buf|=z<<_.bi_valid&65535,_.bi_valid+=$)}function H(_,z,$){V(_,$[2*z],$[2*z+1])}function ut(_,z){for(var $=0;$|=1&_,_>>>=1,$<<=1,0<--z;);return $>>>1}function ht(_,z,$){var G,D,Z=new Array(g+1),J=0;for(G=1;G<=g;G++)Z[G]=J=J+$[G-1]<<1;for(D=0;D<=z;D++){var Y=_[2*D+1];Y!==0&&(_[2*D]=ut(Z[Y]++,Y))}}function it(_){var z;for(z=0;z<k;z++)_.dyn_ltree[2*z]=0;for(z=0;z<d;z++)_.dyn_dtree[2*z]=0;for(z=0;z<x;z++)_.bl_tree[2*z]=0;_.dyn_ltree[2*E]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function X(_){8<_.bi_valid?Q(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function at(_,z,$,G){var D=2*z,Z=2*$;return _[D]<_[Z]||_[D]===_[Z]&&G[z]<=G[$]}function st(_,z,$){for(var G=_.heap[$],D=$<<1;D<=_.heap_len&&(D<_.heap_len&&at(z,_.heap[D+1],_.heap[D],_.depth)&&D++,!at(z,G,_.heap[D],_.depth));)_.heap[$]=_.heap[D],$=D,D<<=1;_.heap[$]=G}function ft(_,z,$){var G,D,Z,J,Y=0;if(_.last_lit!==0)for(;G=_.pending_buf[_.d_buf+2*Y]<<8|_.pending_buf[_.d_buf+2*Y+1],D=_.pending_buf[_.l_buf+Y],Y++,G===0?H(_,D,z):(H(_,(Z=r[D])+y+1,z),(J=T[Z])!==0&&V(_,D-=U[Z],J),H(_,Z=I(--G),$),(J=v[Z])!==0&&V(_,G-=W[Z],J)),Y<_.last_lit;);H(_,E,z)}function lt(_,z){var $,G,D,Z=z.dyn_tree,J=z.stat_desc.static_tree,Y=z.stat_desc.has_stree,rt=z.stat_desc.elems,ct=-1;for(_.heap_len=0,_.heap_max=c,$=0;$<rt;$++)Z[2*$]!==0?(_.heap[++_.heap_len]=ct=$,_.depth[$]=0):Z[2*$+1]=0;for(;_.heap_len<2;)Z[2*(D=_.heap[++_.heap_len]=ct<2?++ct:0)]=1,_.depth[D]=0,_.opt_len--,Y&&(_.static_len-=J[2*D+1]);for(z.max_code=ct,$=_.heap_len>>1;1<=$;$--)st(_,Z,$);for(D=rt;$=_.heap[1],_.heap[1]=_.heap[_.heap_len--],st(_,Z,1),G=_.heap[1],_.heap[--_.heap_max]=$,_.heap[--_.heap_max]=G,Z[2*D]=Z[2*$]+Z[2*G],_.depth[D]=(_.depth[$]>=_.depth[G]?_.depth[$]:_.depth[G])+1,Z[2*$+1]=Z[2*G+1]=D,_.heap[1]=D++,st(_,Z,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(ot,gt){var Tt,bt,yt,pt,kt,jt,Ot=gt.dyn_tree,le=gt.max_code,De=gt.stat_desc.static_tree,Fe=gt.stat_desc.has_stree,Re=gt.stat_desc.extra_bits,de=gt.stat_desc.extra_base,Zt=gt.stat_desc.max_length,Xt=0;for(pt=0;pt<=g;pt++)ot.bl_count[pt]=0;for(Ot[2*ot.heap[ot.heap_max]+1]=0,Tt=ot.heap_max+1;Tt<c;Tt++)Zt<(pt=Ot[2*Ot[2*(bt=ot.heap[Tt])+1]+1]+1)&&(pt=Zt,Xt++),Ot[2*bt+1]=pt,le<bt||(ot.bl_count[pt]++,kt=0,de<=bt&&(kt=Re[bt-de]),jt=Ot[2*bt],ot.opt_len+=jt*(pt+kt),Fe&&(ot.static_len+=jt*(De[2*bt+1]+kt)));if(Xt!==0){do{for(pt=Zt-1;ot.bl_count[pt]===0;)pt--;ot.bl_count[pt]--,ot.bl_count[pt+1]+=2,ot.bl_count[Zt]--,Xt-=2}while(0<Xt);for(pt=Zt;pt!==0;pt--)for(bt=ot.bl_count[pt];bt!==0;)le<(yt=ot.heap[--Tt])||(Ot[2*yt+1]!==pt&&(ot.opt_len+=(pt-Ot[2*yt+1])*Ot[2*yt],Ot[2*yt+1]=pt),bt--)}}(_,z),ht(Z,ct,_.bl_count)}function e(_,z,$){var G,D,Z=-1,J=z[1],Y=0,rt=7,ct=4;for(J===0&&(rt=138,ct=3),z[2*($+1)+1]=65535,G=0;G<=$;G++)D=J,J=z[2*(G+1)+1],++Y<rt&&D===J||(Y<ct?_.bl_tree[2*D]+=Y:D!==0?(D!==Z&&_.bl_tree[2*D]++,_.bl_tree[2*O]++):Y<=10?_.bl_tree[2*A]++:_.bl_tree[2*P]++,Z=D,ct=(Y=0)===J?(rt=138,3):D===J?(rt=6,3):(rt=7,4))}function j(_,z,$){var G,D,Z=-1,J=z[1],Y=0,rt=7,ct=4;for(J===0&&(rt=138,ct=3),G=0;G<=$;G++)if(D=J,J=z[2*(G+1)+1],!(++Y<rt&&D===J)){if(Y<ct)for(;H(_,D,_.bl_tree),--Y!=0;);else D!==0?(D!==Z&&(H(_,D,_.bl_tree),Y--),H(_,O,_.bl_tree),V(_,Y-3,2)):Y<=10?(H(_,A,_.bl_tree),V(_,Y-3,3)):(H(_,P,_.bl_tree),V(_,Y-11,7));Z=D,ct=(Y=0)===J?(rt=138,3):D===J?(rt=6,3):(rt=7,4)}}s(W);var R=!1;function S(_,z,$,G){V(_,(h<<1)+(G?1:0),3),function(D,Z,J,Y){X(D),Y&&(Q(D,J),Q(D,~J)),a.arraySet(D.pending_buf,D.window,Z,J,D.pending),D.pending+=J}(_,z,$,!0)}i._tr_init=function(_){R||(function(){var z,$,G,D,Z,J=new Array(g+1);for(D=G=0;D<w-1;D++)for(U[D]=G,z=0;z<1<<T[D];z++)r[G++]=D;for(r[G-1]=D,D=Z=0;D<16;D++)for(W[D]=Z,z=0;z<1<<v[D];z++)F[Z++]=D;for(Z>>=7;D<d;D++)for(W[D]=Z<<7,z=0;z<1<<v[D]-7;z++)F[256+Z++]=D;for($=0;$<=g;$++)J[$]=0;for(z=0;z<=143;)M[2*z+1]=8,z++,J[8]++;for(;z<=255;)M[2*z+1]=9,z++,J[9]++;for(;z<=279;)M[2*z+1]=7,z++,J[7]++;for(;z<=287;)M[2*z+1]=8,z++,J[8]++;for(ht(M,k+1,J),z=0;z<d;z++)b[2*z+1]=5,b[2*z]=ut(z,5);K=new nt(M,T,y+1,k,g),N=new nt(b,v,0,d,g),et=new nt(new Array(0),f,0,x,p)}(),R=!0),_.l_desc=new B(_.dyn_ltree,K),_.d_desc=new B(_.dyn_dtree,N),_.bl_desc=new B(_.bl_tree,et),_.bi_buf=0,_.bi_valid=0,it(_)},i._tr_stored_block=S,i._tr_flush_block=function(_,z,$,G){var D,Z,J=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(Y){var rt,ct=4093624447;for(rt=0;rt<=31;rt++,ct>>>=1)if(1&ct&&Y.dyn_ltree[2*rt]!==0)return l;if(Y.dyn_ltree[18]!==0||Y.dyn_ltree[20]!==0||Y.dyn_ltree[26]!==0)return n;for(rt=32;rt<y;rt++)if(Y.dyn_ltree[2*rt]!==0)return n;return l}(_)),lt(_,_.l_desc),lt(_,_.d_desc),J=function(Y){var rt;for(e(Y,Y.dyn_ltree,Y.l_desc.max_code),e(Y,Y.dyn_dtree,Y.d_desc.max_code),lt(Y,Y.bl_desc),rt=x-1;3<=rt&&Y.bl_tree[2*L[rt]+1]===0;rt--);return Y.opt_len+=3*(rt+1)+5+5+4,rt}(_),D=_.opt_len+3+7>>>3,(Z=_.static_len+3+7>>>3)<=D&&(D=Z)):D=Z=$+5,$+4<=D&&z!==-1?S(_,z,$,G):_.strategy===4||Z===D?(V(_,2+(G?1:0),3),ft(_,M,b)):(V(_,4+(G?1:0),3),function(Y,rt,ct,ot){var gt;for(V(Y,rt-257,5),V(Y,ct-1,5),V(Y,ot-4,4),gt=0;gt<ot;gt++)V(Y,Y.bl_tree[2*L[gt]+1],3);j(Y,Y.dyn_ltree,rt-1),j(Y,Y.dyn_dtree,ct-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,J+1),ft(_,_.dyn_ltree,_.dyn_dtree)),it(_),G&&X(_)},i._tr_tally=function(_,z,$){return _.pending_buf[_.d_buf+2*_.last_lit]=z>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&z,_.pending_buf[_.l_buf+_.last_lit]=255&$,_.last_lit++,z===0?_.dyn_ltree[2*$]++:(_.matches++,z--,_.dyn_ltree[2*(r[$]+y+1)]++,_.dyn_dtree[2*I(z)]++),_.last_lit===_.lit_bufsize-1},i._tr_align=function(_){V(_,2,3),H(_,E,M),function(z){z.bi_valid===16?(Q(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(t,u,i){u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,u,i){(function(a){(function(l,n){if(!l.setImmediate){var s,h,w,y,k=1,d={},x=!1,c=l.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(l);g=g&&g.setTimeout?g:l,s={}.toString.call(l.process)==="[object process]"?function(O){process.nextTick(function(){p(O)})}:function(){if(l.postMessage&&!l.importScripts){var O=!0,A=l.onmessage;return l.onmessage=function(){O=!1},l.postMessage("","*"),l.onmessage=A,O}}()?(y="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",E,!1):l.attachEvent("onmessage",E),function(O){l.postMessage(y+O,"*")}):l.MessageChannel?((w=new MessageChannel).port1.onmessage=function(O){p(O.data)},function(O){w.port2.postMessage(O)}):c&&"onreadystatechange"in c.createElement("script")?(h=c.documentElement,function(O){var A=c.createElement("script");A.onreadystatechange=function(){p(O),A.onreadystatechange=null,h.removeChild(A),A=null},h.appendChild(A)}):function(O){setTimeout(p,0,O)},g.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var A=new Array(arguments.length-1),P=0;P<A.length;P++)A[P]=arguments[P+1];var T={callback:O,args:A};return d[k]=T,s(k),k++},g.clearImmediate=m}function m(O){delete d[O]}function p(O){if(x)setTimeout(p,0,O);else{var A=d[O];if(A){x=!0;try{(function(P){var T=P.callback,v=P.args;switch(v.length){case 0:T();break;case 1:T(v[0]);break;case 2:T(v[0],v[1]);break;case 3:T(v[0],v[1],v[2]);break;default:T.apply(n,v)}})(A)}finally{m(O),x=!1}}}}function E(O){O.source===l&&typeof O.data=="string"&&O.data.indexOf(y)===0&&p(+O.data.slice(y.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Lt<"u"?Lt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Oe);var Ze=Oe.exports;const He=Ce(Ze),Dt=Pe("group",{state:()=>({campaignName:"",userInfoListTest:[],groupList:[],smsGroupList:[],subIdUserMap:new Map,twmIdUserMap:new Map,phoneNumberUserMap:new Map,phoneNumberSentSet:new Set,userArgs:[]}),getters:{},actions:{addUser(C,o,t,u){let i=this.twmIdUserMap.get(C);return i||(i=new $e(C,o,t,u),this.twmIdUserMap.set(C,i)),o&&o.length>0&&this.subIdUserMap.set(o,i),i},addUserTest(C,o,t){const u=this.addUser(C,o,t);return this.userInfoListTest.push(u),u},refreshFilted(){if(console.log(`[Store] Refresh Group ${this.smsGroupList.length}`),!this.smsGroupList)return;const C=new Set,o=new Set;for(let t=0;t<this.smsGroupList.length;t++){const u=this.smsGroupList[t];console.log(`[Store] Refresh ${t+1} Group, ${u.name}`),u.smsTwmIdListFilted.length=0,u.smsPhoneNumberFilted.length=0;const i=u.smsTwmIdList;for(let a=0;a<i.length;a++){const l=i[a],n=this.twmIdUserMap.get(l);if(n&&n.phoneNumber&&n.phoneNumber.length>0){if(this.phoneNumberSentSet.has(n.phoneNumber))continue;o.has(n.phoneNumber)||(o.add(n.phoneNumber),u.smsPhoneNumberFilted.push(n.phoneNumber))}C.has(l)||(C.add(l),u.smsTwmIdListFilted.push(l))}}},partition(C,o){const t=[];for(let u=0;u<C.length;u+=o){const i=C.slice(u,u+o);t.push(i)}return t},downloadFile(C,o){let t;o.toLowerCase().endsWith(".txt")?t="text/plain;charset=utf-8":o.toLowerCase().endsWith(".csv")?t="text/csv":o.toLowerCase().endsWith(".zip")?t="application/zip":t="application/octet-stream";const u=new Blob([C],{type:t});this.downloadBlob(u,o)},downloadBlob(C,o){Ye.saveAs(C,o)},downloadZip(C,o){const t=new He;for(let i=0;i<o.length;i++){const a=o[i];t.file(a.fileName,a.data)}const u=`[GroupStore] compressed: ${C}`;console.time(u),t.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}).then(i=>{console.timeEnd(u),this.downloadBlob(i,C)})}}}),qe={class:"ta-file-wrapper"},Ve={key:0,class:"hint"},Xe=zt({__name:"TaFile",setup(C){const o=Dt(),t=xt([]),u=xt(),i=xt(0);Mt(t,()=>{u.value=[],i.value=0,o.userArgs=[],t.value.forEach(n=>a(n))});const a=n=>{Bt.parse(n,{header:!0,skipEmptyLines:!0,transformHeader:(s,h)=>(console.log(`Header: ${h}`,s),s==="特定用戶名單(TAMI專用)"?"groupName":s==="Subscr Id"?"subId":s==="台灣大會員編號"?"twmId":(s.startsWith('"')||o.userArgs.push(s),s)),complete:s=>{if(s.errors.length>0){alert("Parse Error");return}console.log(`[TaFile] add ${s.data.length} Users begin`),i.value+=s.data.length;for(let h=0;h<s.data.length;h++){const w=s.data[h],y={};for(let k=0;k<o.userArgs.length;k++){const d=o.userArgs[k];y[d]=w[d]}o.addUser(w.twmId,w.subId,void 0,y)}console.log(`[TaFile] add ${s.data.length} Users Complete`),u.value=l(s.data),o.groupList=u.value,console.log(`[TaFile] complete ${o.groupList.length} TaGroup`)}})},l=n=>{const s=new Map;return n.forEach(h=>{let w;s.has(h.groupName)?w=s.get(h.groupName):(w=new oe(h.groupName),s.set(h.groupName,w)),w==null||w.addTwmId(h.twmId)}),Array.from(s.values())};return(n,s)=>{const h=Vt;return _t(),Ct("div",qe,[q(h,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=w=>t.value=w),label:"受眾 (BOE 匯出 csv)",accept:"text/csv",multiple:""},null,8,["modelValue"]),i.value>0?(_t(),Ct("small",Ve," 載入 "+wt(St(o).groupList.length)+" 群, "+wt(i.value)+" 筆記錄, "+wt(St(o).userArgs.length)+" 參數 ",1)):Pt("",!0)])}}});const Ke={class:"phone-number-file-wrapper"},Qe={key:0,class:"hint"},Je=zt({__name:"PhoneNumberFile",setup(C){const o=Dt(),t=xt([]),u=xt(0),i=xt(0);Mt(t,()=>{u.value=0,i.value=0,t.value.forEach(l=>a(l))});const a=l=>{Bt.parse(l,{header:!0,skipEmptyLines:!0,encoding:"big5",transformHeader:(n,s)=>(console.log(`Header: ${s}`,n),n==="門號"?"phoneNumber":n==="SUBSCR_ID"?"subId":n),complete:n=>{if(n.errors.length>0){alert("Parse Error");return}i.value+=n.data.length,n.data.forEach(s=>{const h=o.subIdUserMap.get(s.subId);h&&(h.phoneNumber=s.phoneNumber,o.phoneNumberUserMap.set(s.phoneNumber,h))}),console.log(`[PhoneNumberFile] read ${n.data.length} subid <> phone number`),o.refreshFilted(),u.value++}})};return(l,n)=>{const s=Vt;return _t(),Ct("div",Ke,[q(s,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=h=>t.value=h),label:"門號 (DSC 轉出 csv)",accept:"text/csv",multiple:""},null,8,["modelValue"]),u.value?(_t(),Ct("small",Qe,"已讀取 "+wt(u.value)+" 檔案, "+wt(i.value)+" 筆記錄",1)):Pt("",!0)])}}});const tr=zt({__name:"TaGroupList",setup(C){const o=Dt(),t=Ut(()=>{if(!o.groupList)return 0;console.time("[TaGroupList] TotalSubIdCount");const i=new Set;for(let a=0;a<o.groupList.length;a++){const n=o.groupList[a].twmIdList;for(let s=0;s<n.length;s++){const h=n[s];i.add(h)}}return console.timeEnd("[TaGroupList] TotalSubIdCount"),i.size}),u=i=>{const a=o.groupList.findIndex(n=>n.name===i.name);a>=0&&o.groupList.splice(a,1);const l=new Te(i.name,i.twmIdList);o.smsGroupList.push(l)};return(i,a)=>{const l=_e,n=ve,s=we,h=be,w=It,y=ye,k=ke,d=xe;return _t(),Yt(d,{hover:"",small:"",responsive:"",bordered:""},{default:tt(()=>[q(s,{"head-variant":"dark"},{default:tt(()=>[q(n,null,{default:tt(()=>[q(l,{class:"text-center align-middle"},{default:tt(()=>[dt("分群")]),_:1}),q(l,{class:"text-center align-middle"},{default:tt(()=>[dt("數量")]),_:1}),q(l,{class:"text-center align-middle"},{default:tt(()=>[dt("加入發送")]),_:1})]),_:1})]),_:1}),q(y,null,{default:tt(()=>[(_t(!0),Ct(ne,null,ge(St(o).groupList,x=>(_t(),Yt(n,{key:x.name},{default:tt(()=>[q(l,{class:"align-middle"},{default:tt(()=>[dt(wt(x.name),1)]),_:2},1024),q(h,{class:"text-end align-middle"},{default:tt(()=>[dt(wt(x.twmIdSet.size),1)]),_:2},1024),q(l,{class:"text-center"},{default:tt(()=>[q(w,{variant:"outline-primary",size:"sm",onClick:c=>u(x)},{default:tt(()=>[dt("加入")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),q(k,null,{default:tt(()=>[q(n,null,{default:tt(()=>[q(h,null,{default:tt(()=>{var x;return[dt("共 "+wt((x=St(o).groupList)==null?void 0:x.length)+" 群",1)]}),_:1}),q(h,{class:"text-end"},{default:tt(()=>[dt(wt(t.value),1)]),_:1}),q(h)]),_:1})]),_:1})]),_:1})}}});function Qt(C){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Qt(C)}function Wt(C){if(C===null||C===!0||C===!1)return NaN;var o=Number(C);return isNaN(o)?o:o<0?Math.ceil(o):Math.floor(o)}function Et(C,o){if(o.length<C)throw new TypeError(C+" argument"+(C>1?"s":"")+" required, but only "+o.length+" present")}function Ft(C){Et(1,arguments);var o=Object.prototype.toString.call(C);return C instanceof Date||Qt(C)==="object"&&o==="[object Date]"?new Date(C.getTime()):typeof C=="number"||o==="[object Number]"?new Date(C):((typeof C=="string"||o==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function er(C,o){Et(2,arguments);var t=Ft(C).getTime(),u=Wt(o);return new Date(t+u)}var rr={};function ee(){return rr}function nr(C){var o=new Date(Date.UTC(C.getFullYear(),C.getMonth(),C.getDate(),C.getHours(),C.getMinutes(),C.getSeconds(),C.getMilliseconds()));return o.setUTCFullYear(C.getFullYear()),C.getTime()-o.getTime()}function ir(C){return Et(1,arguments),C instanceof Date||Qt(C)==="object"&&Object.prototype.toString.call(C)==="[object Date]"}function ar(C){if(Et(1,arguments),!ir(C)&&typeof C!="number")return!1;var o=Ft(C);return!isNaN(Number(o))}function sr(C,o){Et(2,arguments);var t=Wt(o);return er(C,-t)}var or=864e5;function ur(C){Et(1,arguments);var o=Ft(C),t=o.getTime();o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0);var u=o.getTime(),i=t-u;return Math.floor(i/or)+1}function Jt(C){Et(1,arguments);var o=1,t=Ft(C),u=t.getUTCDay(),i=(u<o?7:0)+u-o;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Ae(C){Et(1,arguments);var o=Ft(C),t=o.getUTCFullYear(),u=new Date(0);u.setUTCFullYear(t+1,0,4),u.setUTCHours(0,0,0,0);var i=Jt(u),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var l=Jt(a);return o.getTime()>=i.getTime()?t+1:o.getTime()>=l.getTime()?t:t-1}function lr(C){Et(1,arguments);var o=Ae(C),t=new Date(0);t.setUTCFullYear(o,0,4),t.setUTCHours(0,0,0,0);var u=Jt(t);return u}var dr=6048e5;function cr(C){Et(1,arguments);var o=Ft(C),t=Jt(o).getTime()-lr(o).getTime();return Math.round(t/dr)+1}function te(C,o){var t,u,i,a,l,n,s,h;Et(1,arguments);var w=ee(),y=Wt((t=(u=(i=(a=o==null?void 0:o.weekStartsOn)!==null&&a!==void 0?a:o==null||(l=o.locale)===null||l===void 0||(n=l.options)===null||n===void 0?void 0:n.weekStartsOn)!==null&&i!==void 0?i:w.weekStartsOn)!==null&&u!==void 0?u:(s=w.locale)===null||s===void 0||(h=s.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&t!==void 0?t:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var k=Ft(C),d=k.getUTCDay(),x=(d<y?7:0)+d-y;return k.setUTCDate(k.getUTCDate()-x),k.setUTCHours(0,0,0,0),k}function Le(C,o){var t,u,i,a,l,n,s,h;Et(1,arguments);var w=Ft(C),y=w.getUTCFullYear(),k=ee(),d=Wt((t=(u=(i=(a=o==null?void 0:o.firstWeekContainsDate)!==null&&a!==void 0?a:o==null||(l=o.locale)===null||l===void 0||(n=l.options)===null||n===void 0?void 0:n.firstWeekContainsDate)!==null&&i!==void 0?i:k.firstWeekContainsDate)!==null&&u!==void 0?u:(s=k.locale)===null||s===void 0||(h=s.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=new Date(0);x.setUTCFullYear(y+1,0,d),x.setUTCHours(0,0,0,0);var c=te(x,o),g=new Date(0);g.setUTCFullYear(y,0,d),g.setUTCHours(0,0,0,0);var m=te(g,o);return w.getTime()>=c.getTime()?y+1:w.getTime()>=m.getTime()?y:y-1}function hr(C,o){var t,u,i,a,l,n,s,h;Et(1,arguments);var w=ee(),y=Wt((t=(u=(i=(a=o==null?void 0:o.firstWeekContainsDate)!==null&&a!==void 0?a:o==null||(l=o.locale)===null||l===void 0||(n=l.options)===null||n===void 0?void 0:n.firstWeekContainsDate)!==null&&i!==void 0?i:w.firstWeekContainsDate)!==null&&u!==void 0?u:(s=w.locale)===null||s===void 0||(h=s.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&t!==void 0?t:1),k=Le(C,o),d=new Date(0);d.setUTCFullYear(k,0,y),d.setUTCHours(0,0,0,0);var x=te(d,o);return x}var fr=6048e5;function mr(C,o){Et(1,arguments);var t=Ft(C),u=te(t,o).getTime()-hr(t,o).getTime();return Math.round(u/fr)+1}function mt(C,o){for(var t=C<0?"-":"",u=Math.abs(C).toString();u.length<o;)u="0"+u;return t+u}var pr={y:function(o,t){var u=o.getUTCFullYear(),i=u>0?u:1-u;return mt(t==="yy"?i%100:i,t.length)},M:function(o,t){var u=o.getUTCMonth();return t==="M"?String(u+1):mt(u+1,2)},d:function(o,t){return mt(o.getUTCDate(),t.length)},a:function(o,t){var u=o.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(o,t){return mt(o.getUTCHours()%12||12,t.length)},H:function(o,t){return mt(o.getUTCHours(),t.length)},m:function(o,t){return mt(o.getUTCMinutes(),t.length)},s:function(o,t){return mt(o.getUTCSeconds(),t.length)},S:function(o,t){var u=t.length,i=o.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,u-3));return mt(a,t.length)}};const Rt=pr;var $t={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gr={G:function(o,t,u){var i=o.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return u.era(i,{width:"abbreviated"});case"GGGGG":return u.era(i,{width:"narrow"});case"GGGG":default:return u.era(i,{width:"wide"})}},y:function(o,t,u){if(t==="yo"){var i=o.getUTCFullYear(),a=i>0?i:1-i;return u.ordinalNumber(a,{unit:"year"})}return Rt.y(o,t)},Y:function(o,t,u,i){var a=Le(o,i),l=a>0?a:1-a;if(t==="YY"){var n=l%100;return mt(n,2)}return t==="Yo"?u.ordinalNumber(l,{unit:"year"}):mt(l,t.length)},R:function(o,t){var u=Ae(o);return mt(u,t.length)},u:function(o,t){var u=o.getUTCFullYear();return mt(u,t.length)},Q:function(o,t,u){var i=Math.ceil((o.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return mt(i,2);case"Qo":return u.ordinalNumber(i,{unit:"quarter"});case"QQQ":return u.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return u.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return u.quarter(i,{width:"wide",context:"formatting"})}},q:function(o,t,u){var i=Math.ceil((o.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return mt(i,2);case"qo":return u.ordinalNumber(i,{unit:"quarter"});case"qqq":return u.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return u.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return u.quarter(i,{width:"wide",context:"standalone"})}},M:function(o,t,u){var i=o.getUTCMonth();switch(t){case"M":case"MM":return Rt.M(o,t);case"Mo":return u.ordinalNumber(i+1,{unit:"month"});case"MMM":return u.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return u.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return u.month(i,{width:"wide",context:"formatting"})}},L:function(o,t,u){var i=o.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return mt(i+1,2);case"Lo":return u.ordinalNumber(i+1,{unit:"month"});case"LLL":return u.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return u.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return u.month(i,{width:"wide",context:"standalone"})}},w:function(o,t,u,i){var a=mr(o,i);return t==="wo"?u.ordinalNumber(a,{unit:"week"}):mt(a,t.length)},I:function(o,t,u){var i=cr(o);return t==="Io"?u.ordinalNumber(i,{unit:"week"}):mt(i,t.length)},d:function(o,t,u){return t==="do"?u.ordinalNumber(o.getUTCDate(),{unit:"date"}):Rt.d(o,t)},D:function(o,t,u){var i=ur(o);return t==="Do"?u.ordinalNumber(i,{unit:"dayOfYear"}):mt(i,t.length)},E:function(o,t,u){var i=o.getUTCDay();switch(t){case"E":case"EE":case"EEE":return u.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return u.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return u.day(i,{width:"short",context:"formatting"});case"EEEE":default:return u.day(i,{width:"wide",context:"formatting"})}},e:function(o,t,u,i){var a=o.getUTCDay(),l=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return mt(l,2);case"eo":return u.ordinalNumber(l,{unit:"day"});case"eee":return u.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return u.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return u.day(a,{width:"short",context:"formatting"});case"eeee":default:return u.day(a,{width:"wide",context:"formatting"})}},c:function(o,t,u,i){var a=o.getUTCDay(),l=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return mt(l,t.length);case"co":return u.ordinalNumber(l,{unit:"day"});case"ccc":return u.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return u.day(a,{width:"narrow",context:"standalone"});case"cccccc":return u.day(a,{width:"short",context:"standalone"});case"cccc":default:return u.day(a,{width:"wide",context:"standalone"})}},i:function(o,t,u){var i=o.getUTCDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return mt(a,t.length);case"io":return u.ordinalNumber(a,{unit:"day"});case"iii":return u.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return u.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return u.day(i,{width:"short",context:"formatting"});case"iiii":default:return u.day(i,{width:"wide",context:"formatting"})}},a:function(o,t,u){var i=o.getUTCHours(),a=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return u.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return u.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return u.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return u.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(o,t,u){var i=o.getUTCHours(),a;switch(i===12?a=$t.noon:i===0?a=$t.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return u.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return u.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return u.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return u.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(o,t,u){var i=o.getUTCHours(),a;switch(i>=17?a=$t.evening:i>=12?a=$t.afternoon:i>=4?a=$t.morning:a=$t.night,t){case"B":case"BB":case"BBB":return u.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return u.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return u.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(o,t,u){if(t==="ho"){var i=o.getUTCHours()%12;return i===0&&(i=12),u.ordinalNumber(i,{unit:"hour"})}return Rt.h(o,t)},H:function(o,t,u){return t==="Ho"?u.ordinalNumber(o.getUTCHours(),{unit:"hour"}):Rt.H(o,t)},K:function(o,t,u){var i=o.getUTCHours()%12;return t==="Ko"?u.ordinalNumber(i,{unit:"hour"}):mt(i,t.length)},k:function(o,t,u){var i=o.getUTCHours();return i===0&&(i=24),t==="ko"?u.ordinalNumber(i,{unit:"hour"}):mt(i,t.length)},m:function(o,t,u){return t==="mo"?u.ordinalNumber(o.getUTCMinutes(),{unit:"minute"}):Rt.m(o,t)},s:function(o,t,u){return t==="so"?u.ordinalNumber(o.getUTCSeconds(),{unit:"second"}):Rt.s(o,t)},S:function(o,t){return Rt.S(o,t)},X:function(o,t,u,i){var a=i._originalDate||o,l=a.getTimezoneOffset();if(l===0)return"Z";switch(t){case"X":return fe(l);case"XXXX":case"XX":return Nt(l);case"XXXXX":case"XXX":default:return Nt(l,":")}},x:function(o,t,u,i){var a=i._originalDate||o,l=a.getTimezoneOffset();switch(t){case"x":return fe(l);case"xxxx":case"xx":return Nt(l);case"xxxxx":case"xxx":default:return Nt(l,":")}},O:function(o,t,u,i){var a=i._originalDate||o,l=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+he(l,":");case"OOOO":default:return"GMT"+Nt(l,":")}},z:function(o,t,u,i){var a=i._originalDate||o,l=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+he(l,":");case"zzzz":default:return"GMT"+Nt(l,":")}},t:function(o,t,u,i){var a=i._originalDate||o,l=Math.floor(a.getTime()/1e3);return mt(l,t.length)},T:function(o,t,u,i){var a=i._originalDate||o,l=a.getTime();return mt(l,t.length)}};function he(C,o){var t=C>0?"-":"+",u=Math.abs(C),i=Math.floor(u/60),a=u%60;if(a===0)return t+String(i);var l=o||"";return t+String(i)+l+mt(a,2)}function fe(C,o){if(C%60===0){var t=C>0?"-":"+";return t+mt(Math.abs(C)/60,2)}return Nt(C,o)}function Nt(C,o){var t=o||"",u=C>0?"-":"+",i=Math.abs(C),a=mt(Math.floor(i/60),2),l=mt(i%60,2);return u+a+t+l}const _r=gr;var me=function(o,t){switch(o){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ze=function(o,t){switch(o){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},vr=function(o,t){var u=o.match(/(P+)(p+)?/)||[],i=u[1],a=u[2];if(!a)return me(o,t);var l;switch(i){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"});break}return l.replace("{{date}}",me(i,t)).replace("{{time}}",ze(a,t))},wr={p:ze,P:vr};const br=wr;var yr=["D","DD"],kr=["YY","YYYY"];function xr(C){return yr.indexOf(C)!==-1}function Sr(C){return kr.indexOf(C)!==-1}function pe(C,o,t){if(C==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(o,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(C==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(o,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(C==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(o,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(C==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(o,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Cr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Er=function(o,t,u){var i,a=Cr[o];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),u!=null&&u.addSuffix?u.comparison&&u.comparison>0?"in "+i:i+" ago":i};const Tr=Er;function re(C){return function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=o.width?String(o.width):C.defaultWidth,u=C.formats[t]||C.formats[C.defaultWidth];return u}}var Ir={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Or={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ar={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lr={date:re({formats:Ir,defaultWidth:"full"}),time:re({formats:Or,defaultWidth:"full"}),dateTime:re({formats:Ar,defaultWidth:"full"})};const zr=Lr;var Dr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Fr=function(o,t,u,i){return Dr[o]};const Rr=Fr;function Ht(C){return function(o,t){var u=t!=null&&t.context?String(t.context):"standalone",i;if(u==="formatting"&&C.formattingValues){var a=C.defaultFormattingWidth||C.defaultWidth,l=t!=null&&t.width?String(t.width):a;i=C.formattingValues[l]||C.formattingValues[a]}else{var n=C.defaultWidth,s=t!=null&&t.width?String(t.width):C.defaultWidth;i=C.values[s]||C.values[n]}var h=C.argumentCallback?C.argumentCallback(o):o;return i[h]}}var Nr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Br={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Pr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ur={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jr=function(o,t){var u=Number(o),i=u%100;if(i>20||i<10)switch(i%10){case 1:return u+"st";case 2:return u+"nd";case 3:return u+"rd"}return u+"th"},$r={ordinalNumber:jr,era:Ht({values:Nr,defaultWidth:"wide"}),quarter:Ht({values:Br,defaultWidth:"wide",argumentCallback:function(o){return o-1}}),month:Ht({values:Pr,defaultWidth:"wide"}),day:Ht({values:Ur,defaultWidth:"wide"}),dayPeriod:Ht({values:Mr,defaultWidth:"wide",formattingValues:Wr,defaultFormattingWidth:"wide"})};const Gr=$r;function qt(C){return function(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t.width,i=u&&C.matchPatterns[u]||C.matchPatterns[C.defaultMatchWidth],a=o.match(i);if(!a)return null;var l=a[0],n=u&&C.parsePatterns[u]||C.parsePatterns[C.defaultParseWidth],s=Array.isArray(n)?Zr(n,function(y){return y.test(l)}):Yr(n,function(y){return y.test(l)}),h;h=C.valueCallback?C.valueCallback(s):s,h=t.valueCallback?t.valueCallback(h):h;var w=o.slice(l.length);return{value:h,rest:w}}}function Yr(C,o){for(var t in C)if(C.hasOwnProperty(t)&&o(C[t]))return t}function Zr(C,o){for(var t=0;t<C.length;t++)if(o(C[t]))return t}function Hr(C){return function(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.match(C.matchPattern);if(!u)return null;var i=u[0],a=o.match(C.parsePattern);if(!a)return null;var l=C.valueCallback?C.valueCallback(a[0]):a[0];l=t.valueCallback?t.valueCallback(l):l;var n=o.slice(i.length);return{value:l,rest:n}}}var qr=/^(\d+)(th|st|nd|rd)?/i,Vr=/\d+/i,Xr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kr={any:[/^b/i,/^(a|c)/i]},Qr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jr={any:[/1/i,/2/i,/3/i,/4/i]},tn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},en={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},an={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},on={ordinalNumber:Hr({matchPattern:qr,parsePattern:Vr,valueCallback:function(o){return parseInt(o,10)}}),era:qt({matchPatterns:Xr,defaultMatchWidth:"wide",parsePatterns:Kr,defaultParseWidth:"any"}),quarter:qt({matchPatterns:Qr,defaultMatchWidth:"wide",parsePatterns:Jr,defaultParseWidth:"any",valueCallback:function(o){return o+1}}),month:qt({matchPatterns:tn,defaultMatchWidth:"wide",parsePatterns:en,defaultParseWidth:"any"}),day:qt({matchPatterns:rn,defaultMatchWidth:"wide",parsePatterns:nn,defaultParseWidth:"any"}),dayPeriod:qt({matchPatterns:an,defaultMatchWidth:"any",parsePatterns:sn,defaultParseWidth:"any"})};const un=on;var ln={code:"en-US",formatDistance:Tr,formatLong:zr,formatRelative:Rr,localize:Gr,match:un,options:{weekStartsOn:0,firstWeekContainsDate:1}};const dn=ln;var cn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fn=/^'([^]*?)'?$/,mn=/''/g,pn=/[a-zA-Z]/;function Gt(C,o,t){var u,i,a,l,n,s,h,w,y,k,d,x,c,g,m,p,E,O;Et(2,arguments);var A=String(o),P=ee(),T=(u=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:P.locale)!==null&&u!==void 0?u:dn,v=Wt((a=(l=(n=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(h=t.locale)===null||h===void 0||(w=h.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&n!==void 0?n:P.firstWeekContainsDate)!==null&&l!==void 0?l:(y=P.locale)===null||y===void 0||(k=y.options)===null||k===void 0?void 0:k.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=Wt((d=(x=(c=(g=t==null?void 0:t.weekStartsOn)!==null&&g!==void 0?g:t==null||(m=t.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&c!==void 0?c:P.weekStartsOn)!==null&&x!==void 0?x:(E=P.locale)===null||E===void 0||(O=E.options)===null||O===void 0?void 0:O.weekStartsOn)!==null&&d!==void 0?d:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var L=Ft(C);if(!ar(L))throw new RangeError("Invalid time value");var M=nr(L),b=sr(L,M),F={firstWeekContainsDate:v,weekStartsOn:f,locale:T,_originalDate:L},r=A.match(hn).map(function(U){var K=U[0];if(K==="p"||K==="P"){var N=br[K];return N(U,T.formatLong)}return U}).join("").match(cn).map(function(U){if(U==="''")return"'";var K=U[0];if(K==="'")return gn(U);var N=_r[K];if(N)return!(t!=null&&t.useAdditionalWeekYearTokens)&&Sr(U)&&pe(U,o,String(C)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&xr(U)&&pe(U,o,String(C)),N(b,U,T.localize,F);if(K.match(pn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");return U}).join("");return r}function gn(C){var o=C.match(fn);return o?o[1].replace(mn,"'"):C}const _n={class:"import-sms-file"},vn=zt({__name:"ImportTwmIdFile",setup(C){const o=Dt(),t=xt([]),u=xt(0),i=xt(new Set);Mt(t,()=>{!t||t.value.length===0||(u.value=0,i.value.clear(),o.smsGroupList.forEach(n=>{n.smsTwmIdList.length=0}),t.value.forEach(n=>a(n)))}),Mt(u,()=>{u.value===t.value.length&&(o.smsGroupList.forEach(n=>{let s=0,h=0;n.twmIdList.forEach(w=>{i.value.has(w)?(n.smsTwmIdList.push(w),s++):h++}),console.log(`[ImportSmsFile] Group: ${n.name}, Exist: ${s}, NotExist: ${h}`)}),o.refreshFilted())});const a=n=>{const s=new FileReader;s.onload=function(h){var k;const w=(k=h.target)==null?void 0:k.result;(w==null?void 0:w.split(`\r
`)).forEach(d=>{i.value.add(d)}),console.log(`[ImportSmsFile] import ${i.value.size} TwmId`),u.value++},s.readAsText(n)},l=()=>{var n;(n=document.getElementById("import-twmid"))==null||n.click()};return(n,s)=>{const h=It,w=Vt;return _t(),Ct("div",_n,[q(h,{variant:"outline-primary",size:"sm",onClick:l,class:"ms-1"},{default:tt(()=>[dt("匯入 TwmId (MFO)")]),_:1}),q(w,{ref:"configFileRef",id:"import-twmid",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=y=>t.value=y),accept:"text/csv",multiple:""},null,8,["modelValue"])])}}});const wn={class:"export-sms-file"},bn=zt({__name:"ExportSmsFile",props:["disable"],setup(C){const o=C,t=Dt(),u=xt(!1),i=xt([]),a=Ut(()=>{if(t.userArgs.length!==0)return t.userArgs.map(s=>({text:s,value:s}))}),l=()=>{a.value&&a.value.length>0?u.value=!0:n()},n=()=>{const s=Gt(new Date,"yyyyMMdd"),h=t.smsGroupList.filter(y=>y.smsPhoneNumberFilted.length>0);let w=0;for(let y=0;y<h.length;y++){const k=h[y],d=[];k.smsPhoneNumberFilted.forEach(c=>{const g=t.phoneNumberUserMap.get(c);if(g){const m=[c];i.value.forEach(p=>{g.params&&m.push(g.params[p])}),d.push(m)}}),w+=k.smsPhoneNumberFilted.length;const x=t.partition(d,4e4);for(let c=0;c<x.length;c++){const g=x[c],m=Bt.unparse(g,{delimiter:"	"}),p=x.length===1?"":`_${x.length}-${c+1}`,E=`${t.campaignName}_商務簡訊_${s}_${y+1}_${k.name}${p}_${g.length}.txt`;t.downloadFile(m,E)}}};return(s,h)=>{const w=It,y=Ue,k=Me;return _t(),Ct("div",wn,[q(w,{variant:"outline-primary",size:"sm",onClick:l,disabled:o.disable},{default:tt(()=>[dt(" 匯出門號 (商務簡訊) ")]),_:1},8,["disabled"]),a.value?(_t(),Yt(k,{key:0,modelValue:u.value,"onUpdate:modelValue":h[1]||(h[1]=d=>u.value=d),"ok-title":"匯出","cancel-title":"取消","cancel-variant":"outline-secondary",onOk:n},{default:tt(()=>[q(y,{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=d=>i.value=d),options:a.value,stacked:""},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):Pt("",!0)])}}});const ue=C=>(ie("data-v-979f3d65"),C=C(),ae(),C),yn={class:"d-flex flex-column justify-content-end"},kn=ue(()=>At("br",null,null,-1)),xn=ue(()=>At("br",null,null,-1)),Sn=ue(()=>At("span",{class:"hint"},"(商務簡訊)",-1)),Cn={class:"text-nowrap"},En={class:"d-flex flex-column"},Tn={class:"d-flex flex-column"},In=zt({__name:"SmsGroupList",setup(C){const o=Dt(),t=Ut(()=>{if(!o.smsGroupList)return 0;console.time("[SmsGroupList] TotalSubIdCount");const p=new Set;for(let E=0;E<o.smsGroupList.length;E++){const A=o.smsGroupList[E].twmIdList;for(let P=0;P<A.length;P++){const T=A[P];p.add(T)}}return console.timeEnd("[SmsGroupList] TotalSubIdCount"),p.size}),u=Ut(()=>{let p=0;return o.smsGroupList.forEach(E=>p+=E.smsTwmIdListFilted.length),p}),i=Ut(()=>{let p=0;return o.smsGroupList.forEach(E=>p+=E.smsPhoneNumberFilted.length),p}),a=(p,E)=>{const O=p.twmIdList;if(E>=100)p.smsTwmIdList=O.slice(0);else{const A=O.length*E/100,P=l(O).slice(0,A);p.smsTwmIdList=P.slice(0),console.log(`[GroupList] addSmsList: ${A}: ${P.length}`)}o.refreshFilted()},l=p=>{const E=p.slice(0);for(let O=E.length-1;O>0;O--){let A=Math.floor(Math.random()*(O+1));[E[O],E[A]]=[E[A],E[O]]}return E},n=p=>{const E=o.smsGroupList.findIndex(A=>A.name===p.name);E>=0&&o.smsGroupList.splice(E,1);const O=new oe(p.name,p.twmIdList);o.groupList.push(O)},s=()=>{y(p=>p.twmIdList)},h=()=>{y(p=>p.smsTwmIdListFilted)},w=()=>{if(!o.smsGroupList)return;const p=[],E=new Set;for(let O=0;O<o.smsGroupList.length;O++){const P=o.smsGroupList[O].smsPhoneNumberFilted;for(let T=0;T<P.length;T++){const v=P[T],f=o.phoneNumberUserMap.get(v);if(!f)continue;const L=f.twmId;E.has(L)||(E.add(L),p.push([L]))}o.userInfoListTest.forEach(T=>{const v=T.twmId;E.has(v)||(E.add(v),p.push([v]))})}k(p)},y=p=>{if(!o.smsGroupList)return;const E=[],O=new Set;for(let A=0;A<o.smsGroupList.length;A++){const P=o.smsGroupList[A],T=p(P).slice(0);o.userInfoListTest.forEach(v=>T.push(v.twmId));for(let v=0;v<T.length;v++){const f=T[v];O.has(f)||(O.add(f),E.push([f]))}}k(E)},k=p=>{const E=Gt(new Date,"yyyyMMdd"),O=[],A=o.partition(p,2e4);for(let T=0;T<A.length;T++){const v=A[T],f=`${o.campaignName}_MFO_白名單_${E}_${A.length}-${T+1}_${v.length}.csv`,L=Bt.unparse(v);O.push({fileName:f,data:L})}const P=`${o.campaignName}_MFO_白名單_${E}_${A.length}_${p.length}.zip`;o.downloadZip(P,O)},d=()=>{c(p=>p.twmIdList)},x=()=>{c(p=>p.smsTwmIdListFilted)},c=p=>{if(!o.smsGroupList)return;const E=[],O=new Set;for(let P=0;P<o.smsGroupList.length;P++){const T=o.smsGroupList[P],v=p(T);for(let f=0;f<v.length;f++){const L=v[f],M=o.twmIdUserMap.get(L);!M||!M.subId||M.subId.length===0||O.has(M.subId)||(O.add(M.subId),E.push({SUBSCR_ID:M.subId}))}}console.log(`[SmsGroupList] export ${E.length} subId`);const A=o.partition(E,2e5);for(let P=0;P<A.length;P++){const T=A[P],v=Gt(new Date,"yyyyMMdd"),f=`${o.campaignName}_DSC_SubId_${v}_${A.length}-${P+1}_${T.length}.csv`,L=Bt.unparse(T);o.downloadFile(L,f)}},g=()=>{if(!o.smsGroupList)return;const p=[];for(let P=0;P<o.smsGroupList.length;P++){const T=o.smsGroupList[P],v=T.smsPhoneNumberFilted;for(let f=0;f<v.length;f++){const L=v[f],M=o.phoneNumberUserMap.get(L);M&&p.push({Sms:T.name,TwmId:M.twmId,SubId:M.subId,門號:M.phoneNumber})}}console.log(`[SmsGroupList] export ${p.length} All Sms CSV`);const E=Gt(new Date,"yyyyMMdd"),O=`${o.campaignName}_發送名單資訊_${E}_${p.length}.csv`,A=Bt.unparse(p);o.downloadFile(A,O)},m=()=>{const p=Gt(new Date,"yyyyMMdd"),E=o.smsGroupList.filter(T=>T.smsPhoneNumberFilted.length>0),O=[];let A=0;for(let T=0;T<E.length;T++){const v=E[T],f=`用戶分群: ${v.name}\r
簡訊內容: \r
發送數量: ${v.smsPhoneNumberFilted.length}\r
`,L=`${o.campaignName}_客服_${p}_${T+1}_發送資訊.txt`;O.push({fileName:L,data:f});const M=[];v.smsPhoneNumberFilted.forEach(F=>M.push([F])),A+=v.smsPhoneNumberFilted.length;const b=o.partition(M,5e4);for(let F=0;F<b.length;F++){const r=b[F],U=Bt.unparse(r),K=b.length===1?"":`_${b.length}-${F+1}`,N=`${o.campaignName}_客服_${p}_${T+1}_門號${K}_${r.length}.txt`;O.push({fileName:N,data:U})}}const P=`${o.campaignName}_客服_${p}_${E.length}群_${A}人.zip`;o.downloadZip(P,O)};return(p,E)=>{const O=_e,A=ve,P=we,T=be,v=ye,f=ke,L=xe;return _t(),Ct("div",yn,[q(L,{hover:"",small:"",responsive:"",bordered:""},{default:tt(()=>[q(P,{"head-variant":"dark"},{default:tt(()=>[q(A,null,{default:tt(()=>[q(O,{class:"text-center align-middle"},{default:tt(()=>[dt("分群")]),_:1}),q(O,{class:"text-center align-middle"},{default:tt(()=>[dt("原數量")]),_:1}),q(O,{class:"text-center align-middle"},{default:tt(()=>[dt("發送")]),_:1}),q(O,{class:"text-center align-middle"},{default:tt(()=>[dt("欲發送數")]),_:1}),q(O,{class:"text-center align-middle"},{default:tt(()=>[dt(" 發送數"),kn,q(vn)]),_:1}),q(O,{class:"text-center align-middle"},{default:tt(()=>[dt("門號數"),xn,Sn]),_:1}),q(O,{class:"text-center align-middle"},{default:tt(()=>[dt("刪除")]),_:1})]),_:1})]),_:1}),q(v,null,{default:tt(()=>[(_t(!0),Ct(ne,null,ge(St(o).smsGroupList,M=>(_t(),Yt(A,{key:M.name},{default:tt(()=>[q(O,{class:"align-middle"},{default:tt(()=>[dt(wt(M.name),1)]),_:2},1024),q(T,{class:"text-end align-middle"},{default:tt(()=>{var b;return[dt(wt((b=M.twmIdList)==null?void 0:b.length),1)]}),_:2},1024),q(T,{class:"text-center align-middle"},{default:tt(()=>[At("div",Cn,[q(St(It),{variant:"outline-primary",size:"sm",onClick:b=>a(M,10)},{default:tt(()=>[dt("10%")]),_:2},1032,["onClick"]),q(St(It),{variant:"outline-primary",size:"sm",onClick:b=>a(M,100),class:"ms-1"},{default:tt(()=>[dt("All")]),_:2},1032,["onClick"])])]),_:2},1024),q(T,{class:"text-end align-middle"},{default:tt(()=>[dt(wt(M.smsTwmIdList.length),1)]),_:2},1024),q(T,{class:"text-end align-middle"},{default:tt(()=>[dt(wt(M.smsTwmIdListFilted.length),1)]),_:2},1024),q(T,{class:"text-end align-middle"},{default:tt(()=>[dt(wt(M.smsPhoneNumberFilted.length),1)]),_:2},1024),q(T,{class:"text-center align-middle"},{default:tt(()=>[q(St(It),{variant:"outline-danger",size:"sm",onClick:b=>n(M)},{default:tt(()=>[dt(" 刪除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),q(f,null,{default:tt(()=>[q(A,null,{default:tt(()=>[q(T,null,{default:tt(()=>[dt("共 "+wt(St(o).smsGroupList.length)+" 群",1)]),_:1}),q(T,{class:"text-end"},{default:tt(()=>[dt(wt(t.value),1)]),_:1}),q(T),q(T),q(T,{class:"text-end"},{default:tt(()=>[dt(wt(u.value),1)]),_:1}),q(T,{class:"text-end"},{default:tt(()=>[dt(wt(i.value),1)]),_:1}),q(T)]),_:1}),q(A,null,{default:tt(()=>[q(T),q(T,{class:"text-center"},{default:tt(()=>[At("div",En,[q(St(It),{variant:"outline-primary",size:"sm",onClick:d},{default:tt(()=>[dt("匯出 SubId (DSC)")]),_:1}),q(St(It),{variant:"outline-primary",size:"sm",onClick:s,class:"mt-1"},{default:tt(()=>[dt(" 匯出 TwmId (MFO) ")]),_:1})])]),_:1}),q(T),q(T),q(T,{class:"text-center"},{default:tt(()=>[At("div",Tn,[q(St(It),{variant:"outline-primary",size:"sm",onClick:x,disabled:u.value<=0},{default:tt(()=>[dt(" 匯出 SubId (DSC) ")]),_:1},8,["disabled"]),q(St(It),{variant:"outline-primary",size:"sm",class:"mt-1",onClick:h,disabled:u.value<=0},{default:tt(()=>[dt(" 匯出 TwmId (MFO) ")]),_:1},8,["disabled"])])]),_:1}),q(T,{class:"text-center align-middle"},{default:tt(()=>[q(St(It),{variant:"outline-primary",size:"sm",onClick:w,disabled:u.value<=0},{default:tt(()=>[dt(" 匯出 TwmId (MFO) ")]),_:1},8,["disabled"]),q(St(It),{variant:"outline-primary",size:"sm",class:"mt-1",onClick:m,disabled:i.value<=0},{default:tt(()=>[dt(" 匯出門號 (客服) ")]),_:1},8,["disabled"]),q(bn,{class:"mt-1",disable:i.value<=0},null,8,["disable"])]),_:1}),q(T)]),_:1}),q(A,null,{default:tt(()=>[q(T),q(T),q(T),q(T),q(T,{colspan:"2",class:"text-center align-middle"},{default:tt(()=>[q(St(It),{variant:"outline-primary",size:"sm",class:"mt-1",onClick:g,disabled:u.value<=0},{default:tt(()=>[dt(" 匯出名單總表 ")]),_:1},8,["disabled"])]),_:1}),q(T)]),_:1})]),_:1})]),_:1})])}}});const On=se(In,[["__scopeId","data-v-979f3d65"]]),An=C=>(ie("data-v-882f72dd"),C=C(),ae(),C),Ln={class:"title-wrapper"},zn=An(()=>At("label",{for:"compaign-name"},"活動名稱",-1)),Dn=zt({__name:"CampaignName",setup(C){const o=Dt(),t=xt("");return Se(()=>{const u=localStorage.getItem("campaign-name");u&&(t.value=u)}),Mt(t,u=>{localStorage.setItem("campaign-name",u),o.campaignName=u}),(u,i)=>{const a=We;return _t(),Ct("div",Ln,[zn,q(a,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=l=>t.value=l),type:"text",id:"compaign-name",class:"ms-2"},null,8,["modelValue"])])}}});const Fn=se(Dn,[["__scopeId","data-v-882f72dd"]]),Rn={class:"campaign-config-wrapper"},Nn=zt({__name:"CampaignConfigFile",setup(C){const o=Dt(),t=xt(),u=xt(null);Mt(t,()=>{t.value&&i(t.value)});const i=n=>{const s=new FileReader;s.onload=function(h){var x;const w=(x=h.target)==null?void 0:x.result,y=JSON.parse(w);o.campaignName=y.name;const k=new Map;y.groupList.forEach(c=>k.set(c.name,c)),o.groupList.length=0,y.taGroupNameList.forEach(c=>{const g=k.get(c);g&&o.groupList.push(new oe(g.name,g.twmIdList))}),o.smsGroupList.length=0,y.smsGroupNameList.forEach(c=>{const g=k.get(c);if(g){const m=new Te(g.name,g.twmIdList);m.smsTwmIdList=g.smsTwmIdList.slice(0),o.smsGroupList.push(m)}}),y.userInfoList.slice(0).forEach(c=>{c.subId&&c.subId.length>0&&o.subIdUserMap.set(c.subId,c),c.twmId&&c.twmId.length>0&&o.twmIdUserMap.set(c.twmId,c)}),o.refreshFilted()},s.readAsText(n)},a=()=>{var n;(n=document.getElementById("import-campaign-config"))==null||n.click()},l=()=>{if(!o.smsGroupList)return;const n=new Ge;n.name=o.campaignName,n.userInfoList=Array.from(o.twmIdUserMap.values()),n.fromGroup(o.groupList,o.smsGroupList);const s=Gt(new Date,"yyyyMMdd"),h=`${o.campaignName}_設定檔_${s}.json`,w=JSON.stringify(n);o.downloadFile(w,h)};return(n,s)=>{const h=It,w=Vt;return _t(),Ct("div",Rn,[q(h,{variant:"outline-primary",size:"sm",onClick:l,class:"ms-1"},{default:tt(()=>[dt("匯出設定檔")]),_:1}),q(h,{variant:"outline-primary",size:"sm",onClick:a,class:"ms-1"},{default:tt(()=>[dt("匯入設定檔")]),_:1}),q(w,{ref_key:"configFileRef",ref:u,id:"import-campaign-config",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=y=>t.value=y),accept:"application/json"},null,8,["modelValue"])])}}});const Bn={class:"sms-file-wrapper"},Pn={key:0,class:"hint"},Un=zt({__name:"ImportSmsSentFile",setup(C){const o=Dt(),t=xt([]),u=xt(0),i=xt(0);Mt(t,()=>{o.phoneNumberSentSet.clear(),u.value=0,i.value=0,t.value.forEach(l=>a(l))});const a=l=>{const n=new FileReader;n.onload=function(s){var d;const h=(d=s.target)==null?void 0:d.result,w=h==null?void 0:h.split(`
`),y=o.phoneNumberSentSet.size;i.value+=w.length,w.forEach(x=>{o.phoneNumberSentSet.add(x.split(",")[0])});const k=o.phoneNumberSentSet.size;console.log(`[SmsFile] load ${k-y} Sent Phone Numbers, Total: ${o.phoneNumberSentSet.size}`),o.refreshFilted(),u.value++},n.readAsText(l)};return(l,n)=>{const s=Vt;return _t(),Ct("div",Bn,[q(s,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=h=>t.value=h),label:"已發送簡訊 (多選)",accept:"text/plain",multiple:""},null,8,["modelValue"]),u.value>0?(_t(),Ct("small",Pn,"已讀取 "+wt(u.value)+" 檔案, "+wt(i.value)+" 筆記錄",1)):Pt("",!0)])}}});const Mn=C=>(ie("data-v-26729290"),C=C(),ae(),C),Wn=Mn(()=>At("h1",null,"行銷管理小平台",-1)),jn={class:"title-wrapper"},$n={class:"file-wrapper"},Gn={key:0,class:"main-wrapper"},Yn=zt({__name:"Marketing",setup(C){const o=Dt();Se(()=>{o.addUserTest("45564360","66737619","0935523767"),o.addUserTest("45764165","66783939","0935525530"),o.addUserTest("13520651","57674022","0972197982"),o.addUserTest("42731870","","0932087196"),o.addUserTest("45495665","66737900","0915055636"),o.addUserTest("40295784","65496240","0983085853")});const t=Ut(()=>o.groupList&&o.groupList.length>0),u=Ut(()=>o.smsGroupList&&o.smsGroupList.length>0);return(i,a)=>(_t(),Ct(ne,null,[Wn,At("div",null,[At("section",jn,[q(Fn),q(Nn)]),At("section",$n,[q(Xe),q(Je),q(Un)]),t.value||u.value?(_t(),Ct("section",Gn,[t.value?(_t(),Yt(tr,{key:0})):Pt("",!0),u.value?(_t(),Yt(On,{key:1})):Pt("",!0)])):Pt("",!0)])],64))}});const qn=se(Yn,[["__scopeId","data-v-26729290"]]);export{qn as default};
